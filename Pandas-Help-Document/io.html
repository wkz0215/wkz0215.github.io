
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>IO tools (text, CSV, HDF5, â€¦) &#8212; pandas 1.5.1 documentation</title>
<script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>

<link href="theme.css-digest=9b1a4fa89bdd0e95b23b.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="pydata-sphinx-theme.css-digest=9b1a4fa89bdd0e95b23b.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link rel="stylesheet" href="all.min.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/vendor/fontawesome/6.1.2/css/all.min.css">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="stylesheet" type="text/css" href="pygments.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/pygments.css" />
<link rel="stylesheet" type="text/css" href="plot_directive.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/plot_directive.css" />
<link rel="stylesheet" type="text/css" href="copybutton.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/copybutton.css" />
<link rel="stylesheet" type="text/css" href="panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
<link rel="stylesheet" type="text/css" href="panels-variables.06eb56fa6e07937060861dad626602ad.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
<link rel="stylesheet" type="text/css" href="getting_started.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/css/getting_started.css" />
<link rel="stylesheet" type="text/css" href="pandas.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/css/pandas.css" />

<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">
<script data-url_root="../" id="documentation_options" src="documentation_options.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/documentation_options.js"></script>
<script src="jquery.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/jquery.js"></script>
<script src="underscore.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/underscore.js"></script>
<script src="doctools.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/doctools.js"></script>
<script src="clipboard.min.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/clipboard.min.js"></script>
<script src="copybutton.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/copybutton.js"></script>
<script src="toggleprompt.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/toggleprompt.js"></script>
<script src="embed-amd.js" tppabs="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
<script async="async" src="analytics.js" tppabs="https://www.google-analytics.com/analytics.js"></script>
<script>
                    window.ga = window.ga || function () {
                        (ga.q = ga.q || []).push(arguments) };
                    ga.l = +new Date;
                    ga('create', 'UA-27880019-2', 'auto');
                    ga('set', 'anonymizeIp', true);
                    ga('send', 'pageview');
                </script>
<script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/io';</script>
<script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.pydata.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.5.1';
        </script>
<link rel="shortcut icon" href="../_static/favicon.ico" />
<link rel="index" title="Index" href="../genindex.html" />
<link rel="search" title="Search" href="../search.html" />
<link rel="next" title="Indexing and selecting data" href="indexing.html" />
<link rel="prev" title="Essential basic functionality" href="basics.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
</head>
<body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
<input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
<label class="overlay overlay-primary" for="__primary"></label>
<input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
<label class="overlay overlay-secondary" for="__secondary"></label>
<div class="search-button__wrapper">
<div class="search-button__overlay"></div>
<div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="https://pandas.pydata.org/pandas-docs/stable/search.html" method="get">
<i class="icon fas fa-search"></i>
<input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</div>
</div>
<nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
<label class="sidebar-toggle primary-toggle" for="__primary">
<span class="fas fa-bars"></span>
</label>
<div id="navbar-start">
<a class="navbar-brand logo" href="index-5.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/index.html">
<img src="pandas.svg" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/pandas.svg" class="logo__image only-light" alt="Logo image">
<img src="pandas_white.svg" tppabs="https://pandas.pydata.org/static/img/pandas_white.svg" class="logo__image only-dark" alt="Logo image">
</a>
</div>
<div class="col-lg-9 navbar-header-items">
<div id="navbar-center" class="mr-auto">
<div class="navbar-center-item">
<nav class="navbar-nav">
<p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
Site Navigation
</p>
<ul id="navbar-main-elements" class="navbar-nav">
<li class="nav-item">
<a class="nav-link" href="index.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/index.html">
Getting started
</a>
</li>
<li class="nav-item current active">
<a class="nav-link" href="index-1.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">
User Guide
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-2.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/index.html">
API reference
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-3.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/development/index.html">
Development
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-4.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/whatsnew/index.html">
Release notes
</a>
</li>
</ul>
</nav>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item navbar-end__search-button-container">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
<i class="fas fa-search"></i>
</button>
</div>
<div class="navbar-end-item">
<div class="version-switcher__container dropdown">
<button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
1.5.1 
<span class="caret"></span>
</button>
<div class="version-switcher__menu dropdown-menu list-group-flush py-0">

</div>
</div>
</div>
<div class="navbar-end-item">
<span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
<a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
<a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
<a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
</div>
<div class="navbar-end-item">
<ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
<li class="nav-item">
<a href="javascript:if(confirm('https://github.com/pandas-dev/pandas  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/pandas-dev/pandas'" tppabs="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label></a>
</li>
<li class="nav-item">
<a href="javascript:if(confirm('https://twitter.com/pandas_dev  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/pandas_dev'" tppabs="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label></a>
</li>
</ul>
</div>
</div>
</div>
<div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
<i class="fas fa-search"></i>
</button>
</div>
<label class="sidebar-toggle secondary-toggle" for="__secondary">
<span class="fas fa-outdent"></span>
</label>
</div>
</nav>
<div class="bd-container">
<div class="bd-container__inner bd-page-width">
<div class="bd-sidebar-primary bd-sidebar">
<div class="sidebar-header-items sidebar-primary__section">
<div class="sidebar-header-items__center">
<div class="navbar-center-item">
<nav class="navbar-nav">
<p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
Site Navigation
</p>
<ul id="navbar-main-elements" class="navbar-nav">
<li class="nav-item">
<a class="nav-link" href="index.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/index.html">
Getting started
</a>
</li>
<li class="nav-item current active">
<a class="nav-link" href="index-1.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">
User Guide
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-2.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/index.html">
API reference
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-3.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/development/index.html">
Development
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-4.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/whatsnew/index.html">
Release notes
</a>
</li>
</ul>
</nav>
</div>
</div>
<div class="sidebar-header-items__end">
<div class="navbar-end-item">
<div class="version-switcher__container dropdown">
<button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
1.5.1 
<span class="caret"></span>
</button>
<div class="version-switcher__menu dropdown-menu list-group-flush py-0">

</div>
</div>
</div>
<div class="navbar-end-item">
<span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
<a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
<a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
<a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
</div>
<div class="navbar-end-item">
<ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
<li class="nav-item">
<a href="javascript:if(confirm('https://github.com/pandas-dev/pandas  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/pandas-dev/pandas'" tppabs="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label></a>
</li>
<li class="nav-item">
<a href="javascript:if(confirm('https://twitter.com/pandas_dev  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/pandas_dev'" tppabs="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label></a>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebar-start-items sidebar-primary__section">
<div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
<div class="bd-toc-item navbar-nav">
<ul class="current nav bd-sidenav">
<li class="toctree-l1">
<a class="reference internal" href="10min.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html">
10 minutes to pandas
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="dsintro.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/dsintro.html">
Intro to data structures
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="basics.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html">
Essential basic functionality
</a>
</li>
<li class="toctree-l1 current active">
<a class="current reference internal" href="#">
IO tools (text, CSV, HDF5, â€¦)
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="indexing.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html">
Indexing and selecting data
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="advanced.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html">
MultiIndex / advanced indexing
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="merging.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html">
Merge, join, concatenate and compare
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="reshaping.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html">
Reshaping and pivot tables
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="text.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/text.html">
Working with text data
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="missing_data.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/missing_data.html">
Working with missing data
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="duplicates.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/duplicates.html">
Duplicate Labels
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="categorical.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/categorical.html">
Categorical data
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="integer_na.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/integer_na.html">
Nullable integer data type
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="boolean.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/boolean.html">
Nullable Boolean data type
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="visualization.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html">
Chart visualization
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="style.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html">
Table Visualization
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="groupby.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html">
Group by: split-apply-combine
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="window.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/window.html">
Windowing operations
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="timeseries.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html">
Time series / date functionality
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="timedeltas.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/timedeltas.html">
Time deltas
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="options.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html">
Options and settings
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="enhancingperf.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/enhancingperf.html">
Enhancing performance
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="scale.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/scale.html">
Scaling to large datasets
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="sparse.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/sparse.html">
Sparse data structures
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="gotchas.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/gotchas.html">
Frequently Asked Questions (FAQ)
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="cookbook.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html">
Cookbook
</a>
</li>
</ul>
</div>
</nav>
</div>
</div>
<div class="sidebar-end-items sidebar-primary__section">
<div class="sidebar-end-items__item">
</div>
</div>
</div>
<main class="bd-main">
<div class="bd-content">
<div class="bd-article-container">
<div class="bd-header-article">
</div>
<article class="bd-article" role="main">
<section id="io-tools-text-csv-hdf5">
<span id="io"></span><h1>IO tools (text, CSV, HDF5, â€¦)<a class="headerlink" href="#io-tools-text-csv-hdf5" title="Permalink to this headline">#</a></h1>
<p>The pandas I/O API is a set of top level <code class="docutils literal notranslate"><span class="pre">reader</span></code> functions accessed like
<a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a> that generally return a pandas object. The corresponding
<code class="docutils literal notranslate"><span class="pre">writer</span></code> functions are object methods that are accessed like
<a class="reference internal" href="pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a>. Below is a table containing available <code class="docutils literal notranslate"><span class="pre">readers</span></code> and
<code class="docutils literal notranslate"><span class="pre">writers</span></code>.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 40%" />
<col style="width: 24%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Format Type</p></th>
<th class="head"><p>Data Description</p></th>
<th class="head"><p>Reader</p></th>
<th class="head"><p>Writer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>text</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/Comma-separated_values  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/Comma-separated_values'" tppabs="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a></p></td>
<td><p><a class="reference internal" href="#io-read-csv-table"><span class="std std-ref">read_csv</span></a></p></td>
<td><p><a class="reference internal" href="#io-store-in-csv"><span class="std std-ref">to_csv</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>text</p></td>
<td><p>Fixed-Width Text File</p></td>
<td><p><a class="reference internal" href="#io-fwf-reader"><span class="std std-ref">read_fwf</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>text</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://www.json.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.json.org/'" tppabs="https://www.json.org/">JSON</a></p></td>
<td><p><a class="reference internal" href="#io-json-reader"><span class="std std-ref">read_json</span></a></p></td>
<td><p><a class="reference internal" href="#io-json-writer"><span class="std std-ref">to_json</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>text</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/HTML  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/HTML'" tppabs="https://en.wikipedia.org/wiki/HTML">HTML</a></p></td>
<td><p><a class="reference internal" href="#io-read-html"><span class="std std-ref">read_html</span></a></p></td>
<td><p><a class="reference internal" href="#io-html"><span class="std std-ref">to_html</span></a></p></td>
</tr>
<tr class="row-even"><td><p>text</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/LaTeX  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/LaTeX'" tppabs="https://en.wikipedia.org/wiki/LaTeX">LaTeX</a></p></td>
<td></td>
<td><p><a class="reference internal" href="#io-latex"><span class="std std-ref">Styler.to_latex</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>text</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://www.w3.org/standards/xml/core  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.w3.org/standards/xml/core'" tppabs="https://www.w3.org/standards/xml/core">XML</a></p></td>
<td><p><a class="reference internal" href="#io-read-xml"><span class="std std-ref">read_xml</span></a></p></td>
<td><p><a class="reference internal" href="#io-xml"><span class="std std-ref">to_xml</span></a></p></td>
</tr>
<tr class="row-even"><td><p>text</p></td>
<td><p>Local clipboard</p></td>
<td><p><a class="reference internal" href="#io-clipboard"><span class="std std-ref">read_clipboard</span></a></p></td>
<td><p><a class="reference internal" href="#io-clipboard"><span class="std std-ref">to_clipboard</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/Microsoft_Excel  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/Microsoft_Excel'" tppabs="https://en.wikipedia.org/wiki/Microsoft_Excel">MS Excel</a></p></td>
<td><p><a class="reference internal" href="#io-excel-reader"><span class="std std-ref">read_excel</span></a></p></td>
<td><p><a class="reference internal" href="#io-excel-writer"><span class="std std-ref">to_excel</span></a></p></td>
</tr>
<tr class="row-even"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('http://opendocumentformat.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://opendocumentformat.org/'" tppabs="http://opendocumentformat.org/">OpenDocument</a></p></td>
<td><p><a class="reference internal" href="#io-ods"><span class="std std-ref">read_excel</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://support.hdfgroup.org/HDF5/whatishdf5.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://support.hdfgroup.org/HDF5/whatishdf5.html'" tppabs="https://support.hdfgroup.org/HDF5/whatishdf5.html">HDF5 Format</a></p></td>
<td><p><a class="reference internal" href="#io-hdf5"><span class="std std-ref">read_hdf</span></a></p></td>
<td><p><a class="reference internal" href="#io-hdf5"><span class="std std-ref">to_hdf</span></a></p></td>
</tr>
<tr class="row-even"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://github.com/wesm/feather  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/wesm/feather'" tppabs="https://github.com/wesm/feather">Feather Format</a></p></td>
<td><p><a class="reference internal" href="#io-feather"><span class="std std-ref">read_feather</span></a></p></td>
<td><p><a class="reference internal" href="#io-feather"><span class="std std-ref">to_feather</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://parquet.apache.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://parquet.apache.org/'" tppabs="https://parquet.apache.org/">Parquet Format</a></p></td>
<td><p><a class="reference internal" href="#io-parquet"><span class="std std-ref">read_parquet</span></a></p></td>
<td><p><a class="reference internal" href="#io-parquet"><span class="std std-ref">to_parquet</span></a></p></td>
</tr>
<tr class="row-even"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://orc.apache.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://orc.apache.org/'" tppabs="https://orc.apache.org/">ORC Format</a></p></td>
<td><p><a class="reference internal" href="#io-orc"><span class="std std-ref">read_orc</span></a></p></td>
<td><p><a class="reference internal" href="#io-orc"><span class="std std-ref">to_orc</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/Stata  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/Stata'" tppabs="https://en.wikipedia.org/wiki/Stata">Stata</a></p></td>
<td><p><a class="reference internal" href="#io-stata-reader"><span class="std std-ref">read_stata</span></a></p></td>
<td><p><a class="reference internal" href="#io-stata-writer"><span class="std std-ref">to_stata</span></a></p></td>
</tr>
<tr class="row-even"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/SAS_(software)  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/SAS_(software)'" tppabs="https://en.wikipedia.org/wiki/SAS_(software)">SAS</a></p></td>
<td><p><a class="reference internal" href="#io-sas-reader"><span class="std std-ref">read_sas</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/SPSS  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/SPSS'" tppabs="https://en.wikipedia.org/wiki/SPSS">SPSS</a></p></td>
<td><p><a class="reference internal" href="#io-spss-reader"><span class="std std-ref">read_spss</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>binary</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/pickle.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/pickle.html'" tppabs="https://docs.python.org/3/library/pickle.html">Python Pickle Format</a></p></td>
<td><p><a class="reference internal" href="#io-pickle"><span class="std std-ref">read_pickle</span></a></p></td>
<td><p><a class="reference internal" href="#io-pickle"><span class="std std-ref">to_pickle</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>SQL</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/SQL  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/SQL'" tppabs="https://en.wikipedia.org/wiki/SQL">SQL</a></p></td>
<td><p><a class="reference internal" href="#io-sql"><span class="std std-ref">read_sql</span></a></p></td>
<td><p><a class="reference internal" href="#io-sql"><span class="std std-ref">to_sql</span></a></p></td>
</tr>
<tr class="row-even"><td><p>SQL</p></td>
<td><p><a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/BigQuery  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/BigQuery'" tppabs="https://en.wikipedia.org/wiki/BigQuery">Google BigQuery</a></p></td>
<td><p><a class="reference internal" href="#io-bigquery"><span class="std std-ref">read_gbq</span></a></p></td>
<td><p><a class="reference internal" href="#io-bigquery"><span class="std std-ref">to_gbq</span></a></p></td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#io-perf"><span class="std std-ref">Here</span></a> is an informal performance comparison for some of these IO methods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For examples that use the <code class="docutils literal notranslate"><span class="pre">StringIO</span></code> class, make sure you import it
with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">io</span> <span class="pre">import</span> <span class="pre">StringIO</span></code> for Python 3.</p>
</div>
<section id="csv-text-files">
<span id="io-read-csv-table"></span><h2>CSV &amp; text files<a class="headerlink" href="#csv-text-files" title="Permalink to this headline">#</a></h2>
<p>The workhorse function for reading text files (a.k.a. flat files) is
<a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>. See the <a class="reference internal" href="cookbook.html#cookbook-csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html#cookbook-csv"><span class="std std-ref">cookbook</span></a> for some advanced strategies.</p>
<section id="parsing-options">
<h3>Parsing options<a class="headerlink" href="#parsing-options" title="Permalink to this headline">#</a></h3>
<p><a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> accepts the following common arguments:</p>
<section id="basic">
<h4>Basic<a class="headerlink" href="#basic" title="Permalink to this headline">#</a></h4>
<dl>
<dt>filepath_or_buffer<span class="classifier">various</span></dt><dd><p>Either a path to a file (a <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/stdtypes.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/stdtypes.html#str'" tppabs="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/pathlib.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/pathlib.html#pathlib.Path'" tppabs="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>,
or <code class="xref py py-class docutils literal notranslate"><span class="pre">py:py._path.local.LocalPath</span></code>), URL (including http, ftp, and S3
locations), or any object with a <code class="docutils literal notranslate"><span class="pre">read()</span></code> method (such as an open file or
<a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/io.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/io.html#io.StringIO'" tppabs="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code></a>).</p>
</dd>
<dt>sep<span class="classifier">str, defaults to <code class="docutils literal notranslate"><span class="pre">','</span></code> for <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>, <code class="docutils literal notranslate"><span class="pre">\t</span></code> for <a class="reference internal" href="pandas.read_table.html#pandas.read_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a></span></dt><dd><p>Delimiter to use. If sep is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the C engine cannot automatically detect
the separator, but the Python parsing engine can, meaning the latter will be
used and automatically detect the separator by Pythonâ€™s builtin sniffer tool,
<a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/csv.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/csv.html#csv.Sniffer'" tppabs="https://docs.python.org/3/library/csv.html#csv.Sniffer" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">csv.Sniffer</span></code></a>. In addition, separators longer than 1 character and
different from <code class="docutils literal notranslate"><span class="pre">'\s+'</span></code> will be interpreted as regular expressions and
will also force the use of the Python parsing engine. Note that regex
delimiters are prone to ignoring quoted data. Regex example: <code class="docutils literal notranslate"><span class="pre">'\\r\\t'</span></code>.</p>
</dd>
<dt>delimiter<span class="classifier">str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Alternative argument name for sep.</p>
</dd>
<dt>delim_whitespace<span class="classifier">boolean, default False</span></dt><dd><p>Specifies whether or not whitespace (e.g. <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>)
will be used as the delimiter. Equivalent to setting <code class="docutils literal notranslate"><span class="pre">sep='\s+'</span></code>.
If this option is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, nothing should be passed in for the
<code class="docutils literal notranslate"><span class="pre">delimiter</span></code> parameter.</p>
</dd>
</dl>
</section>
<section id="column-and-index-locations-and-names">
<h4>Column and index locations and names<a class="headerlink" href="#column-and-index-locations-and-names" title="Permalink to this headline">#</a></h4>
<dl>
<dt>header<span class="classifier">int or list of ints, default <code class="docutils literal notranslate"><span class="pre">'infer'</span></code></span></dt><dd><p>Row number(s) to use as the column names, and the start of the
data. Default behavior is to infer the column names: if no names are
passed the behavior is identical to <code class="docutils literal notranslate"><span class="pre">header=0</span></code> and column names
are inferred from the first line of the file, if column names are
passed explicitly then the behavior is identical to
<code class="docutils literal notranslate"><span class="pre">header=None</span></code>. Explicitly pass <code class="docutils literal notranslate"><span class="pre">header=0</span></code> to be able to replace
existing names.</p>
<p>The header can be a list of ints that specify row locations
for a MultiIndex on the columns e.g. <code class="docutils literal notranslate"><span class="pre">[0,1,3]</span></code>. Intervening rows
that are not specified will be skipped (e.g. 2 in this example is
skipped). Note that this parameter ignores commented lines and empty
lines if <code class="docutils literal notranslate"><span class="pre">skip_blank_lines=True</span></code>, so header=0 denotes the first
line of data rather than the first line of the file.</p>
</dd>
<dt>names<span class="classifier">array-like, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>List of column names to use. If file contains no header row, then you should
explicitly pass <code class="docutils literal notranslate"><span class="pre">header=None</span></code>. Duplicates in this list are not allowed.</p>
</dd>
<dt>index_col<span class="classifier">int, str, sequence of int / str, or False, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Column(s) to use as the row labels of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, either given as
string name or column index. If a sequence of int / str is given, a
MultiIndex is used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">index_col=False</span></code> can be used to force pandas to <em>not</em> use the first
column as the index, e.g. when you have a malformed file with delimiters at
the end of each line.</p>
</div>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">None</span></code> instructs pandas to guess. If the number of
fields in the column header row is equal to the number of fields in the body
of the data file, then a default index is used. If it is larger, then
the first columns are used as index so that the remaining number of fields in
the body are equal to the number of fields in the header.</p>
<p>The first row after the header is used to determine the number of columns,
which will go into the index. If the subsequent rows contain less columns
than the first row, they are filled with <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<p>This can be avoided through <code class="docutils literal notranslate"><span class="pre">usecols</span></code>. This ensures that the columns are
taken as is and the trailing data are ignored.</p>
</dd>
<dt>usecols<span class="classifier">list-like or callable, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Return a subset of the columns. If list-like, all elements must either
be positional (i.e. integer indices into the document columns) or strings
that correspond to column names provided either by the user in <code class="docutils literal notranslate"><span class="pre">names</span></code> or
inferred from the document header row(s). If <code class="docutils literal notranslate"><span class="pre">names</span></code> are given, the document
header row(s) are not taken into account. For example, a valid list-like
<code class="docutils literal notranslate"><span class="pre">usecols</span></code> parameter would be <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2]</span></code> or <code class="docutils literal notranslate"><span class="pre">['foo',</span> <span class="pre">'bar',</span> <span class="pre">'baz']</span></code>.</p>
<p>Element order is ignored, so <code class="docutils literal notranslate"><span class="pre">usecols=[0,</span> <span class="pre">1]</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0]</span></code>. To
instantiate a DataFrame from <code class="docutils literal notranslate"><span class="pre">data</span></code> with element order preserved use
<code class="docutils literal notranslate"><span class="pre">pd.read_csv(data,</span> <span class="pre">usecols=['foo',</span> <span class="pre">'bar'])[['foo',</span> <span class="pre">'bar']]</span></code> for columns
in <code class="docutils literal notranslate"><span class="pre">['foo',</span> <span class="pre">'bar']</span></code> order or
<code class="docutils literal notranslate"><span class="pre">pd.read_csv(data,</span> <span class="pre">usecols=['foo',</span> <span class="pre">'bar'])[['bar',</span> <span class="pre">'foo']]</span></code> for
<code class="docutils literal notranslate"><span class="pre">['bar',</span> <span class="pre">'foo']</span></code> order.</p>
<p>If callable, the callable function will be evaluated against the column names,
returning names where the callable function evaluates to True:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="gp">In [2]: </span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [3]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;col1,col2,col3</span><span class="se">\n</span><span class="s2">a,b,1</span><span class="se">\n</span><span class="s2">a,b,2</span><span class="se">\n</span><span class="s2">c,d,3&quot;</span>

<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">  col1 col2  col3</span>
<span class="go">0    a    b     1</span>
<span class="go">1    a    b     2</span>
<span class="go">2    c    d     3</span>

<span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;COL1&quot;</span><span class="p">,</span> <span class="s2">&quot;COL3&quot;</span><span class="p">])</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">  col1  col3</span>
<span class="go">0    a     1</span>
<span class="go">1    a     2</span>
<span class="go">2    c     3</span>
</pre></div>
</div>
<p>Using this parameter results in much faster parsing time and lower memory usage
when using the c engine. The Python engine loads the data first before deciding
which columns to drop.</p>
</dd>
<dt>squeeze<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>If the parsed data only contains one column then return a <code class="docutils literal notranslate"><span class="pre">Series</span></code>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4.0: </span>Append <code class="docutils literal notranslate"><span class="pre">.squeeze(&quot;columns&quot;)</span></code> to the call to <code class="docutils literal notranslate"><span class="pre">{func_name}</span></code> to squeeze
the data.</p>
</div>
</dd>
<dt>prefix<span class="classifier">str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Prefix to add to column numbers when no header, e.g. â€˜Xâ€™ for X0, X1, â€¦</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4.0: </span>Use a list comprehension on the DataFrameâ€™s columns after calling <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;col1,col2,col3</span><span class="se">\n</span><span class="s2">a,b,1&quot;</span>

<span class="gp">In [7]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="gp">In [8]: </span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;pre_</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

<span class="gp">In [9]: </span><span class="n">df</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">  pre_col1 pre_col2  pre_col3</span>
<span class="go">0        a        b         1</span>
</pre></div>
</div>
</dd>
<dt>mangle_dupe_cols<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code></span></dt><dd><p>Duplicate columns will be specified as â€˜Xâ€™, â€˜X.1â€™â€¦â€™X.Nâ€™, rather than â€˜Xâ€™â€¦â€™Xâ€™.
Passing in <code class="docutils literal notranslate"><span class="pre">False</span></code> will cause data to be overwritten if there are duplicate
names in the columns.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.5.0: </span>The argument was never implemented, and a new argument where the
renaming pattern can be specified will be added instead.</p>
</div>
</dd>
</dl>
</section>
<section id="general-parsing-configuration">
<h4>General parsing configuration<a class="headerlink" href="#general-parsing-configuration" title="Permalink to this headline">#</a></h4>
<dl>
<dt>dtype<span class="classifier">Type name or dict of column -&gt; type, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Data type for data or columns. E.g. <code class="docutils literal notranslate"><span class="pre">{'a':</span> <span class="pre">np.float64,</span> <span class="pre">'b':</span> <span class="pre">np.int32,</span> <span class="pre">'c':</span> <span class="pre">'Int64'}</span></code>
Use <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code> together with suitable <code class="docutils literal notranslate"><span class="pre">na_values</span></code> settings to preserve
and not interpret dtype. If converters are specified, they will be applied INSTEAD
of dtype conversion.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0: </span>Support for defaultdict was added. Specify a defaultdict as input where
the default determines the dtype of the columns which are not explicitly
listed.</p>
</div>
</dd>
<dt>engine<span class="classifier">{<code class="docutils literal notranslate"><span class="pre">'c'</span></code>, <code class="docutils literal notranslate"><span class="pre">'python'</span></code>, <code class="docutils literal notranslate"><span class="pre">'pyarrow'</span></code>}</span></dt><dd><p>Parser engine to use. The C and pyarrow engines are faster, while the python engine
is currently more feature-complete. Multithreading is currently only supported by
the pyarrow engine.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0: </span>The â€œpyarrowâ€ engine was added as an <em>experimental</em> engine, and some features
are unsupported, or may not work correctly, with this engine.</p>
</div>
</dd>
<dt>converters<span class="classifier">dict, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Dict of functions for converting values in certain columns. Keys can either be
integers or column labels.</p>
</dd>
<dt>true_values<span class="classifier">list, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Values to consider as <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt>false_values<span class="classifier">list, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Values to consider as <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt>skipinitialspace<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>Skip spaces after delimiter.</p>
</dd>
<dt>skiprows<span class="classifier">list-like or integer, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Line numbers to skip (0-indexed) or number of lines to skip (int) at the start
of the file.</p>
<p>If callable, the callable function will be evaluated against the row
indices, returning True if the row should be skipped and False otherwise:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;col1,col2,col3</span><span class="se">\n</span><span class="s2">a,b,1</span><span class="se">\n</span><span class="s2">a,b,2</span><span class="se">\n</span><span class="s2">c,d,3&quot;</span>

<span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[11]: </span><span class="go"></span>
<span class="go">  col1 col2  col3</span>
<span class="go">0    a    b     1</span>
<span class="go">1    a    b     2</span>
<span class="go">2    c    d     3</span>

<span class="gp">In [12]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">skiprows</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">  col1 col2  col3</span>
<span class="go">0    a    b     2</span>
</pre></div>
</div>
</dd>
<dt>skipfooter<span class="classifier">int, default <code class="docutils literal notranslate"><span class="pre">0</span></code></span></dt><dd><p>Number of lines at bottom of file to skip (unsupported with engine=â€™câ€™).</p>
</dd>
<dt>nrows<span class="classifier">int, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Number of rows of file to read. Useful for reading pieces of large files.</p>
</dd>
<dt>low_memory<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code></span></dt><dd><p>Internally process the file in chunks, resulting in lower memory use
while parsing, but possibly mixed type inference. To ensure no mixed
types either set <code class="docutils literal notranslate"><span class="pre">False</span></code>, or specify the type with the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> parameter.
Note that the entire file is read into a single <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> regardless,
use the <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> or <code class="docutils literal notranslate"><span class="pre">iterator</span></code> parameter to return the data in chunks.
(Only valid with C parser)</p>
</dd>
<dt>memory_map<span class="classifier">boolean, default False</span></dt><dd><p>If a filepath is provided for <code class="docutils literal notranslate"><span class="pre">filepath_or_buffer</span></code>, map the file object
directly onto memory and access the data directly from there. Using this
option can improve performance because there is no longer any I/O overhead.</p>
</dd>
</dl>
</section>
<section id="na-and-missing-data-handling">
<h4>NA and missing data handling<a class="headerlink" href="#na-and-missing-data-handling" title="Permalink to this headline">#</a></h4>
<dl>
<dt>na_values<span class="classifier">scalar, str, list-like, or dict, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Additional strings to recognize as NA/NaN. If dict passed, specific per-column
NA values. See <a class="reference internal" href="#io-navaluesconst"><span class="std std-ref">na values const</span></a> below
for a list of the values interpreted as NaN by default.</p>
</dd>
<dt>keep_default_na<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code></span></dt><dd><p>Whether or not to include the default NaN values when parsing the data.
Depending on whether <code class="docutils literal notranslate"><span class="pre">na_values</span></code> is passed in, the behavior is as follows:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">keep_default_na</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, and <code class="docutils literal notranslate"><span class="pre">na_values</span></code> are specified, <code class="docutils literal notranslate"><span class="pre">na_values</span></code>
is appended to the default NaN values used for parsing.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">keep_default_na</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, and <code class="docutils literal notranslate"><span class="pre">na_values</span></code> are not specified, only
the default NaN values are used for parsing.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">keep_default_na</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, and <code class="docutils literal notranslate"><span class="pre">na_values</span></code> are specified, only
the NaN values specified <code class="docutils literal notranslate"><span class="pre">na_values</span></code> are used for parsing.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">keep_default_na</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, and <code class="docutils literal notranslate"><span class="pre">na_values</span></code> are not specified, no
strings will be parsed as NaN.</p></li>
</ul>
<p>Note that if <code class="docutils literal notranslate"><span class="pre">na_filter</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">False</span></code>, the <code class="docutils literal notranslate"><span class="pre">keep_default_na</span></code> and
<code class="docutils literal notranslate"><span class="pre">na_values</span></code> parameters will be ignored.</p>
</dd>
<dt>na_filter<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code></span></dt><dd><p>Detect missing value markers (empty strings and the value of na_values). In
data without any NAs, passing <code class="docutils literal notranslate"><span class="pre">na_filter=False</span></code> can improve the performance
of reading a large file.</p>
</dd>
<dt>verbose<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>Indicate number of NA values placed in non-numeric columns.</p>
</dd>
<dt>skip_blank_lines<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code></span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, skip over blank lines rather than interpreting as NaN values.</p>
</dd>
</dl>
</section>
<section id="datetime-handling">
<span id="io-read-csv-table-datetime"></span><h4>Datetime handling<a class="headerlink" href="#datetime-handling" title="Permalink to this headline">#</a></h4>
<dl>
<dt>parse_dates<span class="classifier">boolean or list of ints or names or list of lists or dict, default <code class="docutils literal notranslate"><span class="pre">False</span></code>.</span></dt><dd><ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> -&gt; try parsing the index.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> -&gt; try parsing columns 1, 2, 3 each as a separate date
column.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">[[1,</span> <span class="pre">3]]</span></code> -&gt; combine columns 1 and 3 and parse as a single date
column.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">{'foo':</span> <span class="pre">[1,</span> <span class="pre">3]}</span></code> -&gt; parse columns 1, 3 as date and call result â€˜fooâ€™.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A fast-path exists for iso8601-formatted dates.</p>
</div>
</dd>
<dt>infer_datetime_format<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> and parse_dates is enabled for a column, attempt to infer the
datetime format to speed up the processing.</p>
</dd>
<dt>keep_date_col<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> and parse_dates specifies combining multiple columns then keep the
original columns.</p>
</dd>
<dt>date_parser<span class="classifier">function, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Function to use for converting a sequence of string columns to an array of
datetime instances. The default uses <code class="docutils literal notranslate"><span class="pre">dateutil.parser.parser</span></code> to do the
conversion. pandas will try to call date_parser in three different ways,
advancing to the next if an exception occurs: 1) Pass one or more arrays (as
defined by parse_dates) as arguments; 2) concatenate (row-wise) the string
values from the columns defined by parse_dates into a single array and pass
that; and 3) call date_parser once for each row using one or more strings
(corresponding to the columns defined by parse_dates) as arguments.</p>
</dd>
<dt>dayfirst<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>DD/MM format dates, international and European format.</p>
</dd>
<dt>cache_dates<span class="classifier">boolean, default True</span></dt><dd><p>If True, use a cache of unique, converted dates to apply the datetime
conversion. May produce significant speed-up when parsing duplicate
date strings, especially ones with timezone offsets.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
</dd>
</dl>
</section>
<section id="iteration">
<h4>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">#</a></h4>
<dl>
<dt>iterator<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code></span></dt><dd><p>Return <code class="docutils literal notranslate"><span class="pre">TextFileReader</span></code> object for iteration or getting chunks with
<code class="docutils literal notranslate"><span class="pre">get_chunk()</span></code>.</p>
</dd>
<dt>chunksize<span class="classifier">int, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Return <code class="docutils literal notranslate"><span class="pre">TextFileReader</span></code> object for iteration. See <a class="reference internal" href="#io-chunking"><span class="std std-ref">iterating and chunking</span></a> below.</p>
</dd>
</dl>
</section>
<section id="quoting-compression-and-file-format">
<h4>Quoting, compression, and file format<a class="headerlink" href="#quoting-compression-and-file-format" title="Permalink to this headline">#</a></h4>
<dl>
<dt>compression<span class="classifier">{<code class="docutils literal notranslate"><span class="pre">'infer'</span></code>, <code class="docutils literal notranslate"><span class="pre">'gzip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'bz2'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'xz'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zstd'</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">dict</span></code>}, default <code class="docutils literal notranslate"><span class="pre">'infer'</span></code></span></dt><dd><p>For on-the-fly decompression of on-disk data. If â€˜inferâ€™, then use gzip,
bz2, zip, xz, or zstandard if <code class="docutils literal notranslate"><span class="pre">filepath_or_buffer</span></code> is path-like ending in â€˜.gzâ€™, â€˜.bz2â€™,
â€˜.zipâ€™, â€˜.xzâ€™, â€˜.zstâ€™, respectively, and no decompression otherwise. If using â€˜zipâ€™,
the ZIP file must contain only one data file to be read in.
Set to <code class="docutils literal notranslate"><span class="pre">None</span></code> for no decompression. Can also be a dict with key <code class="docutils literal notranslate"><span class="pre">'method'</span></code>
set to one of {<code class="docutils literal notranslate"><span class="pre">'zip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'gzip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'bz2'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zstd'</span></code>} and other key-value pairs are
forwarded to <code class="docutils literal notranslate"><span class="pre">zipfile.ZipFile</span></code>, <code class="docutils literal notranslate"><span class="pre">gzip.GzipFile</span></code>, <code class="docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code>, or <code class="docutils literal notranslate"><span class="pre">zstandard.ZstdDecompressor</span></code>.
As an example, the following could be passed for faster compression and to
create a reproducible gzip archive:
<code class="docutils literal notranslate"><span class="pre">compression={'method':</span> <span class="pre">'gzip',</span> <span class="pre">'compresslevel':</span> <span class="pre">1,</span> <span class="pre">'mtime':</span> <span class="pre">1}</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1.0: </span>dict option extended to support <code class="docutils literal notranslate"><span class="pre">gzip</span></code> and <code class="docutils literal notranslate"><span class="pre">bz2</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2.0: </span>Previous versions forwarded dict entries for â€˜gzipâ€™ to <code class="docutils literal notranslate"><span class="pre">gzip.open</span></code>.</p>
</div>
</dd>
<dt>thousands<span class="classifier">str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Thousands separator.</p>
</dd>
<dt>decimal<span class="classifier">str, default <code class="docutils literal notranslate"><span class="pre">'.'</span></code></span></dt><dd><p>Character to recognize as decimal point. E.g. use <code class="docutils literal notranslate"><span class="pre">','</span></code> for European data.</p>
</dd>
<dt>float_precision<span class="classifier">string, default None</span></dt><dd><p>Specifies which converter the C engine should use for floating-point values.
The options are <code class="docutils literal notranslate"><span class="pre">None</span></code> for the ordinary converter, <code class="docutils literal notranslate"><span class="pre">high</span></code> for the
high-precision converter, and <code class="docutils literal notranslate"><span class="pre">round_trip</span></code> for the round-trip converter.</p>
</dd>
<dt>lineterminator<span class="classifier">str (length 1), default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Character to break file into lines. Only valid with C parser.</p>
</dd>
<dt>quotechar<span class="classifier">str (length 1)</span></dt><dd><p>The character used to denote the start and end of a quoted item. Quoted items
can include the delimiter and it will be ignored.</p>
</dd>
<dt>quoting<span class="classifier">int or <code class="docutils literal notranslate"><span class="pre">csv.QUOTE_*</span></code> instance, default <code class="docutils literal notranslate"><span class="pre">0</span></code></span></dt><dd><p>Control field quoting behavior per <code class="docutils literal notranslate"><span class="pre">csv.QUOTE_*</span></code> constants. Use one of
<code class="docutils literal notranslate"><span class="pre">QUOTE_MINIMAL</span></code> (0), <code class="docutils literal notranslate"><span class="pre">QUOTE_ALL</span></code> (1), <code class="docutils literal notranslate"><span class="pre">QUOTE_NONNUMERIC</span></code> (2) or
<code class="docutils literal notranslate"><span class="pre">QUOTE_NONE</span></code> (3).</p>
</dd>
<dt>doublequote<span class="classifier">boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code></span></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> is specified and <code class="docutils literal notranslate"><span class="pre">quoting</span></code> is not <code class="docutils literal notranslate"><span class="pre">QUOTE_NONE</span></code>,
indicate whether or not to interpret two consecutive <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> elements
<strong>inside</strong> a field as a single <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> element.</p>
</dd>
<dt>escapechar<span class="classifier">str (length 1), default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>One-character string used to escape delimiter when quoting is <code class="docutils literal notranslate"><span class="pre">QUOTE_NONE</span></code>.</p>
</dd>
<dt>comment<span class="classifier">str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Indicates remainder of line should not be parsed. If found at the beginning of
a line, the line will be ignored altogether. This parameter must be a single
character. Like empty lines (as long as <code class="docutils literal notranslate"><span class="pre">skip_blank_lines=True</span></code>), fully
commented lines are ignored by the parameter <code class="docutils literal notranslate"><span class="pre">header</span></code> but not by <code class="docutils literal notranslate"><span class="pre">skiprows</span></code>.
For example, if <code class="docutils literal notranslate"><span class="pre">comment='#'</span></code>, parsing â€˜#empty\na,b,c\n1,2,3â€™ with
<code class="docutils literal notranslate"><span class="pre">header=0</span></code> will result in â€˜a,b,câ€™ being treated as the header.</p>
</dd>
<dt>encoding<span class="classifier">str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Encoding to use for UTF when reading/writing (e.g. <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code>). <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/codecs.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/codecs.html#standard-encodings'" tppabs="https://docs.python.org/3/library/codecs.html#standard-encodings">List of
Python standard encodings</a>.</p>
</dd>
<dt>dialect<span class="classifier">str or <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/csv.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/csv.html#csv.Dialect'" tppabs="https://docs.python.org/3/library/csv.html#csv.Dialect" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">csv.Dialect</span></code></a> instance, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>If provided, this parameter will override values (default or not) for the
following parameters: <code class="docutils literal notranslate"><span class="pre">delimiter</span></code>, <code class="docutils literal notranslate"><span class="pre">doublequote</span></code>, <code class="docutils literal notranslate"><span class="pre">escapechar</span></code>,
<code class="docutils literal notranslate"><span class="pre">skipinitialspace</span></code>, <code class="docutils literal notranslate"><span class="pre">quotechar</span></code>, and <code class="docutils literal notranslate"><span class="pre">quoting</span></code>. If it is necessary to
override values, a ParserWarning will be issued. See <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/csv.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/csv.html#csv.Dialect'" tppabs="https://docs.python.org/3/library/csv.html#csv.Dialect" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">csv.Dialect</span></code></a>
documentation for more details.</p>
</dd>
</dl>
</section>
<section id="error-handling">
<h4>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">#</a></h4>
<dl>
<dt>error_bad_lines<span class="classifier">boolean, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>Lines with too many fields (e.g. a csv line with too many commas) will by
default cause an exception to be raised, and no <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> will be
returned. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, then these â€œbad linesâ€ will dropped from the
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> that is returned. See <a class="reference internal" href="#io-bad-lines"><span class="std std-ref">bad lines</span></a>
below.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.3.0: </span>The <code class="docutils literal notranslate"><span class="pre">on_bad_lines</span></code> parameter should be used instead to specify behavior upon
encountering a bad line instead.</p>
</div>
</dd>
<dt>warn_bad_lines<span class="classifier">boolean, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code></span></dt><dd><p>If error_bad_lines is <code class="docutils literal notranslate"><span class="pre">False</span></code>, and warn_bad_lines is <code class="docutils literal notranslate"><span class="pre">True</span></code>, a warning for
each â€œbad lineâ€ will be output.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.3.0: </span>The <code class="docutils literal notranslate"><span class="pre">on_bad_lines</span></code> parameter should be used instead to specify behavior upon
encountering a bad line instead.</p>
</div>
</dd>
<dt>on_bad_lines<span class="classifier">(â€˜errorâ€™, â€˜warnâ€™, â€˜skipâ€™), default â€˜errorâ€™</span></dt><dd><p>Specifies what to do upon encountering a bad line (a line with too many fields).
Allowed values are :</p>
<blockquote>
<div><ul class="simple">
<li><p>â€˜errorâ€™, raise an ParserError when a bad line is encountered.</p></li>
<li><p>â€˜warnâ€™, print a warning when a bad line is encountered and skip that line.</p></li>
<li><p>â€˜skipâ€™, skip bad lines without raising or warning when they are encountered.</p></li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
</dd>
</dl>
</section>
</section>
<section id="specifying-column-data-types">
<span id="io-dtypes"></span><h3>Specifying column data types<a class="headerlink" href="#specifying-column-data-types" title="Permalink to this headline">#</a></h3>
<p>You can indicate the data type for the whole <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> or individual
columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="gp">In [14]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c,d</span><span class="se">\n</span><span class="s2">1,2,3,4</span><span class="se">\n</span><span class="s2">5,6,7,8</span><span class="se">\n</span><span class="s2">9,10,11&quot;</span>

<span class="gp">In [15]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c,d</span>
<span class="go">1,2,3,4</span>
<span class="go">5,6,7,8</span>
<span class="go">9,10,11</span>

<span class="gp">In [16]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [17]: </span><span class="n">df</span>
<span class="gh">Out[17]: </span><span class="go"></span>
<span class="go">   a   b   c    d</span>
<span class="go">0  1   2   3    4</span>
<span class="go">1  5   6   7    8</span>
<span class="go">2  9  10  11  NaN</span>

<span class="gp">In [18]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[18]: </span><span class="go">&#39;1&#39;</span>

<span class="gp">In [19]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="s2">&quot;Int64&quot;</span><span class="p">})</span>

<span class="gp">In [20]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[20]: </span><span class="go"></span>
<span class="go">a      int64</span>
<span class="go">b     object</span>
<span class="go">c    float64</span>
<span class="go">d      Int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Fortunately, pandas offers more than one way to ensure that your column(s)
contain only one <code class="docutils literal notranslate"><span class="pre">dtype</span></code>. If youâ€™re unfamiliar with these concepts, you can
see <a class="reference internal" href="basics.html#basics-dtypes" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#basics-dtypes"><span class="std std-ref">here</span></a> to learn more about dtypes, and
<a class="reference internal" href="basics.html#basics-object-conversion" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#basics-object-conversion"><span class="std std-ref">here</span></a> to learn more about <code class="docutils literal notranslate"><span class="pre">object</span></code> conversion in
pandas.</p>
<p>For instance, you can use the <code class="docutils literal notranslate"><span class="pre">converters</span></code> argument
of <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;col_1</span><span class="se">\n</span><span class="s2">1</span><span class="se">\n</span><span class="s2">2</span><span class="se">\n</span><span class="s2">&#39;A&#39;</span><span class="se">\n</span><span class="s2">4.22&quot;</span>

<span class="gp">In [22]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;col_1&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>

<span class="gp">In [23]: </span><span class="n">df</span>
<span class="gh">Out[23]: </span><span class="go"></span>
<span class="go">  col_1</span>
<span class="go">0     1</span>
<span class="go">1     2</span>
<span class="go">2   &#39;A&#39;</span>
<span class="go">3  4.22</span>

<span class="gp">In [24]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;col_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[24]: </span><span class="go"></span>
<span class="go">&lt;class &#39;str&#39;&gt;    4</span>
<span class="go">Name: col_1, dtype: int64</span>
</pre></div>
</div>
<p>Or you can use the <a class="reference internal" href="pandas.to_numeric.html#pandas.to_numeric" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> function to coerce the
dtypes after reading in the data,</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="gp">In [26]: </span><span class="n">df2</span><span class="p">[</span><span class="s2">&quot;col_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s2">&quot;col_1&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;coerce&quot;</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="n">df2</span>
<span class="gh">Out[27]: </span><span class="go"></span>
<span class="go">   col_1</span>
<span class="go">0   1.00</span>
<span class="go">1   2.00</span>
<span class="go">2    NaN</span>
<span class="go">3   4.22</span>

<span class="gp">In [28]: </span><span class="n">df2</span><span class="p">[</span><span class="s2">&quot;col_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[28]: </span><span class="go"></span>
<span class="go">&lt;class &#39;float&#39;&gt;    4</span>
<span class="go">Name: col_1, dtype: int64</span>
</pre></div>
</div>
<p>which will convert all valid parsing to floats, leaving the invalid parsing
as <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<p>Ultimately, how you deal with reading in columns containing mixed dtypes
depends on your specific needs. In the case above, if you wanted to <code class="docutils literal notranslate"><span class="pre">NaN</span></code> out
the data anomalies, then <a class="reference internal" href="pandas.to_numeric.html#pandas.to_numeric" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> is probably your best option.
However, if you wanted for all the data to be coerced, no matter the type, then
using the <code class="docutils literal notranslate"><span class="pre">converters</span></code> argument of <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> would certainly be
worth trying.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases, reading in abnormal data with columns containing mixed dtypes
will result in an inconsistent dataset. If you rely on pandas to infer the
dtypes of your columns, the parsing engine will go and infer the dtypes for
different chunks of the data, rather than the whole dataset at once. Consequently,
you can end up with column(s) with mixed dtypes. For example,</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">col_1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">500000</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">500000</span><span class="p">))</span>

<span class="gp">In [30]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;col_1&quot;</span><span class="p">:</span> <span class="n">col_1</span><span class="p">})</span>

<span class="gp">In [31]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">)</span>

<span class="gp">In [32]: </span><span class="n">mixed_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">)</span>

<span class="gp">In [33]: </span><span class="n">mixed_df</span><span class="p">[</span><span class="s2">&quot;col_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[33]: </span><span class="go"></span>
<span class="go">&lt;class &#39;int&#39;&gt;    737858</span>
<span class="go">&lt;class &#39;str&#39;&gt;    262144</span>
<span class="go">Name: col_1, dtype: int64</span>

<span class="gp">In [34]: </span><span class="n">mixed_df</span><span class="p">[</span><span class="s2">&quot;col_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[34]: </span><span class="go">dtype(&#39;O&#39;)</span>
</pre></div>
</div>
<p>will result with <code class="docutils literal notranslate"><span class="pre">mixed_df</span></code> containing an <code class="docutils literal notranslate"><span class="pre">int</span></code> dtype for certain chunks
of the column, and <code class="docutils literal notranslate"><span class="pre">str</span></code> for others due to the mixed dtypes from the
data that was read in. It is important to note that the overall column will be
marked with a <code class="docutils literal notranslate"><span class="pre">dtype</span></code> of <code class="docutils literal notranslate"><span class="pre">object</span></code>, which is used for columns with mixed dtypes.</p>
</div>
</section>
<section id="specifying-categorical-dtype">
<span id="io-categorical"></span><h3>Specifying categorical dtype<a class="headerlink" href="#specifying-categorical-dtype" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code> columns can be parsed directly by specifying <code class="docutils literal notranslate"><span class="pre">dtype='category'</span></code> or
<code class="docutils literal notranslate"><span class="pre">dtype=CategoricalDtype(categories,</span> <span class="pre">ordered)</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;col1,col2,col3</span><span class="se">\n</span><span class="s2">a,b,1</span><span class="se">\n</span><span class="s2">a,b,2</span><span class="se">\n</span><span class="s2">c,d,3&quot;</span>

<span class="gp">In [36]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[36]: </span><span class="go"></span>
<span class="go">  col1 col2  col3</span>
<span class="go">0    a    b     1</span>
<span class="go">1    a    b     2</span>
<span class="go">2    c    d     3</span>

<span class="gp">In [37]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[37]: </span><span class="go"></span>
<span class="go">col1    object</span>
<span class="go">col2    object</span>
<span class="go">col3     int64</span>
<span class="go">dtype: object</span>

<span class="gp">In [38]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;category&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[38]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2    category</span>
<span class="go">col3    category</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Individual columns can be parsed as a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> using a dict
specification:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [39]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[39]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2      object</span>
<span class="go">col3       int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Specifying <code class="docutils literal notranslate"><span class="pre">dtype='category'</span></code> will result in an unordered <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>
whose <code class="docutils literal notranslate"><span class="pre">categories</span></code> are the unique values observed in the data. For more
control on the categories and order, create a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> ahead of time, and pass that for
that columnâ€™s <code class="docutils literal notranslate"><span class="pre">dtype</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="kn">from</span> <span class="nn">pandas.api.types</span> <span class="kn">import</span> <span class="n">CategoricalDtype</span>

<span class="gp">In [41]: </span><span class="n">dtype</span> <span class="o">=</span> <span class="n">CategoricalDtype</span><span class="p">([</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [42]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="n">dtype</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[42]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2      object</span>
<span class="go">col3       int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">dtype=CategoricalDtype</span></code>, â€œunexpectedâ€ values outside of
<code class="docutils literal notranslate"><span class="pre">dtype.categories</span></code> are treated as missing values.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">dtype</span> <span class="o">=</span> <span class="n">CategoricalDtype</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">])</span>  <span class="c1"># No &#39;c&#39;</span>

<span class="gp">In [44]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="n">dtype</span><span class="p">})</span><span class="o">.</span><span class="n">col1</span>
<span class="gh">Out[44]: </span><span class="go"></span>
<span class="go">0      a</span>
<span class="go">1      a</span>
<span class="go">2    NaN</span>
<span class="go">Name: col1, dtype: category</span>
<span class="go">Categories (3, object): [&#39;a&#39;, &#39;b&#39;, &#39;d&#39;]</span>
</pre></div>
</div>
<p>This matches the behavior of <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.set_categories()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With <code class="docutils literal notranslate"><span class="pre">dtype='category'</span></code>, the resulting categories will always be parsed
as strings (object dtype). If the categories are numeric they can be
converted using the <a class="reference internal" href="pandas.to_numeric.html#pandas.to_numeric" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> function, or as appropriate, another
converter such as <a class="reference internal" href="pandas.to_datetime.html#pandas.to_datetime" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is a <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> with homogeneous <code class="docutils literal notranslate"><span class="pre">categories</span></code> (
all numeric, all datetimes, etc.), the conversion is done automatically.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>

<span class="gp">In [46]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[46]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2    category</span>
<span class="go">col3    category</span>
<span class="go">dtype: object</span>

<span class="gp">In [47]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">]</span>
<span class="gh">Out[47]: </span><span class="go"></span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: col3, dtype: category</span>
<span class="go">Categories (3, object): [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]</span>

<span class="gp">In [48]: </span><span class="n">new_categories</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>

<span class="gp">In [49]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">rename_categories</span><span class="p">(</span><span class="n">new_categories</span><span class="p">)</span>

<span class="gp">In [50]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">]</span>
<span class="gh">Out[50]: </span><span class="go"></span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: col3, dtype: category</span>
<span class="go">Categories (3, int64): [1, 2, 3]</span>
</pre></div>
</div>
</div>
</section>
<section id="naming-and-using-columns">
<h3>Naming and using columns<a class="headerlink" href="#naming-and-using-columns" title="Permalink to this headline">#</a></h3>
<section id="handling-column-names">
<span id="io-headers"></span><h4>Handling column names<a class="headerlink" href="#handling-column-names" title="Permalink to this headline">#</a></h4>
<p>A file may or may not have a header row. pandas assumes the first row should be
used as the column names:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">1,2,3</span><span class="se">\n</span><span class="s2">4,5,6</span><span class="se">\n</span><span class="s2">7,8,9&quot;</span>

<span class="gp">In [52]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [53]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[53]: </span><span class="go"></span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>
</pre></div>
</div>
<p>By specifying the <code class="docutils literal notranslate"><span class="pre">names</span></code> argument in conjunction with <code class="docutils literal notranslate"><span class="pre">header</span></code> you can
indicate other names to use and whether or not to throw away the header row (if
any):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [55]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[55]: </span><span class="go"></span>
<span class="go">   foo  bar  baz</span>
<span class="go">0    1    2    3</span>
<span class="go">1    4    5    6</span>
<span class="go">2    7    8    9</span>

<span class="gp">In [56]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gh">Out[56]: </span><span class="go"></span>
<span class="go">  foo bar baz</span>
<span class="go">0   a   b   c</span>
<span class="go">1   1   2   3</span>
<span class="go">2   4   5   6</span>
<span class="go">3   7   8   9</span>
</pre></div>
</div>
<p>If the header is in a row other than the first, pass the row number to
<code class="docutils literal notranslate"><span class="pre">header</span></code>. This will skip the preceding rows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;skip this skip it</span><span class="se">\n</span><span class="s2">a,b,c</span><span class="se">\n</span><span class="s2">1,2,3</span><span class="se">\n</span><span class="s2">4,5,6</span><span class="se">\n</span><span class="s2">7,8,9&quot;</span>

<span class="gp">In [58]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[58]: </span><span class="go"></span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Default behavior is to infer the column names: if no names are
passed the behavior is identical to <code class="docutils literal notranslate"><span class="pre">header=0</span></code> and column names
are inferred from the first non-blank line of the file, if column
names are passed explicitly then the behavior is identical to
<code class="docutils literal notranslate"><span class="pre">header=None</span></code>.</p>
</div>
</section>
</section>
<section id="duplicate-names-parsing">
<span id="io-dupe-names"></span><h3>Duplicate names parsing<a class="headerlink" href="#duplicate-names-parsing" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.5.0: </span><code class="docutils literal notranslate"><span class="pre">mangle_dupe_cols</span></code> was never implemented, and a new argument where the
renaming pattern can be specified will be added instead.</p>
</div>
</div></blockquote>
<p>If the file or header contains duplicate names, pandas will by default
distinguish between them so as to prevent overwriting data:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,a</span><span class="se">\n</span><span class="s2">0,1,2</span><span class="se">\n</span><span class="s2">3,4,5&quot;</span>

<span class="gp">In [60]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[60]: </span><span class="go"></span>
<span class="go">   a  b  a.1</span>
<span class="go">0  0  1    2</span>
<span class="go">1  3  4    5</span>
</pre></div>
</div>
<p>There is no more duplicate data because <code class="docutils literal notranslate"><span class="pre">mangle_dupe_cols=True</span></code> by default,
which modifies a series of duplicate columns â€˜Xâ€™, â€¦, â€˜Xâ€™ to become
â€˜Xâ€™, â€˜X.1â€™, â€¦, â€˜X.Nâ€™.</p>
<section id="filtering-columns-usecols">
<span id="io-usecols"></span><h4>Filtering columns (<code class="docutils literal notranslate"><span class="pre">usecols</span></code>)<a class="headerlink" href="#filtering-columns-usecols" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">usecols</span></code> argument allows you to select any subset of the columns in a
file, either using the column names, position numbers or a callable:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [61]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c,d</span><span class="se">\n</span><span class="s2">1,2,3,foo</span><span class="se">\n</span><span class="s2">4,5,6,bar</span><span class="se">\n</span><span class="s2">7,8,9,baz&quot;</span>

<span class="gp">In [62]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[62]: </span><span class="go"></span>
<span class="go">   a  b  c    d</span>
<span class="go">0  1  2  3  foo</span>
<span class="go">1  4  5  6  bar</span>
<span class="go">2  7  8  9  baz</span>

<span class="gp">In [63]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">])</span>
<span class="gh">Out[63]: </span><span class="go"></span>
<span class="go">   b    d</span>
<span class="go">0  2  foo</span>
<span class="go">1  5  bar</span>
<span class="go">2  8  baz</span>

<span class="gp">In [64]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gh">Out[64]: </span><span class="go"></span>
<span class="go">   a  c    d</span>
<span class="go">0  1  3  foo</span>
<span class="go">1  4  6  bar</span>
<span class="go">2  7  9  baz</span>

<span class="gp">In [65]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>
<span class="gh">Out[65]: </span><span class="go"></span>
<span class="go">   a  c</span>
<span class="go">0  1  3</span>
<span class="go">1  4  6</span>
<span class="go">2  7  9</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">usecols</span></code> argument can also be used to specify which columns not to
use in the final result:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="gh">Out[66]: </span><span class="go"></span>
<span class="go">   b    d</span>
<span class="go">0  2  foo</span>
<span class="go">1  5  bar</span>
<span class="go">2  8  baz</span>
</pre></div>
</div>
<p>In this case, the callable is specifying that we exclude the â€œaâ€ and â€œcâ€
columns from the output.</p>
</section>
</section>
<section id="comments-and-empty-lines">
<h3>Comments and empty lines<a class="headerlink" href="#comments-and-empty-lines" title="Permalink to this headline">#</a></h3>
<section id="ignoring-line-comments-and-empty-lines">
<span id="io-skiplines"></span><h4>Ignoring line comments and empty lines<a class="headerlink" href="#ignoring-line-comments-and-empty-lines" title="Permalink to this headline">#</a></h4>
<p>If the <code class="docutils literal notranslate"><span class="pre">comment</span></code> parameter is specified, then completely commented lines will
be ignored. By default, completely blank lines will be ignored as well.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [67]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">a,b,c</span><span class="se">\n</span><span class="s2">  </span><span class="se">\n</span><span class="s2"># commented line</span><span class="se">\n</span><span class="s2">1,2,3</span><span class="se">\n\n</span><span class="s2">4,5,6&quot;</span>

<span class="gp">In [68]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="go">a,b,c</span>
<span class="go">  </span>
<span class="go"># commented line</span>
<span class="go">1,2,3</span>

<span class="go">4,5,6</span>

<span class="gp">In [69]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
<span class="gh">Out[69]: </span><span class="go"></span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">skip_blank_lines=False</span></code>, then <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> will not ignore blank lines:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [70]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n\n</span><span class="s2">1,2,3</span><span class="se">\n\n\n</span><span class="s2">4,5,6&quot;</span>

<span class="gp">In [71]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">skip_blank_lines</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[71]: </span><span class="go"></span>
<span class="go">     a    b    c</span>
<span class="go">0  NaN  NaN  NaN</span>
<span class="go">1  1.0  2.0  3.0</span>
<span class="go">2  NaN  NaN  NaN</span>
<span class="go">3  NaN  NaN  NaN</span>
<span class="go">4  4.0  5.0  6.0</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The presence of ignored lines might create ambiguities involving line numbers;
the parameter <code class="docutils literal notranslate"><span class="pre">header</span></code> uses row numbers (ignoring commented/empty
lines), while <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> uses line numbers (including commented/empty lines):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [72]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;#comment</span><span class="se">\n</span><span class="s2">a,b,c</span><span class="se">\n</span><span class="s2">A,B,C</span><span class="se">\n</span><span class="s2">1,2,3&quot;</span>

<span class="gp">In [73]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[73]: </span><span class="go"></span>
<span class="go">   A  B  C</span>
<span class="go">0  1  2  3</span>

<span class="gp">In [74]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;A,B,C</span><span class="se">\n</span><span class="s2">#comment</span><span class="se">\n</span><span class="s2">a,b,c</span><span class="se">\n</span><span class="s2">1,2,3&quot;</span>

<span class="gp">In [75]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[75]: </span><span class="go"></span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
</pre></div>
</div>
<p>If both <code class="docutils literal notranslate"><span class="pre">header</span></code> and <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> are specified, <code class="docutils literal notranslate"><span class="pre">header</span></code> will be
relative to the end of <code class="docutils literal notranslate"><span class="pre">skiprows</span></code>. For example:</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;# empty</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;# second empty line</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;# third emptyline</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;X,Y,Z</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;1,2,3</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;A,B,C</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;1,2.,4.</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;5.,NaN,10.0</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [77]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go"># empty</span>
<span class="go"># second empty line</span>
<span class="go"># third emptyline</span>
<span class="go">X,Y,Z</span>
<span class="go">1,2,3</span>
<span class="go">A,B,C</span>
<span class="go">1,2.,4.</span>
<span class="go">5.,NaN,10.0</span>


<span class="gp">In [78]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[78]: </span><span class="go"></span>
<span class="go">     A    B     C</span>
<span class="go">0  1.0  2.0   4.0</span>
<span class="go">1  5.0  NaN  10.0</span>
</pre></div>
</div>
</section>
<section id="comments">
<span id="io-comments"></span><h4>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">#</a></h4>
<p>Sometimes comments or meta data may be included in a file:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="nb">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID,level,category</span>
<span class="go">Patient1,123000,x # really unpleasant</span>
<span class="go">Patient2,23000,y # wouldn&#39;t take his medicine</span>
<span class="go">Patient3,1234018,z # awesome</span>
</pre></div>
</div>
<p>By default, the parser includes the comments in the output:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">)</span>

<span class="gp">In [81]: </span><span class="n">df</span>
<span class="gh">Out[81]: </span><span class="go"></span>
<span class="go">         ID    level                        category</span>
<span class="go">0  Patient1   123000           x # really unpleasant</span>
<span class="go">1  Patient2    23000  y # wouldn&#39;t take his medicine</span>
<span class="go">2  Patient3  1234018                     z # awesome</span>
</pre></div>
</div>
<p>We can suppress the comments using the <code class="docutils literal notranslate"><span class="pre">comment</span></code> keyword:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>

<span class="gp">In [83]: </span><span class="n">df</span>
<span class="gh">Out[83]: </span><span class="go"></span>
<span class="go">         ID    level category</span>
<span class="go">0  Patient1   123000       x </span>
<span class="go">1  Patient2    23000       y </span>
<span class="go">2  Patient3  1234018       z </span>
</pre></div>
</div>
</section>
</section>
<section id="dealing-with-unicode-data">
<span id="io-unicode"></span><h3>Dealing with Unicode data<a class="headerlink" href="#dealing-with-unicode-data" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">encoding</span></code> argument should be used for encoded unicode data, which will
result in byte strings being decoded to unicode in the result:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

<span class="gp">In [85]: </span><span class="n">data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;word,length</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="sa">b</span><span class="s2">&quot;Tr</span><span class="se">\xc3\xa4</span><span class="s2">umen,7</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="sa">b</span><span class="s2">&quot;Gr</span><span class="se">\xc3\xbc\xc3\x9f</span><span class="s2">e,5&quot;</span>

<span class="gp">In [86]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;latin-1&quot;</span><span class="p">)</span>

<span class="gp">In [87]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;latin-1&quot;</span><span class="p">)</span>

<span class="gp">In [88]: </span><span class="n">df</span>
<span class="gh">Out[88]: </span><span class="go"></span>
<span class="go">      word  length</span>
<span class="go">0  TrÃ¤umen       7</span>
<span class="go">1    GrÃ¼ÃŸe       5</span>

<span class="gp">In [89]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[89]: </span><span class="go">&#39;GrÃ¼ÃŸe&#39;</span>
</pre></div>
</div>
<p>Some formats which encode all characters as multiple bytes, like UTF-16, wonâ€™t
parse correctly at all without specifying the encoding. <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/codecs.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/codecs.html#standard-encodings'" tppabs="https://docs.python.org/3/library/codecs.html#standard-encodings">Full list of Python
standard encodings</a>.</p>
</section>
<section id="index-columns-and-trailing-delimiters">
<span id="io-index-col"></span><h3>Index columns and trailing delimiters<a class="headerlink" href="#index-columns-and-trailing-delimiters" title="Permalink to this headline">#</a></h3>
<p>If a file has one more column of data than the number of column names, the
first column will be used as the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>â€™s row names:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [90]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">4,apple,bat,5.7</span><span class="se">\n</span><span class="s2">8,orange,cow,10&quot;</span>

<span class="gp">In [91]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[91]: </span><span class="go"></span>
<span class="go">        a    b     c</span>
<span class="go">4   apple  bat   5.7</span>
<span class="go">8  orange  cow  10.0</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [92]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;index,a,b,c</span><span class="se">\n</span><span class="s2">4,apple,bat,5.7</span><span class="se">\n</span><span class="s2">8,orange,cow,10&quot;</span>

<span class="gp">In [93]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[93]: </span><span class="go"></span>
<span class="go">            a    b     c</span>
<span class="go">index                   </span>
<span class="go">4       apple  bat   5.7</span>
<span class="go">8      orange  cow  10.0</span>
</pre></div>
</div>
<p>Ordinarily, you can achieve this behavior using the <code class="docutils literal notranslate"><span class="pre">index_col</span></code> option.</p>
<p>There are some exception cases when a file has been prepared with delimiters at
the end of each data line, confusing the parser. To explicitly disable the
index column inference and discard the last column, pass <code class="docutils literal notranslate"><span class="pre">index_col=False</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [94]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">4,apple,bat,</span><span class="se">\n</span><span class="s2">8,orange,cow,&quot;</span>

<span class="gp">In [95]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">4,apple,bat,</span>
<span class="go">8,orange,cow,</span>

<span class="gp">In [96]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[96]: </span><span class="go"></span>
<span class="go">        a    b   c</span>
<span class="go">4   apple  bat NaN</span>
<span class="go">8  orange  cow NaN</span>

<span class="gp">In [97]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[97]: </span><span class="go"></span>
<span class="go">   a       b    c</span>
<span class="go">0  4   apple  bat</span>
<span class="go">1  8  orange  cow</span>
</pre></div>
</div>
<p>If a subset of data is being parsed using the <code class="docutils literal notranslate"><span class="pre">usecols</span></code> option, the
<code class="docutils literal notranslate"><span class="pre">index_col</span></code> specification is based on that subset, not the original data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [98]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">4,apple,bat,</span><span class="se">\n</span><span class="s2">8,orange,cow,&quot;</span>

<span class="gp">In [99]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">4,apple,bat,</span>
<span class="go">8,orange,cow,</span>

<span class="gp">In [100]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="gh">Out[100]: </span><span class="go"></span>
<span class="go">     b   c</span>
<span class="go">4  bat NaN</span>
<span class="go">8  cow NaN</span>

<span class="gp">In [101]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[101]: </span><span class="go"></span>
<span class="go">     b   c</span>
<span class="go">4  bat NaN</span>
<span class="go">8  cow NaN</span>
</pre></div>
</div>
</section>
<section id="date-handling">
<span id="io-parse-dates"></span><h3>Date Handling<a class="headerlink" href="#date-handling" title="Permalink to this headline">#</a></h3>
<section id="specifying-date-columns">
<h4>Specifying date columns<a class="headerlink" href="#specifying-date-columns" title="Permalink to this headline">#</a></h4>
<p>To better facilitate working with datetime data, <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>
uses the keyword arguments <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> and <code class="docutils literal notranslate"><span class="pre">date_parser</span></code>
to allow users to specify a variety of columns and date/time formats to turn the
input text data into <code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects.</p>
<p>The simplest case is to just pass in <code class="docutils literal notranslate"><span class="pre">parse_dates=True</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [102]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;date,A,B,C</span><span class="se">\n</span><span class="s2">20090101,a,1,2</span><span class="se">\n</span><span class="s2">20090102,b,3,4</span><span class="se">\n</span><span class="s2">20090103,c,4,5&quot;</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="go"># Use a column as an index, and parse it as dates.</span>
<span class="gp">In [103]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [104]: </span><span class="n">df</span>
<span class="gh">Out[104]: </span><span class="go"></span>
<span class="go">            A  B  C</span>
<span class="go">date               </span>
<span class="go">2009-01-01  a  1  2</span>
<span class="go">2009-01-02  b  3  4</span>
<span class="go">2009-01-03  c  4  5</span>

<span class="go"># These are Python datetime objects</span>
<span class="gp">In [105]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[105]: </span><span class="go">DatetimeIndex([&#39;2009-01-01&#39;, &#39;2009-01-02&#39;, &#39;2009-01-03&#39;], dtype=&#39;datetime64[ns]&#39;, name=&#39;date&#39;, freq=None)</span>
</pre></div>
</div>
<p>It is often the case that we may want to store date and time data separately,
or store various date fields separately. the <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> keyword can be
used to specify a combination of columns to parse the dates and/or times from.</p>
<p>You can specify a list of column lists to <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code>, the resulting date
columns will be prepended to the output (so as to not affect the existing column
order) and the new column names will be the concatenation of the component
column names:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [106]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;KORD,19990127, 19:00:00, 18:56:00, 0.8100</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;KORD,19990127, 20:00:00, 19:56:00, 0.0100</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;KORD,19990127, 21:00:00, 20:56:00, -0.5900</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;KORD,19990127, 21:00:00, 21:18:00, -0.9900</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;KORD,19990127, 22:00:00, 21:56:00, -0.5900</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;KORD,19990127, 23:00:00, 22:56:00, -0.5900&quot;</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [107]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [108]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>

<span class="gp">In [109]: </span><span class="n">df</span>
<span class="gh">Out[109]: </span><span class="go"></span>
<span class="go">                  1_2                 1_3     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>By default the parser removes the component date columns, but you can choose
to retain them via the <code class="docutils literal notranslate"><span class="pre">keep_date_col</span></code> keyword:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [110]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">keep_date_col</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [111]: </span><span class="n">df</span>
<span class="gh">Out[111]: </span><span class="go"></span>
<span class="go">                  1_2                 1_3     0  ...          2          3     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  ...   19:00:00   18:56:00  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  ...   20:00:00   19:56:00  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD  ...   21:00:00   20:56:00 -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD  ...   21:00:00   21:18:00 -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD  ...   22:00:00   21:56:00 -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD  ...   23:00:00   22:56:00 -0.59</span>

<span class="go">[6 rows x 7 columns]</span>
</pre></div>
</div>
<p>Note that if you wish to combine multiple columns into a single date column, a
nested list must be used. In other words, <code class="docutils literal notranslate"><span class="pre">parse_dates=[1,</span> <span class="pre">2]</span></code> indicates that
the second and third columns should each be parsed as separate date columns
while <code class="docutils literal notranslate"><span class="pre">parse_dates=[[1,</span> <span class="pre">2]]</span></code> means the two columns should be parsed into a
single column.</p>
<p>You can also use a dict to specify custom name columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [112]: </span><span class="n">date_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nominal&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;actual&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [113]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">)</span>

<span class="gp">In [114]: </span><span class="n">df</span>
<span class="gh">Out[114]: </span><span class="go"></span>
<span class="go">              nominal              actual     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>It is important to remember that if multiple text columns are to be parsed into
a single date column, then a new column is prepended to the data. The <code class="docutils literal notranslate"><span class="pre">index_col</span></code>
specification is based off of this new set of columns rather than the original
data columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [115]: </span><span class="n">date_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nominal&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;actual&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [116]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span>
<span class="gp">   .....: </span><span class="p">)</span>  <span class="c1"># index is the nominal column</span>
<span class="gp">   .....: </span>

<span class="gp">In [117]: </span><span class="n">df</span>
<span class="gh">Out[117]: </span><span class="go"></span>
<span class="go">                                 actual     0     4</span>
<span class="go">nominal                                            </span>
<span class="go">1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a column or index contains an unparsable date, the entire column or
index will be returned unaltered as an object data type. For non-standard
datetime parsing, use <a class="reference internal" href="pandas.to_datetime.html#pandas.to_datetime" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> after <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>read_csv has a fast_path for parsing datetime strings in iso8601 format,
e.g â€œ2000-01-01T00:01:02+00:00â€ and similar variations. If you can arrange
for your data to store datetimes in this format, load times will be
significantly faster, ~20x has been observed.</p>
</div>
</section>
<section id="date-parsing-functions">
<h4>Date parsing functions<a class="headerlink" href="#date-parsing-functions" title="Permalink to this headline">#</a></h4>
<p>Finally, the parser allows you to specify a custom <code class="docutils literal notranslate"><span class="pre">date_parser</span></code> function to
take full advantage of the flexibility of the date parsing API:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [118]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">,</span> <span class="n">date_parser</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [119]: </span><span class="n">df</span>
<span class="gh">Out[119]: </span><span class="go"></span>
<span class="go">              nominal              actual     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>pandas will try to call the <code class="docutils literal notranslate"><span class="pre">date_parser</span></code> function in three different ways. If
an exception is raised, the next one is tried:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">date_parser</span></code> is first called with one or more arrays as arguments,
as defined using <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">date_parser(['2013',</span> <span class="pre">'2013'],</span> <span class="pre">['1',</span> <span class="pre">'2'])</span></code>).</p></li>
<li><p>If #1 fails, <code class="docutils literal notranslate"><span class="pre">date_parser</span></code> is called with all the columns
concatenated row-wise into a single array (e.g., <code class="docutils literal notranslate"><span class="pre">date_parser(['2013</span> <span class="pre">1',</span> <span class="pre">'2013</span> <span class="pre">2'])</span></code>).</p></li>
</ol>
<p>Note that performance-wise, you should try these methods of parsing dates in order:</p>
<ol class="arabic simple">
<li><p>Try to infer the format using <code class="docutils literal notranslate"><span class="pre">infer_datetime_format=True</span></code> (see section below).</p></li>
<li><p>If you know the format, use <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code>:
<code class="docutils literal notranslate"><span class="pre">date_parser=lambda</span> <span class="pre">x:</span> <span class="pre">pd.to_datetime(x,</span> <span class="pre">format=...)</span></code>.</p></li>
<li><p>If you have a really non-standard format, use a custom <code class="docutils literal notranslate"><span class="pre">date_parser</span></code> function.
For optimal performance, this should be vectorized, i.e., it should accept arrays
as arguments.</p></li>
</ol>
</section>
<section id="parsing-a-csv-with-mixed-timezones">
<span id="io-csv-mixed-timezones"></span><h4>Parsing a CSV with mixed timezones<a class="headerlink" href="#parsing-a-csv-with-mixed-timezones" title="Permalink to this headline">#</a></h4>
<p>pandas cannot natively represent a column or index with mixed timezones. If your CSV
file contains columns with a mixture of timezones, the default result will be
an object-dtype column with strings, even with <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [120]: </span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="gp">   .....: </span><span class="s2">a</span>
<span class="gp">   .....: </span><span class="s2">2000-01-01T00:00:00+05:00</span>
<span class="gp">   .....: </span><span class="s2">2000-01-01T00:00:00+06:00&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [121]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>

<span class="gp">In [122]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="gh">Out[122]: </span><span class="go"></span>
<span class="go">0    2000-01-01 00:00:00+05:00</span>
<span class="go">1    2000-01-01 00:00:00+06:00</span>
<span class="go">Name: a, dtype: object</span>
</pre></div>
</div>
<p>To parse the mixed-timezone values as a datetime column, pass a partially-applied
<a class="reference internal" href="pandas.to_datetime.html#pandas.to_datetime" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> as the <code class="docutils literal notranslate"><span class="pre">date_parser</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [123]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">StringIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="n">date_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [124]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="gh">Out[124]: </span><span class="go"></span>
<span class="go">0   1999-12-31 19:00:00+00:00</span>
<span class="go">1   1999-12-31 18:00:00+00:00</span>
<span class="go">Name: a, dtype: datetime64[ns, UTC]</span>
</pre></div>
</div>
</section>
<section id="inferring-datetime-format">
<span id="io-dayfirst"></span><h4>Inferring datetime format<a class="headerlink" href="#inferring-datetime-format" title="Permalink to this headline">#</a></h4>
<p>If you have <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> enabled for some or all of your columns, and your
datetime strings are all formatted the same way, you may get a large speed
up by setting <code class="docutils literal notranslate"><span class="pre">infer_datetime_format=True</span></code>. If set, pandas will attempt
to guess the format of your datetime strings, and then use a faster means
of parsing the strings. 5-10x parsing speeds have been observed. pandas
will fallback to the usual parsing if either the format cannot be guessed
or the format that was guessed cannot properly parse the entire column
of strings. So in general, <code class="docutils literal notranslate"><span class="pre">infer_datetime_format</span></code> should not have any
negative consequences if enabled.</p>
<p>Here are some examples of datetime strings that can be guessed (All
representing December 30th, 2011 at 00:00:00):</p>
<ul class="simple">
<li><p>â€œ20111230â€</p></li>
<li><p>â€œ2011/12/30â€</p></li>
<li><p>â€œ20111230 00:00:00â€</p></li>
<li><p>â€œ12/30/2011 00:00:00â€</p></li>
<li><p>â€œ30/Dec/2011 00:00:00â€</p></li>
<li><p>â€œ30/December/2011 00:00:00â€</p></li>
</ul>
<p>Note that <code class="docutils literal notranslate"><span class="pre">infer_datetime_format</span></code> is sensitive to <code class="docutils literal notranslate"><span class="pre">dayfirst</span></code>. With
<code class="docutils literal notranslate"><span class="pre">dayfirst=True</span></code>, it will guess â€œ01/12/2011â€ to be December 1st. With
<code class="docutils literal notranslate"><span class="pre">dayfirst=False</span></code> (default) it will guess â€œ01/12/2011â€ to be January 12th.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Try to infer the format for the index column</span>
<span class="gp">In [125]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;foo.csv&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">infer_datetime_format</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [126]: </span><span class="n">df</span>
<span class="gh">Out[126]: </span><span class="go"></span>
<span class="go">            A  B  C</span>
<span class="go">date               </span>
<span class="go">2009-01-01  a  1  2</span>
<span class="go">2009-01-02  b  3  4</span>
<span class="go">2009-01-03  c  4  5</span>
</pre></div>
</div>
</section>
<section id="international-date-formats">
<h4>International date formats<a class="headerlink" href="#international-date-formats" title="Permalink to this headline">#</a></h4>
<p>While US date formats tend to be MM/DD/YYYY, many international formats use
DD/MM/YYYY instead. For convenience, a <code class="docutils literal notranslate"><span class="pre">dayfirst</span></code> keyword is provided:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [127]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;date,value,cat</span><span class="se">\n</span><span class="s2">1/6/2000,5,a</span><span class="se">\n</span><span class="s2">2/6/2000,10,b</span><span class="se">\n</span><span class="s2">3/6/2000,15,c&quot;</span>

<span class="gp">In [128]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">date,value,cat</span>
<span class="go">1/6/2000,5,a</span>
<span class="go">2/6/2000,10,b</span>
<span class="go">3/6/2000,15,c</span>

<span class="gp">In [129]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [130]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[130]: </span><span class="go"></span>
<span class="go">        date  value cat</span>
<span class="go">0 2000-01-06      5   a</span>
<span class="go">1 2000-02-06     10   b</span>
<span class="go">2 2000-03-06     15   c</span>

<span class="gp">In [131]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[131]: </span><span class="go"></span>
<span class="go">        date  value cat</span>
<span class="go">0 2000-06-01      5   a</span>
<span class="go">1 2000-06-02     10   b</span>
<span class="go">2 2000-06-03     15   c</span>
</pre></div>
</div>
</section>
<section id="writing-csvs-to-binary-file-objects">
<h4>Writing CSVs to binary file objects<a class="headerlink" href="#writing-csvs-to-binary-file-objects" title="Permalink to this headline">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">df.to_csv(...,</span> <span class="pre">mode=&quot;wb&quot;)</span></code> allows writing a CSV to a file object
opened binary mode. In most cases, it is not necessary to specify
<code class="docutils literal notranslate"><span class="pre">mode</span></code> as Pandas will auto-detect whether the file object is
opened in text or binary mode.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [132]: </span><span class="kn">import</span> <span class="nn">io</span>

<span class="gp">In [133]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [134]: </span><span class="n">buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>

<span class="gp">In [135]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;gzip&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="specifying-method-for-floating-point-conversion">
<span id="io-float-precision"></span><h3>Specifying method for floating-point conversion<a class="headerlink" href="#specifying-method-for-floating-point-conversion" title="Permalink to this headline">#</a></h3>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">float_precision</span></code> can be specified in order to use
a specific floating-point converter during parsing with the C engine.
The options are the ordinary converter, the high-precision converter, and
the round-trip converter (which is guaranteed to round-trip values after
writing to a file). For example:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [136]: </span><span class="n">val</span> <span class="o">=</span> <span class="s2">&quot;0.3066101993807095471566981359501369297504425048828125&quot;</span>

<span class="gp">In [137]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">1,2,</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="gp">In [138]: </span><span class="nb">abs</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>        <span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="n">float_precision</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="p">)[</span><span class="s2">&quot;c&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[138]: </span><span class="go">5.551115123125783e-17</span>

<span class="gp">In [139]: </span><span class="nb">abs</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   .....: </span>        <span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="n">float_precision</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="p">)[</span><span class="s2">&quot;c&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[139]: </span><span class="go">5.551115123125783e-17</span>

<span class="gp">In [140]: </span><span class="nb">abs</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="n">float_precision</span><span class="o">=</span><span class="s2">&quot;round_trip&quot;</span><span class="p">)[</span><span class="s2">&quot;c&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">   .....: </span>    <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[140]: </span><span class="go">0.0</span>
</pre></div>
</div>
</section>
<section id="thousand-separators">
<span id="io-thousands"></span><h3>Thousand separators<a class="headerlink" href="#thousand-separators" title="Permalink to this headline">#</a></h3>
<p>For large numbers that have been written with a thousands separator, you can
set the <code class="docutils literal notranslate"><span class="pre">thousands</span></code> keyword to a string of length 1 so that integers will be parsed
correctly:</p>
<p>By default, numbers with a thousands separator will be parsed as strings:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [141]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;ID|level|category</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;Patient1|123,000|x</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;Patient2|23,000|y</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;Patient3|1,234,018|z&quot;</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [142]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [143]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>

<span class="gp">In [144]: </span><span class="n">df</span>
<span class="gh">Out[144]: </span><span class="go"></span>
<span class="go">         ID      level category</span>
<span class="go">0  Patient1    123,000        x</span>
<span class="go">1  Patient2     23,000        y</span>
<span class="go">2  Patient3  1,234,018        z</span>

<span class="gp">In [145]: </span><span class="n">df</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[145]: </span><span class="go">dtype(&#39;O&#39;)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">thousands</span></code> keyword allows integers to be parsed correctly:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [146]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">thousands</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>

<span class="gp">In [147]: </span><span class="n">df</span>
<span class="gh">Out[147]: </span><span class="go"></span>
<span class="go">         ID    level category</span>
<span class="go">0  Patient1   123000        x</span>
<span class="go">1  Patient2    23000        y</span>
<span class="go">2  Patient3  1234018        z</span>

<span class="gp">In [148]: </span><span class="n">df</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[148]: </span><span class="go">dtype(&#39;int64&#39;)</span>
</pre></div>
</div>
</section>
<section id="na-values">
<span id="io-na-values"></span><h3>NA values<a class="headerlink" href="#na-values" title="Permalink to this headline">#</a></h3>
<p>To control which values are parsed as missing values (which are signified by
<code class="docutils literal notranslate"><span class="pre">NaN</span></code>), specify a string in <code class="docutils literal notranslate"><span class="pre">na_values</span></code>. If you specify a list of strings,
then all values in it are considered to be missing values. If you specify a
number (a <code class="docutils literal notranslate"><span class="pre">float</span></code>, like <code class="docutils literal notranslate"><span class="pre">5.0</span></code> or an <code class="docutils literal notranslate"><span class="pre">integer</span></code> like <code class="docutils literal notranslate"><span class="pre">5</span></code>), the
corresponding equivalent values will also imply a missing value (in this case
effectively <code class="docutils literal notranslate"><span class="pre">[5.0,</span> <span class="pre">5]</span></code> are recognized as <code class="docutils literal notranslate"><span class="pre">NaN</span></code>).</p>
<p>To completely override the default values that are recognized as missing, specify <code class="docutils literal notranslate"><span class="pre">keep_default_na=False</span></code>.</p>
<p id="io-navaluesconst">The default <code class="docutils literal notranslate"><span class="pre">NaN</span></code> recognized values are <code class="docutils literal notranslate"><span class="pre">['-1.#IND',</span> <span class="pre">'1.#QNAN',</span> <span class="pre">'1.#IND',</span> <span class="pre">'-1.#QNAN',</span> <span class="pre">'#N/A</span> <span class="pre">N/A',</span> <span class="pre">'#N/A',</span> <span class="pre">'N/A',</span>
<span class="pre">'n/a',</span> <span class="pre">'NA',</span> <span class="pre">'&lt;NA&gt;',</span> <span class="pre">'#NA',</span> <span class="pre">'NULL',</span> <span class="pre">'null',</span> <span class="pre">'NaN',</span> <span class="pre">'-NaN',</span> <span class="pre">'nan',</span> <span class="pre">'-nan',</span> <span class="pre">'']</span></code>.</p>
<p>Let us consider some examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;path_to_file.csv&quot;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>In the example above <code class="docutils literal notranslate"><span class="pre">5</span></code> and <code class="docutils literal notranslate"><span class="pre">5.0</span></code> will be recognized as <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, in
addition to the defaults. A string will first be interpreted as a numerical
<code class="docutils literal notranslate"><span class="pre">5</span></code>, then as a <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;path_to_file.csv&quot;</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Above, only an empty field will be recognized as <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;path_to_file.csv&quot;</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Above, both <code class="docutils literal notranslate"><span class="pre">NA</span></code> and <code class="docutils literal notranslate"><span class="pre">0</span></code> as strings are <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;path_to_file.csv&quot;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Nope&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The default values, in addition to the string <code class="docutils literal notranslate"><span class="pre">&quot;Nope&quot;</span></code> are recognized as
<code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
</section>
<section id="infinity">
<span id="io-infinity"></span><h3>Infinity<a class="headerlink" href="#infinity" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">inf</span></code> like values will be parsed as <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> (positive infinity), and <code class="docutils literal notranslate"><span class="pre">-inf</span></code> as <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code> (negative infinity).
These will ignore the case of the value, meaning <code class="docutils literal notranslate"><span class="pre">Inf</span></code>, will also be parsed as <code class="docutils literal notranslate"><span class="pre">np.inf</span></code>.</p>
</section>
<section id="returning-series">
<h3>Returning Series<a class="headerlink" href="#returning-series" title="Permalink to this headline">#</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">squeeze</span></code> keyword, the parser will return output with a single column
as a <code class="docutils literal notranslate"><span class="pre">Series</span></code>:</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4.0: </span>Users should append <code class="docutils literal notranslate"><span class="pre">.squeeze(&quot;columns&quot;)</span></code> to the DataFrame returned by
<code class="docutils literal notranslate"><span class="pre">read_csv</span></code> instead.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [149]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;level</span><span class="se">\n</span><span class="s2">Patient1,123000</span><span class="se">\n</span><span class="s2">Patient2,23000</span><span class="se">\n</span><span class="s2">Patient3,1234018&quot;</span>

<span class="gp">In [150]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [151]: </span><span class="nb">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">level</span>
<span class="go">Patient1,123000</span>
<span class="go">Patient2,23000</span>
<span class="go">Patient3,1234018</span>

<span class="gp">In [152]: </span><span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [153]: </span><span class="n">output</span>
<span class="gh">Out[153]: </span><span class="go"></span>
<span class="go">Patient1     123000</span>
<span class="go">Patient2      23000</span>
<span class="go">Patient3    1234018</span>
<span class="go">Name: level, dtype: int64</span>

<span class="gp">In [154]: </span><span class="nb">type</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="gh">Out[154]: </span><span class="go">pandas.core.series.Series</span>
</pre></div>
</div>
</section>
<section id="boolean-values">
<span id="io-boolean"></span><h3>Boolean values<a class="headerlink" href="#boolean-values" title="Permalink to this headline">#</a></h3>
<p>The common values <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, and <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> are all
recognized as boolean. Occasionally you might want to recognize other values
as being boolean. To do this, use the <code class="docutils literal notranslate"><span class="pre">true_values</span></code> and <code class="docutils literal notranslate"><span class="pre">false_values</span></code>
options as follows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [155]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">1,Yes,2</span><span class="se">\n</span><span class="s2">3,No,4&quot;</span>

<span class="gp">In [156]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,Yes,2</span>
<span class="go">3,No,4</span>

<span class="gp">In [157]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[157]: </span><span class="go"></span>
<span class="go">   a    b  c</span>
<span class="go">0  1  Yes  2</span>
<span class="go">1  3   No  4</span>

<span class="gp">In [158]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">true_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Yes&quot;</span><span class="p">],</span> <span class="n">false_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;No&quot;</span><span class="p">])</span>
<span class="gh">Out[158]: </span><span class="go"></span>
<span class="go">   a      b  c</span>
<span class="go">0  1   True  2</span>
<span class="go">1  3  False  4</span>
</pre></div>
</div>
</section>
<section id="handling-bad-lines">
<span id="io-bad-lines"></span><h3>Handling â€œbadâ€ lines<a class="headerlink" href="#handling-bad-lines" title="Permalink to this headline">#</a></h3>
<p>Some files may have malformed lines with too few fields or too many. Lines with
too few fields will have NA values filled in the trailing fields. Lines with
too many fields will raise an error by default:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [159]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c</span><span class="se">\n</span><span class="s2">1,2,3</span><span class="se">\n</span><span class="s2">4,5,6,7</span><span class="se">\n</span><span class="s2">8,9,10&quot;</span>

<span class="gp">In [160]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ParserError</span><span class="g g-Whitespace">                               </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">160</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="nn">File ~/work/pandas/pandas/pandas/util/_decorators.py:211,</span> in <span class="ni">deprecate_kwarg.&lt;locals&gt;._deprecate_kwarg.&lt;locals&gt;.wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">209</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">210</span>         <span class="n">kwargs</span><span class="p">[</span><span class="n">new_arg_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_arg_value</span>
<span class="ne">--&gt; </span><span class="mi">211</span> <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/util/_decorators.py:331,</span> in <span class="ni">deprecate_nonkeyword_arguments.&lt;locals&gt;.decorate.&lt;locals&gt;.wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">325</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">num_allow_args</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">326</span>     <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">327</span>         <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">_format_argument_list</span><span class="p">(</span><span class="n">allow_args</span><span class="p">)),</span>
<span class="g g-Whitespace">    </span><span class="mi">328</span>         <span class="ne">FutureWarning</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">329</span>         <span class="n">stacklevel</span><span class="o">=</span><span class="n">find_stack_level</span><span class="p">(),</span>
<span class="g g-Whitespace">    </span><span class="mi">330</span>     <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">331</span> <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/io/parsers/readers.py:950,</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, squeeze, prefix, mangle_dupe_cols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, error_bad_lines, warn_bad_lines, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">935</span> <span class="n">kwds_defaults</span> <span class="o">=</span> <span class="n">_refine_defaults_read</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">936</span>     <span class="n">dialect</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">937</span>     <span class="n">delimiter</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">946</span>     <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;delimiter&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">},</span>
<span class="g g-Whitespace">    </span><span class="mi">947</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">948</span> <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">950</span> <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/io/parsers/readers.py:611,</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">608</span>     <span class="k">return</span> <span class="n">parser</span>
<span class="g g-Whitespace">    </span><span class="mi">610</span> <span class="k">with</span> <span class="n">parser</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">611</span>     <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nrows</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/io/parsers/readers.py:1778,</span> in <span class="ni">TextFileReader.read</span><span class="nt">(self, nrows)</span>
<span class="g g-Whitespace">   </span><span class="mi">1771</span> <span class="n">nrows</span> <span class="o">=</span> <span class="n">validate_integer</span><span class="p">(</span><span class="s2">&quot;nrows&quot;</span><span class="p">,</span> <span class="n">nrows</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1772</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1773</span>     <span class="c1"># error: &quot;ParserBase&quot; has no attribute &quot;read&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1774</span>     <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1775</span>         <span class="n">index</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1776</span>         <span class="n">columns</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1777</span>         <span class="n">col_dict</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">1778</span>     <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>  <span class="c1"># type: ignore[attr-defined]</span>
<span class="g g-Whitespace">   </span><span class="mi">1779</span>         <span class="n">nrows</span>
<span class="g g-Whitespace">   </span><span class="mi">1780</span>     <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1781</span> <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1782</span>     <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nn">File ~/work/pandas/pandas/pandas/io/parsers/c_parser_wrapper.py:230,</span> in <span class="ni">CParserWrapper.read</span><span class="nt">(self, nrows)</span>
<span class="g g-Whitespace">    </span><span class="mi">228</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">229</span>     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">low_memory</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">230</span>         <span class="n">chunks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reader</span><span class="o">.</span><span class="n">read_low_memory</span><span class="p">(</span><span class="n">nrows</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">231</span>         <span class="c1"># destructive to chunks</span>
<span class="g g-Whitespace">    </span><span class="mi">232</span>         <span class="n">data</span> <span class="o">=</span> <span class="n">_concatenate_chunks</span><span class="p">(</span><span class="n">chunks</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/_libs/parsers.pyx:808,</span> in <span class="ni">pandas._libs.parsers.TextReader.read_low_memory</span><span class="nt">()</span>

<span class="nn">File ~/work/pandas/pandas/pandas/_libs/parsers.pyx:866,</span> in <span class="ni">pandas._libs.parsers.TextReader._read_rows</span><span class="nt">()</span>

<span class="nn">File ~/work/pandas/pandas/pandas/_libs/parsers.pyx:852,</span> in <span class="ni">pandas._libs.parsers.TextReader._tokenize_rows</span><span class="nt">()</span>

<span class="nn">File ~/work/pandas/pandas/pandas/_libs/parsers.pyx:1973,</span> in <span class="ni">pandas._libs.parsers.raise_parser_error</span><span class="nt">()</span>

<span class="ne">ParserError</span>: Error tokenizing data. C error: Expected 3 fields in line 3, saw 4
</pre></div>
</div>
<p>You can elect to skip bad lines:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">on_bad_lines</span><span class="o">=</span><span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<span class="go">Skipping line 3: expected 3 fields, saw 4</span>

<span class="gh">Out[29]:</span>
<span class="go">   a  b   c</span>
<span class="go">0  1  2   3</span>
<span class="go">1  8  9  10</span>
</pre></div>
</div>
<p>Or pass a callable function to handle the bad line if <code class="docutils literal notranslate"><span class="pre">engine=&quot;python&quot;</span></code>.
The bad line will be a list of strings that was split by the <code class="docutils literal notranslate"><span class="pre">sep</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">external_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="gp">In [30]: </span><span class="k">def</span> <span class="nf">bad_lines_func</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
<span class="go">    ...:     external_list.append(line)</span>
<span class="go">    ...:     return line[-3:]</span>

<span class="gp">In [31]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">on_bad_lines</span><span class="o">=</span><span class="n">bad_lines_func</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">)</span>
<span class="gh">Out[31]:</span>
<span class="go">   a  b   c</span>
<span class="go">0  1  2   3</span>
<span class="go">1  5  6   7</span>
<span class="go">2  8  9  10</span>

<span class="gp">In [32]: </span><span class="n">external_list</span>
<span class="gh">Out[32]: </span><span class="go">[4, 5, 6, 7]</span>

<span class="go">.. versionadded:: 1.4.0</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">usecols</span></code> parameter to eliminate extraneous column
data that appear in some lines but not others:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="go"> Out[33]:</span>
<span class="go">    a  b   c</span>
<span class="go"> 0  1  2   3</span>
<span class="go"> 1  4  5   6</span>
<span class="go"> 2  8  9  10</span>
</pre></div>
</div>
<p>In case you want to keep all data including the lines with too many fields, you can
specify a sufficient number of <code class="docutils literal notranslate"><span class="pre">names</span></code>. This ensures that lines with not enough
fields are filled with <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="gh">Out[34]:</span>
<span class="go">    a  b   c  d</span>
<span class="go"> 0  1  2   3  NaN</span>
<span class="go"> 1  4  5   6  7</span>
<span class="go"> 2  8  9  10  NaN</span>
</pre></div>
</div>
</section>
<section id="dialect">
<span id="io-dialect"></span><h3>Dialect<a class="headerlink" href="#dialect" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">dialect</span></code> keyword gives greater flexibility in specifying the file format.
By default it uses the Excel dialect but you can specify either the dialect name
or a <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/csv.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/csv.html#csv.Dialect'" tppabs="https://docs.python.org/3/library/csv.html#csv.Dialect" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">csv.Dialect</span></code></a> instance.</p>
<p>Suppose you had data with unenclosed quotes:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [161]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;label1,label2,label3</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="s1">&#39;index1,&quot;a,c,e</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="s2">&quot;index2,b,d,f&quot;</span>

<span class="gp">In [162]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">label1,label2,label3</span>
<span class="go">index1,&quot;a,c,e</span>
<span class="go">index2,b,d,f</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> uses the Excel dialect and treats the double quote as
the quote character, which causes it to fail when it finds a newline before it
finds the closing double quote.</p>
<p>We can get around this using <code class="docutils literal notranslate"><span class="pre">dialect</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [163]: </span><span class="kn">import</span> <span class="nn">csv</span>

<span class="gp">In [164]: </span><span class="n">dia</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">excel</span><span class="p">()</span>

<span class="gp">In [165]: </span><span class="n">dia</span><span class="o">.</span><span class="n">quoting</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONE</span>

<span class="gp">In [166]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dia</span><span class="p">)</span>
<span class="gh">Out[166]: </span><span class="go"></span>
<span class="go">       label1 label2 label3</span>
<span class="go">index1     &quot;a      c      e</span>
<span class="go">index2      b      d      f</span>
</pre></div>
</div>
<p>All of the dialect options can be specified separately by keyword arguments:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [167]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a,b,c~1,2,3~4,5,6&quot;</span>

<span class="gp">In [168]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
<span class="gh">Out[168]: </span><span class="go"></span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>Another common dialect option is <code class="docutils literal notranslate"><span class="pre">skipinitialspace</span></code>, to skip any whitespace
after a delimiter:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [169]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a, b, c</span><span class="se">\n</span><span class="s2">1, 2, 3</span><span class="se">\n</span><span class="s2">4, 5, 6&quot;</span>

<span class="gp">In [170]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a, b, c</span>
<span class="go">1, 2, 3</span>
<span class="go">4, 5, 6</span>

<span class="gp">In [171]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">skipinitialspace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[171]: </span><span class="go"></span>
<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>The parsers make every attempt to â€œdo the right thingâ€ and not be fragile. Type
inference is a pretty big deal. If a column can be coerced to integer dtype
without altering the contents, the parser will do so. Any non-numeric
columns will come through as object dtype as with the rest of pandas objects.</p>
</section>
<section id="quoting-and-escape-characters">
<span id="io-quoting"></span><h3>Quoting and Escape Characters<a class="headerlink" href="#quoting-and-escape-characters" title="Permalink to this headline">#</a></h3>
<p>Quotes (and other escape characters) in embedded fields can be handled in any
number of ways. One way is to use backslashes; to properly parse this data, you
should pass the <code class="docutils literal notranslate"><span class="pre">escapechar</span></code> option:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [172]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b</span><span class="se">\n</span><span class="s1">&quot;hello, </span><span class="se">\\</span><span class="s1">&quot;Bob</span><span class="se">\\</span><span class="s1">&quot;, nice to see you&quot;,5&#39;</span>

<span class="gp">In [173]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b</span>
<span class="go">&quot;hello, \&quot;Bob\&quot;, nice to see you&quot;,5</span>

<span class="gp">In [174]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">escapechar</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gh">Out[174]: </span><span class="go"></span>
<span class="go">                               a  b</span>
<span class="go">0  hello, &quot;Bob&quot;, nice to see you  5</span>
</pre></div>
</div>
</section>
<section id="files-with-fixed-width-columns">
<span id="io-fwf"></span><span id="io-fwf-reader"></span><h3>Files with fixed width columns<a class="headerlink" href="#files-with-fixed-width-columns" title="Permalink to this headline">#</a></h3>
<p>While <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> reads delimited data, the <a class="reference internal" href="pandas.read_fwf.html#pandas.read_fwf" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a> function works
with data files that have known and fixed column widths. The function parameters
to <code class="docutils literal notranslate"><span class="pre">read_fwf</span></code> are largely the same as <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> with two extra parameters, and
a different usage of the <code class="docutils literal notranslate"><span class="pre">delimiter</span></code> parameter:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">colspecs</span></code>: A list of pairs (tuples) giving the extents of the
fixed-width fields of each line as half-open intervals (i.e., [from, to[ ).
String value â€˜inferâ€™ can be used to instruct the parser to try detecting
the column specifications from the first 100 rows of the data. Default
behavior, if not specified, is to infer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">widths</span></code>: A list of field widths which can be used instead of â€˜colspecsâ€™
if the intervals are contiguous.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delimiter</span></code>: Characters to consider as filler characters in the fixed-width file.
Can be used to specify the filler character of the fields
if it is not spaces (e.g., â€˜~â€™).</p></li>
</ul>
<p>Consider a typical fixed-width data file:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [175]: </span><span class="n">data1</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;id8141    360.242940   149.910199   11950.7</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;id1594    444.953632   166.985655   11788.4</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;id1849    364.136849   183.628767   11806.2</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;id1230    413.836124   184.375703   11916.8</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;id1948    502.953953   173.237159   12468.3&quot;</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [176]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<p>In order to parse this file into a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, we simply need to supply the
column specifications to the <code class="docutils literal notranslate"><span class="pre">read_fwf</span></code> function along with the file name:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Column specifications are a list of half-intervals</span>
<span class="gp">In [177]: </span><span class="n">colspecs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">43</span><span class="p">)]</span>

<span class="gp">In [178]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">,</span> <span class="n">colspecs</span><span class="o">=</span><span class="n">colspecs</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [179]: </span><span class="n">df</span>
<span class="gh">Out[179]: </span><span class="go"></span>
<span class="go">                 1           2        3</span>
<span class="go">0                                      </span>
<span class="go">id8141  360.242940  149.910199  11950.7</span>
<span class="go">id1594  444.953632  166.985655  11788.4</span>
<span class="go">id1849  364.136849  183.628767  11806.2</span>
<span class="go">id1230  413.836124  184.375703  11916.8</span>
<span class="go">id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p>Note how the parser automatically picks column names X.&lt;column number&gt; when
<code class="docutils literal notranslate"><span class="pre">header=None</span></code> argument is specified. Alternatively, you can supply just the
column widths for contiguous columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Widths are a list of integers</span>
<span class="gp">In [180]: </span><span class="n">widths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="gp">In [181]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">,</span> <span class="n">widths</span><span class="o">=</span><span class="n">widths</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="gp">In [182]: </span><span class="n">df</span>
<span class="gh">Out[182]: </span><span class="go"></span>
<span class="go">        0           1           2        3</span>
<span class="go">0  id8141  360.242940  149.910199  11950.7</span>
<span class="go">1  id1594  444.953632  166.985655  11788.4</span>
<span class="go">2  id1849  364.136849  183.628767  11806.2</span>
<span class="go">3  id1230  413.836124  184.375703  11916.8</span>
<span class="go">4  id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p>The parser will take care of extra white spaces around the columns
so itâ€™s ok to have extra separation between the columns in the file.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">read_fwf</span></code> will try to infer the fileâ€™s <code class="docutils literal notranslate"><span class="pre">colspecs</span></code> by using the
first 100 rows of the file. It can do it only in cases when the columns are
aligned and correctly separated by the provided <code class="docutils literal notranslate"><span class="pre">delimiter</span></code> (default delimiter
is whitespace).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [183]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [184]: </span><span class="n">df</span>
<span class="gh">Out[184]: </span><span class="go"></span>
<span class="go">                 1           2        3</span>
<span class="go">0                                      </span>
<span class="go">id8141  360.242940  149.910199  11950.7</span>
<span class="go">id1594  444.953632  166.985655  11788.4</span>
<span class="go">id1849  364.136849  183.628767  11806.2</span>
<span class="go">id1230  413.836124  184.375703  11916.8</span>
<span class="go">id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">read_fwf</span></code> supports the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> parameter for specifying the types of
parsed columns to be different from the inferred type.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [185]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[185]: </span><span class="go"></span>
<span class="go">1    float64</span>
<span class="go">2    float64</span>
<span class="go">3    float64</span>
<span class="go">dtype: object</span>

<span class="gp">In [186]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[186]: </span><span class="go"></span>
<span class="go">0     object</span>
<span class="go">1    float64</span>
<span class="go">2     object</span>
<span class="go">3    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="indexes">
<h3>Indexes<a class="headerlink" href="#indexes" title="Permalink to this headline">#</a></h3>
<section id="files-with-an-implicit-index-column">
<h4>Files with an â€œimplicitâ€ index column<a class="headerlink" href="#files-with-an-implicit-index-column" title="Permalink to this headline">#</a></h4>
<p>Consider a file with one less entry in the header than the number of data
column:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [187]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;A,B,C</span><span class="se">\n</span><span class="s2">20090101,a,1,2</span><span class="se">\n</span><span class="s2">20090102,b,3,4</span><span class="se">\n</span><span class="s2">20090103,c,4,5&quot;</span>

<span class="gp">In [188]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">A,B,C</span>
<span class="go">20090101,a,1,2</span>
<span class="go">20090102,b,3,4</span>
<span class="go">20090103,c,4,5</span>

<span class="gp">In [189]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<p>In this special case, <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> assumes that the first column is to be used
as the index of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [190]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">)</span>
<span class="gh">Out[190]: </span><span class="go"></span>
<span class="go">          A  B  C</span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<p>Note that the dates werenâ€™t automatically parsed. In that case you would need
to do as before:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [191]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [192]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[192]: </span><span class="go">DatetimeIndex([&#39;2009-01-01&#39;, &#39;2009-01-02&#39;, &#39;2009-01-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</section>
<section id="reading-an-index-with-a-multiindex">
<h4>Reading an index with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code><a class="headerlink" href="#reading-an-index-with-a-multiindex" title="Permalink to this headline">#</a></h4>
<p id="io-csv-multiindex">Suppose you have data indexed by two columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [193]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;year,indiv,zit,xit</span><span class="se">\n</span><span class="s1">1977,&quot;A&quot;,1.2,.6</span><span class="se">\n</span><span class="s1">1977,&quot;B&quot;,1.5,.5&#39;</span>

<span class="gp">In [194]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">year,indiv,zit,xit</span>
<span class="go">1977,&quot;A&quot;,1.2,.6</span>
<span class="go">1977,&quot;B&quot;,1.5,.5</span>

<span class="gp">In [195]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;mindex_ex.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">index_col</span></code> argument to <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> can take a list of
column numbers to turn multiple columns into a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> for the index of the
returned object:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [196]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;mindex_ex.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [197]: </span><span class="n">df</span>
<span class="gh">Out[197]: </span><span class="go"></span>
<span class="go">            zit  xit</span>
<span class="go">year indiv          </span>
<span class="go">1977 A      1.2  0.6</span>
<span class="go">     B      1.5  0.5</span>

<span class="gp">In [198]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1977</span><span class="p">]</span>
<span class="gh">Out[198]: </span><span class="go"></span>
<span class="go">       zit  xit</span>
<span class="go">indiv          </span>
<span class="go">A      1.2  0.6</span>
<span class="go">B      1.5  0.5</span>
</pre></div>
</div>
</section>
<section id="reading-columns-with-a-multiindex">
<span id="io-multi-index-columns"></span><h4>Reading columns with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code><a class="headerlink" href="#reading-columns-with-a-multiindex" title="Permalink to this headline">#</a></h4>
<p>By specifying list of row locations for the <code class="docutils literal notranslate"><span class="pre">header</span></code> argument, you
can read in a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> for the columns. Specifying non-consecutive
rows will skip the intervening rows.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [199]: </span><span class="kn">from</span> <span class="nn">pandas._testing</span> <span class="kn">import</span> <span class="n">makeCustomDataframe</span> <span class="k">as</span> <span class="n">mkdf</span>

<span class="gp">In [200]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">mkdf</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">r_idx_nlevels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c_idx_nlevels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [201]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;mi.csv&quot;</span><span class="p">)</span>

<span class="gp">In [202]: </span><span class="nb">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;mi.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">C0,,C_l0_g0,C_l0_g1,C_l0_g2</span>
<span class="go">C1,,C_l1_g0,C_l1_g1,C_l1_g2</span>
<span class="go">C2,,C_l2_g0,C_l2_g1,C_l2_g2</span>
<span class="go">C3,,C_l3_g0,C_l3_g1,C_l3_g2</span>
<span class="go">R0,R1,,,</span>
<span class="go">R_l0_g0,R_l1_g0,R0C0,R0C1,R0C2</span>
<span class="go">R_l0_g1,R_l1_g1,R1C0,R1C1,R1C2</span>
<span class="go">R_l0_g2,R_l1_g2,R2C0,R2C1,R2C2</span>
<span class="go">R_l0_g3,R_l1_g3,R3C0,R3C1,R3C2</span>
<span class="go">R_l0_g4,R_l1_g4,R4C0,R4C1,R4C2</span>


<span class="gp">In [203]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;mi.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gh">Out[203]: </span><span class="go"></span>
<span class="go">C0              C_l0_g0 C_l0_g1 C_l0_g2</span>
<span class="go">C1              C_l1_g0 C_l1_g1 C_l1_g2</span>
<span class="go">C2              C_l2_g0 C_l2_g1 C_l2_g2</span>
<span class="go">C3              C_l3_g0 C_l3_g1 C_l3_g2</span>
<span class="go">R0      R1                             </span>
<span class="go">R_l0_g0 R_l1_g0    R0C0    R0C1    R0C2</span>
<span class="go">R_l0_g1 R_l1_g1    R1C0    R1C1    R1C2</span>
<span class="go">R_l0_g2 R_l1_g2    R2C0    R2C1    R2C2</span>
<span class="go">R_l0_g3 R_l1_g3    R3C0    R3C1    R3C2</span>
<span class="go">R_l0_g4 R_l1_g4    R4C0    R4C1    R4C2</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> is also able to interpret a more common format
of multi-columns indices.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [204]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;,a,a,a,b,c,c</span><span class="se">\n</span><span class="s2">,q,r,s,t,u,v</span><span class="se">\n</span><span class="s2">one,1,2,3,4,5,6</span><span class="se">\n</span><span class="s2">two,7,8,9,10,11,12&quot;</span>

<span class="gp">In [205]: </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">,a,a,a,b,c,c</span>
<span class="go">,q,r,s,t,u,v</span>
<span class="go">one,1,2,3,4,5,6</span>
<span class="go">two,7,8,9,10,11,12</span>

<span class="gp">In [206]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;mi2.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [207]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;mi2.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[207]: </span><span class="go"></span>
<span class="go">     a         b   c    </span>
<span class="go">     q  r  s   t   u   v</span>
<span class="go">one  1  2  3   4   5   6</span>
<span class="go">two  7  8  9  10  11  12</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an <code class="docutils literal notranslate"><span class="pre">index_col</span></code> is not specified (e.g. you donâ€™t have an index, or wrote it
with <code class="docutils literal notranslate"><span class="pre">df.to_csv(...,</span> <span class="pre">index=False)</span></code>, then any <code class="docutils literal notranslate"><span class="pre">names</span></code> on the columns index will
be <em>lost</em>.</p>
</div>
</section>
</section>
<section id="automatically-sniffing-the-delimiter">
<span id="io-sniff"></span><h3>Automatically â€œsniffingâ€ the delimiter<a class="headerlink" href="#automatically-sniffing-the-delimiter" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> is capable of inferring delimited (not necessarily
comma-separated) files, as pandas uses the <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/csv.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/csv.html#csv.Sniffer'" tppabs="https://docs.python.org/3/library/csv.html#csv.Sniffer" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">csv.Sniffer</span></code></a>
class of the csv module. For this, you have to specify <code class="docutils literal notranslate"><span class="pre">sep=None</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [208]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="gp">In [209]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>

<span class="gp">In [210]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;tmp2.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>

<span class="gp">In [211]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp2.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">)</span>
<span class="gh">Out[211]: </span><span class="go"></span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">5           5 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">6           6  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">7           7 -0.370647 -1.157892 -1.344312  0.844885</span>
<span class="go">8           8  1.075770 -0.109050  1.643563 -1.469388</span>
<span class="go">9           9  0.357021 -0.674600 -1.776904 -0.968914</span>
</pre></div>
</div>
</section>
<section id="reading-multiple-files-to-create-a-single-dataframe">
<span id="io-multiple-files"></span><h3>Reading multiple files to create a single DataFrame<a class="headerlink" href="#reading-multiple-files-to-create-a-single-dataframe" title="Permalink to this headline">#</a></h3>
<p>Itâ€™s best to use <a class="reference internal" href="pandas.concat.html#pandas.concat" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> to combine multiple files.
See the <a class="reference internal" href="cookbook.html#cookbook-csv-multiple-files" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html#cookbook-csv-multiple-files"><span class="std std-ref">cookbook</span></a> for an example.</p>
</section>
<section id="iterating-through-files-chunk-by-chunk">
<span id="io-chunking"></span><h3>Iterating through files chunk by chunk<a class="headerlink" href="#iterating-through-files-chunk-by-chunk" title="Permalink to this headline">#</a></h3>
<p>Suppose you wish to iterate through a (potentially very large) file lazily
rather than reading the entire file into memory, such as the following:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [212]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="gp">In [213]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>

<span class="gp">In [214]: </span><span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>

<span class="gp">In [215]: </span><span class="n">table</span>
<span class="gh">Out[215]: </span><span class="go"></span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0 -1.294524  0.413738  0.276662 -0.472035</span>
<span class="go">1           1 -0.013960 -0.362543 -0.006154 -0.923061</span>
<span class="go">2           2  0.895717  0.805244 -1.206412  2.565646</span>
<span class="go">3           3  1.431256  1.340309 -1.170299 -0.226169</span>
<span class="go">4           4  0.410835  0.813850  0.132003 -0.827317</span>
<span class="go">5           5 -0.076467 -1.187678  1.130127 -1.436737</span>
<span class="go">6           6 -1.413681  1.607920  1.024180  0.569605</span>
<span class="go">7           7  0.875906 -2.211372  0.974466 -2.006747</span>
<span class="go">8           8 -0.410001 -0.078638  0.545952 -1.219217</span>
<span class="go">9           9 -1.226825  0.769804 -1.281247 -0.727707</span>
</pre></div>
</div>
<p>By specifying a <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> to <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>, the return
value will be an iterable object of type <code class="docutils literal notranslate"><span class="pre">TextFileReader</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [216]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">reader</span>
<span class="gp">   .....: </span>    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>        <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0 -1.294524  0.413738  0.276662 -0.472035</span>
<span class="go">1           1 -0.013960 -0.362543 -0.006154 -0.923061</span>
<span class="go">2           2  0.895717  0.805244 -1.206412  2.565646</span>
<span class="go">3           3  1.431256  1.340309 -1.170299 -0.226169</span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">4           4  0.410835  0.813850  0.132003 -0.827317</span>
<span class="go">5           5 -0.076467 -1.187678  1.130127 -1.436737</span>
<span class="go">6           6 -1.413681  1.607920  1.024180  0.569605</span>
<span class="go">7           7  0.875906 -2.211372  0.974466 -2.006747</span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">8           8 -0.410001 -0.078638  0.545952 -1.219217</span>
<span class="go">9           9 -1.226825  0.769804 -1.281247 -0.727707</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2: </span><code class="docutils literal notranslate"><span class="pre">read_csv/json/sas</span></code> return a context-manager when iterating through a file.</p>
</div>
<p>Specifying <code class="docutils literal notranslate"><span class="pre">iterator=True</span></code> will also return the <code class="docutils literal notranslate"><span class="pre">TextFileReader</span></code> object:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [217]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tmp.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">iterator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">reader</span><span class="o">.</span><span class="n">get_chunk</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
</section>
<section id="specifying-the-parser-engine">
<h3>Specifying the parser engine<a class="headerlink" href="#specifying-the-parser-engine" title="Permalink to this headline">#</a></h3>
<p>Pandas currently supports three engines, the C engine, the python engine, and an experimental
pyarrow engine (requires the <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> package). In general, the pyarrow engine is fastest
on larger workloads and is equivalent in speed to the C engine on most other workloads.
The python engine tends to be slower than the pyarrow and C engines on most workloads. However,
the pyarrow engine is much less robust than the C engine, which lacks a few features compared to the
Python engine.</p>
<p>Where possible, pandas uses the C parser (specified as <code class="docutils literal notranslate"><span class="pre">engine='c'</span></code>), but it may fall
back to Python if C-unsupported options are specified.</p>
<p>Currently, options unsupported by the C and pyarrow engines include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sep</span></code> other than a single character (e.g. regex separators)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skipfooter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sep=None</span></code> with <code class="docutils literal notranslate"><span class="pre">delim_whitespace=False</span></code></p></li>
</ul>
<p>Specifying any of the above options will produce a <code class="docutils literal notranslate"><span class="pre">ParserWarning</span></code> unless the
python engine is selected explicitly using <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code>.</p>
<p>Options that are unsupported by the pyarrow engine which are not covered by the list above include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">float_precision</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chunksize</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nrows</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thousands</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">memory_map</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dialect</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warn_bad_lines</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error_bad_lines</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">on_bad_lines</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delim_whitespace</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quoting</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lineterminator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">converters</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decimal</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iterator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dayfirst</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">infer_datetime_format</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verbose</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skipinitialspace</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">low_memory</span></code></p></li>
</ul>
<p>Specifying these options with <code class="docutils literal notranslate"><span class="pre">engine='pyarrow'</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</section>
<section id="reading-writing-remote-files">
<span id="io-remote"></span><h3>Reading/writing remote files<a class="headerlink" href="#reading-writing-remote-files" title="Permalink to this headline">#</a></h3>
<p>You can pass in a URL to read or write remote files to many of pandasâ€™ IO
functions - the following example shows reading a CSV file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://download.bls.gov/pub/time.series/cu/cu.item&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<p>A custom header can be sent alongside HTTP(s) requests by passing a dictionary
of header key value mappings to the <code class="docutils literal notranslate"><span class="pre">storage_options</span></code> keyword argument as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;pandas&quot;</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s2">&quot;https://download.bls.gov/pub/time.series/cu/cu.item&quot;</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="n">headers</span>
<span class="p">)</span>
</pre></div>
</div>
<p>All URLs which are not local files or HTTP(s) are handled by
<a class="reference external" href="javascript:if(confirm('https://filesystem-spec.readthedocs.io/en/latest/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://filesystem-spec.readthedocs.io/en/latest/'" tppabs="https://filesystem-spec.readthedocs.io/en/latest/">fsspec</a>, if installed, and its various filesystem implementations
(including Amazon S3, Google Cloud, SSH, FTP, webHDFSâ€¦).
Some of these implementations will require additional packages to be
installed, for example
S3 URLs require the <a class="reference external" href="javascript:if(confirm('https://pypi.org/project/s3fs/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pypi.org/project/s3fs/'" tppabs="https://pypi.org/project/s3fs/">s3fs</a> library:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;s3://pandas-test/adatafile.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When dealing with remote storage systems, you might need
extra configuration with environment variables or config files in
special locations. For example, to access data in your S3 bucket,
you will need to define credentials in one of the several ways listed in
the <a class="reference external" href="javascript:if(confirm('https://s3fs.readthedocs.io/en/latest/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://s3fs.readthedocs.io/en/latest/#credentials'" tppabs="https://s3fs.readthedocs.io/en/latest/#credentials">S3Fs documentation</a>. The same is true
for several of the storage backends, and you should follow the links
at <a class="reference external" href="javascript:if(confirm('https://filesystem-spec.readthedocs.io/en/latest/api.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://filesystem-spec.readthedocs.io/en/latest/api.html#built-in-implementations'" tppabs="https://filesystem-spec.readthedocs.io/en/latest/api.html#built-in-implementations">fsimpl1</a> for implementations built into <code class="docutils literal notranslate"><span class="pre">fsspec</span></code> and <a class="reference external" href="javascript:if(confirm('https://filesystem-spec.readthedocs.io/en/latest/api.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://filesystem-spec.readthedocs.io/en/latest/api.html#other-known-implementations'" tppabs="https://filesystem-spec.readthedocs.io/en/latest/api.html#other-known-implementations">fsimpl2</a>
for those not included in the main <code class="docutils literal notranslate"><span class="pre">fsspec</span></code>
distribution.</p>
<p>You can also pass parameters directly to the backend driver. For example,
if you do <em>not</em> have S3 credentials, you can still access public data by
specifying an anonymous connection, such as</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.0.</span></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s2">&quot;s3://ncei-wcsd-archive/data/processed/SH1305/18kHz/SaKe2013&quot;</span>
    <span class="s2">&quot;-D20130523-T080854_to_SaKe2013-D20130523-T085643.csv&quot;</span><span class="p">,</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;anon&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fsspec</span></code> also allows complex URLs, for accessing data in compressed
archives, local caching of files, and more. To locally cache the above
example, you would modify the call to</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s2">&quot;simplecache::s3://ncei-wcsd-archive/data/processed/SH1305/18kHz/&quot;</span>
    <span class="s2">&quot;SaKe2013-D20130523-T080854_to_SaKe2013-D20130523-T085643.csv&quot;</span><span class="p">,</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;s3&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;anon&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>where we specify that the â€œanonâ€ parameter is meant for the â€œs3â€ part of
the implementation, not to the caching implementation. Note that this caches to a temporary
directory for the duration of the session only, but you can also specify
a permanent store.</p>
</section>
<section id="writing-out-data">
<h3>Writing out data<a class="headerlink" href="#writing-out-data" title="Permalink to this headline">#</a></h3>
<section id="writing-to-csv-format">
<span id="io-store-in-csv"></span><h4>Writing to CSV format<a class="headerlink" href="#writing-to-csv-format" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects have an instance method <code class="docutils literal notranslate"><span class="pre">to_csv</span></code> which
allows storing the contents of the object as a comma-separated-values file. The
function takes a number of arguments. Only the first is required.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">path_or_buf</span></code>: A string path to the file to write or a file object. If a file object it must be opened with <code class="docutils literal notranslate"><span class="pre">newline=''</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sep</span></code> : Field delimiter for the output file (default â€œ,â€)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">na_rep</span></code>: A string representation of a missing value (default â€˜â€™)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float_format</span></code>: Format string for floating point numbers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns</span></code>: Columns to write (default None)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code>: Whether to write out the column names (default True)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: whether to write row (index) names (default True)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_label</span></code>: Column label(s) for index column(s) if desired. If None
(default), and <code class="docutils literal notranslate"><span class="pre">header</span></code> and <code class="docutils literal notranslate"><span class="pre">index</span></code> are True, then the index names are
used. (A sequence should be given if the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> uses MultiIndex).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span></code> : Python write mode, default â€˜wâ€™</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encoding</span></code>: a string representing the encoding to use if the contents are
non-ASCII, for Python versions prior to 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lineterminator</span></code>: Character sequence denoting line end (default <code class="docutils literal notranslate"><span class="pre">os.linesep</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quoting</span></code>: Set quoting rules as in csv module (default csv.QUOTE_MINIMAL). Note that if you have set a <code class="docutils literal notranslate"><span class="pre">float_format</span></code> then floats are converted to strings and csv.QUOTE_NONNUMERIC will treat them as non-numeric</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quotechar</span></code>: Character used to quote fields (default â€˜â€â€™)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doublequote</span></code>: Control quoting of <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> in fields (default True)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">escapechar</span></code>: Character used to escape <code class="docutils literal notranslate"><span class="pre">sep</span></code> and <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> when
appropriate (default None)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chunksize</span></code>: Number of rows to write at a time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_format</span></code>: Format string for datetime objects</p></li>
</ul>
</section>
<section id="writing-a-formatted-string">
<h4>Writing a formatted string<a class="headerlink" href="#writing-a-formatted-string" title="Permalink to this headline">#</a></h4>
<p id="io-formatting">The <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object has an instance method <code class="docutils literal notranslate"><span class="pre">to_string</span></code> which allows control
over the string representation of the object. All arguments are optional:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code> default None, for example a StringIO object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns</span></code> default None, which columns to write</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">col_space</span></code> default None, minimum width of each column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">na_rep</span></code> default <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, representation of NA value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formatters</span></code> default None, a dictionary (by column) of functions each of
which takes a single argument and returns a formatted string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float_format</span></code> default None, a function which takes a single (float)
argument and returns a formatted string; to be applied to floats in the
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sparsify</span></code> default True, set to False for a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with a hierarchical
index to print every MultiIndex key at each row.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_names</span></code> default True, will print the names of the indices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> default True, will print the index (ie, row labels)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code> default True, will print the column labels</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">justify</span></code> default <code class="docutils literal notranslate"><span class="pre">left</span></code>, will print column headers left- or
right-justified</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">Series</span></code> object also has a <code class="docutils literal notranslate"><span class="pre">to_string</span></code> method, but with only the <code class="docutils literal notranslate"><span class="pre">buf</span></code>,
<code class="docutils literal notranslate"><span class="pre">na_rep</span></code>, <code class="docutils literal notranslate"><span class="pre">float_format</span></code> arguments. There is also a <code class="docutils literal notranslate"><span class="pre">length</span></code> argument
which, if set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, will additionally output the length of the Series.</p>
</section>
</section>
</section>
<section id="json">
<span id="io-json"></span><h2>JSON<a class="headerlink" href="#json" title="Permalink to this headline">#</a></h2>
<p>Read and write <code class="docutils literal notranslate"><span class="pre">JSON</span></code> format files and strings.</p>
<section id="writing-json">
<span id="io-json-writer"></span><h3>Writing JSON<a class="headerlink" href="#writing-json" title="Permalink to this headline">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> can be converted to a valid JSON string. Use <code class="docutils literal notranslate"><span class="pre">to_json</span></code>
with optional parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">path_or_buf</span></code> : the pathname or buffer to write the output
This can be <code class="docutils literal notranslate"><span class="pre">None</span></code> in which case a JSON string is returned</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orient</span></code> :</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Series</span></code>:</dt><dd><ul class="simple">
<li><p>default is <code class="docutils literal notranslate"><span class="pre">index</span></code></p></li>
<li><p>allowed values are {<code class="docutils literal notranslate"><span class="pre">split</span></code>, <code class="docutils literal notranslate"><span class="pre">records</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>}</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</dt><dd><ul class="simple">
<li><p>default is <code class="docutils literal notranslate"><span class="pre">columns</span></code></p></li>
<li><p>allowed values are {<code class="docutils literal notranslate"><span class="pre">split</span></code>, <code class="docutils literal notranslate"><span class="pre">records</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">columns</span></code>, <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code>}</p></li>
</ul>
</dd>
</dl>
<p>The format of the JSON string</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">split</span></code></p></td>
<td><p>dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">records</span></code></p></td>
<td><p>list like [{column -&gt; value}, â€¦ , {column -&gt; value}]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index</span></code></p></td>
<td><p>dict like {index -&gt; {column -&gt; value}}</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns</span></code></p></td>
<td><p>dict like {column -&gt; {index -&gt; value}}</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">values</span></code></p></td>
<td><p>just the values array</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">table</span></code></p></td>
<td><p>adhering to the JSON <a class="reference external" href="javascript:if(confirm('https://specs.frictionlessdata.io/table-schema/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://specs.frictionlessdata.io/table-schema/'" tppabs="https://specs.frictionlessdata.io/table-schema/">Table Schema</a></p></td>
</tr>
</tbody>
</table>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_format</span></code> : string, type of date conversion, â€˜epochâ€™ for timestamp, â€˜isoâ€™ for ISO8601.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">double_precision</span></code> : The number of decimal places to use when encoding floating point values, default 10.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force_ascii</span></code> : force encoded string to be ASCII, default True.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_unit</span></code> : The time unit to encode to, governs timestamp and ISO8601 precision. One of â€˜sâ€™, â€˜msâ€™, â€˜usâ€™ or â€˜nsâ€™ for seconds, milliseconds, microseconds and nanoseconds respectively. Default â€˜msâ€™.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_handler</span></code> : The handler to call if an object cannot otherwise be converted to a suitable format for JSON. Takes a single argument, which is the object to convert, and returns a serializable object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lines</span></code> : If <code class="docutils literal notranslate"><span class="pre">records</span></code> orient, then will write each record per line as json.</p></li>
</ul>
<p>Note <code class="docutils literal notranslate"><span class="pre">NaN</span></code>â€™s, <code class="docutils literal notranslate"><span class="pre">NaT</span></code>â€™s and <code class="docutils literal notranslate"><span class="pre">None</span></code> will be converted to <code class="docutils literal notranslate"><span class="pre">null</span></code> and <code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects will be converted based on the <code class="docutils literal notranslate"><span class="pre">date_format</span></code> and <code class="docutils literal notranslate"><span class="pre">date_unit</span></code> parameters.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [218]: </span><span class="n">dfj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">))</span>

<span class="gp">In [219]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfj</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="gp">In [220]: </span><span class="n">json</span>
<span class="gh">Out[220]: </span><span class="go">&#39;{&quot;A&quot;:{&quot;0&quot;:-0.1213062281,&quot;1&quot;:0.6957746499,&quot;2&quot;:0.9597255933,&quot;3&quot;:-0.6199759194,&quot;4&quot;:-0.7323393705},&quot;B&quot;:{&quot;0&quot;:-0.0978826728,&quot;1&quot;:0.3417343559,&quot;2&quot;:-1.1103361029,&quot;3&quot;:0.1497483186,&quot;4&quot;:0.6877383895}}&#39;</span>
</pre></div>
</div>
<section id="orient-options">
<h4>Orient options<a class="headerlink" href="#orient-options" title="Permalink to this headline">#</a></h4>
<p>There are a number of different options for the format of the resulting JSON
file / string. Consider the following <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [221]: </span><span class="n">dfjo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">B</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">C</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
<span class="gp">   .....: </span>    <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;ABC&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [222]: </span><span class="n">dfjo</span>
<span class="gh">Out[222]: </span><span class="go"></span>
<span class="go">   A  B  C</span>
<span class="go">x  1  4  7</span>
<span class="go">y  2  5  8</span>
<span class="go">z  3  6  9</span>

<span class="gp">In [223]: </span><span class="n">sjo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">17</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>

<span class="gp">In [224]: </span><span class="n">sjo</span>
<span class="gh">Out[224]: </span><span class="go"></span>
<span class="go">x    15</span>
<span class="go">y    16</span>
<span class="go">z    17</span>
<span class="go">Name: D, dtype: int64</span>
</pre></div>
</div>
<p><strong>Column oriented</strong> (the default for <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>) serializes the data as
nested JSON objects with column labels acting as the primary index:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [225]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">)</span>
<span class="gh">Out[225]: </span><span class="go">&#39;{&quot;A&quot;:{&quot;x&quot;:1,&quot;y&quot;:2,&quot;z&quot;:3},&quot;B&quot;:{&quot;x&quot;:4,&quot;y&quot;:5,&quot;z&quot;:6},&quot;C&quot;:{&quot;x&quot;:7,&quot;y&quot;:8,&quot;z&quot;:9}}&#39;</span>

<span class="go"># Not available for Series</span>
</pre></div>
</div>
<p><strong>Index oriented</strong> (the default for <code class="docutils literal notranslate"><span class="pre">Series</span></code>) similar to column oriented
but the index labels are now primary:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [226]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="gh">Out[226]: </span><span class="go">&#39;{&quot;x&quot;:{&quot;A&quot;:1,&quot;B&quot;:4,&quot;C&quot;:7},&quot;y&quot;:{&quot;A&quot;:2,&quot;B&quot;:5,&quot;C&quot;:8},&quot;z&quot;:{&quot;A&quot;:3,&quot;B&quot;:6,&quot;C&quot;:9}}&#39;</span>

<span class="gp">In [227]: </span><span class="n">sjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="gh">Out[227]: </span><span class="go">&#39;{&quot;x&quot;:15,&quot;y&quot;:16,&quot;z&quot;:17}&#39;</span>
</pre></div>
</div>
<p><strong>Record oriented</strong> serializes the data to a JSON array of column -&gt; value records,
index labels are not included. This is useful for passing <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> data to plotting
libraries, for example the JavaScript library <code class="docutils literal notranslate"><span class="pre">d3.js</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [228]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
<span class="gh">Out[228]: </span><span class="go">&#39;[{&quot;A&quot;:1,&quot;B&quot;:4,&quot;C&quot;:7},{&quot;A&quot;:2,&quot;B&quot;:5,&quot;C&quot;:8},{&quot;A&quot;:3,&quot;B&quot;:6,&quot;C&quot;:9}]&#39;</span>

<span class="gp">In [229]: </span><span class="n">sjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
<span class="gh">Out[229]: </span><span class="go">&#39;[15,16,17]&#39;</span>
</pre></div>
</div>
<p><strong>Value oriented</strong> is a bare-bones option which serializes to nested JSON arrays of
values only, column and index labels are not included:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [230]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
<span class="gh">Out[230]: </span><span class="go">&#39;[[1,4,7],[2,5,8],[3,6,9]]&#39;</span>

<span class="go"># Not available for Series</span>
</pre></div>
</div>
<p><strong>Split oriented</strong> serializes to a JSON object containing separate entries for
values, index and columns. Name is also included for <code class="docutils literal notranslate"><span class="pre">Series</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [231]: </span><span class="n">dfjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;split&quot;</span><span class="p">)</span>
<span class="gh">Out[231]: </span><span class="go">&#39;{&quot;columns&quot;:[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;],&quot;index&quot;:[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;],&quot;data&quot;:[[1,4,7],[2,5,8],[3,6,9]]}&#39;</span>

<span class="gp">In [232]: </span><span class="n">sjo</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;split&quot;</span><span class="p">)</span>
<span class="gh">Out[232]: </span><span class="go">&#39;{&quot;name&quot;:&quot;D&quot;,&quot;index&quot;:[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;],&quot;data&quot;:[15,16,17]}&#39;</span>
</pre></div>
</div>
<p><strong>Table oriented</strong> serializes to the JSON <a class="reference external" href="javascript:if(confirm('https://specs.frictionlessdata.io/table-schema/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://specs.frictionlessdata.io/table-schema/'" tppabs="https://specs.frictionlessdata.io/table-schema/">Table Schema</a>, allowing for the
preservation of metadata including but not limited to dtypes and index names.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any orient option that encodes to a JSON object will not preserve the ordering of
index and column labels during round-trip serialization. If you wish to preserve
label ordering use the <code class="docutils literal notranslate"><span class="pre">split</span></code> option as it uses ordered containers.</p>
</div>
</section>
<section id="id1">
<h4>Date handling<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h4>
<p>Writing in ISO date format:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [233]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">))</span>

<span class="gp">In [234]: </span><span class="n">dfd</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">)</span>

<span class="gp">In [235]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [236]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;iso&quot;</span><span class="p">)</span>

<span class="gp">In [237]: </span><span class="n">json</span>
<span class="gh">Out[237]: </span><span class="go">&#39;{&quot;date&quot;:{&quot;0&quot;:&quot;2013-01-01T00:00:00.000&quot;,&quot;1&quot;:&quot;2013-01-01T00:00:00.000&quot;,&quot;2&quot;:&quot;2013-01-01T00:00:00.000&quot;,&quot;3&quot;:&quot;2013-01-01T00:00:00.000&quot;,&quot;4&quot;:&quot;2013-01-01T00:00:00.000&quot;},&quot;B&quot;:{&quot;0&quot;:0.403309524,&quot;1&quot;:0.3016244523,&quot;2&quot;:-1.3698493577,&quot;3&quot;:1.4626960492,&quot;4&quot;:-0.8265909164},&quot;A&quot;:{&quot;0&quot;:0.1764443426,&quot;1&quot;:-0.1549507744,&quot;2&quot;:-2.1798606054,&quot;3&quot;:-0.9542078401,&quot;4&quot;:-1.7431609117}}&#39;</span>
</pre></div>
</div>
<p>Writing in ISO date format, with microseconds:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [238]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;iso&quot;</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">)</span>

<span class="gp">In [239]: </span><span class="n">json</span>
<span class="gh">Out[239]: </span><span class="go">&#39;{&quot;date&quot;:{&quot;0&quot;:&quot;2013-01-01T00:00:00.000000&quot;,&quot;1&quot;:&quot;2013-01-01T00:00:00.000000&quot;,&quot;2&quot;:&quot;2013-01-01T00:00:00.000000&quot;,&quot;3&quot;:&quot;2013-01-01T00:00:00.000000&quot;,&quot;4&quot;:&quot;2013-01-01T00:00:00.000000&quot;},&quot;B&quot;:{&quot;0&quot;:0.403309524,&quot;1&quot;:0.3016244523,&quot;2&quot;:-1.3698493577,&quot;3&quot;:1.4626960492,&quot;4&quot;:-0.8265909164},&quot;A&quot;:{&quot;0&quot;:0.1764443426,&quot;1&quot;:-0.1549507744,&quot;2&quot;:-2.1798606054,&quot;3&quot;:-0.9542078401,&quot;4&quot;:-1.7431609117}}&#39;</span>
</pre></div>
</div>
<p>Epoch timestamps, in seconds:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [240]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;epoch&quot;</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>

<span class="gp">In [241]: </span><span class="n">json</span>
<span class="gh">Out[241]: </span><span class="go">&#39;{&quot;date&quot;:{&quot;0&quot;:1356998400,&quot;1&quot;:1356998400,&quot;2&quot;:1356998400,&quot;3&quot;:1356998400,&quot;4&quot;:1356998400},&quot;B&quot;:{&quot;0&quot;:0.403309524,&quot;1&quot;:0.3016244523,&quot;2&quot;:-1.3698493577,&quot;3&quot;:1.4626960492,&quot;4&quot;:-0.8265909164},&quot;A&quot;:{&quot;0&quot;:0.1764443426,&quot;1&quot;:-0.1549507744,&quot;2&quot;:-2.1798606054,&quot;3&quot;:-0.9542078401,&quot;4&quot;:-1.7431609117}}&#39;</span>
</pre></div>
</div>
<p>Writing to a file, with a date index and a date column:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [242]: </span><span class="n">dfj2</span> <span class="o">=</span> <span class="n">dfj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [243]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">)</span>

<span class="gp">In [244]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s2">&quot;ints&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="gp">In [245]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s2">&quot;bools&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="gp">In [246]: </span><span class="n">dfj2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="gp">In [247]: </span><span class="n">dfj2</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">)</span>

<span class="gp">In [248]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....: </span>
<span class="go">{&quot;A&quot;:{&quot;1356998400000&quot;:-0.1213062281,&quot;1357084800000&quot;:0.6957746499,&quot;1357171200000&quot;:0.9597255933,&quot;1357257600000&quot;:-0.6199759194,&quot;1357344000000&quot;:-0.7323393705},&quot;B&quot;:{&quot;1356998400000&quot;:-0.0978826728,&quot;1357084800000&quot;:0.3417343559,&quot;1357171200000&quot;:-1.1103361029,&quot;1357257600000&quot;:0.1497483186,&quot;1357344000000&quot;:0.6877383895},&quot;date&quot;:{&quot;1356998400000&quot;:1356998400000,&quot;1357084800000&quot;:1356998400000,&quot;1357171200000&quot;:1356998400000,&quot;1357257600000&quot;:1356998400000,&quot;1357344000000&quot;:1356998400000},&quot;ints&quot;:{&quot;1356998400000&quot;:0,&quot;1357084800000&quot;:1,&quot;1357171200000&quot;:2,&quot;1357257600000&quot;:3,&quot;1357344000000&quot;:4},&quot;bools&quot;:{&quot;1356998400000&quot;:true,&quot;1357084800000&quot;:true,&quot;1357171200000&quot;:true,&quot;1357257600000&quot;:true,&quot;1357344000000&quot;:true}}</span>
</pre></div>
</div>
</section>
<section id="fallback-behavior">
<h4>Fallback behavior<a class="headerlink" href="#fallback-behavior" title="Permalink to this headline">#</a></h4>
<p>If the JSON serializer cannot handle the container contents directly it will
fall back in the following manner:</p>
<ul>
<li><p>if the dtype is unsupported (e.g. <code class="docutils literal notranslate"><span class="pre">np.complex_</span></code>) then the <code class="docutils literal notranslate"><span class="pre">default_handler</span></code>, if provided, will be called
for each value, otherwise an exception is raised.</p></li>
<li><p>if an object is unsupported it will attempt the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>check if the object has defined a <code class="docutils literal notranslate"><span class="pre">toDict</span></code> method and call it.
A <code class="docutils literal notranslate"><span class="pre">toDict</span></code> method should return a <code class="docutils literal notranslate"><span class="pre">dict</span></code> which will then be JSON serialized.</p></li>
<li><p>invoke the <code class="docutils literal notranslate"><span class="pre">default_handler</span></code> if one was provided.</p></li>
<li><p>convert the object to a <code class="docutils literal notranslate"><span class="pre">dict</span></code> by traversing its contents. However this will often fail
with an <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> or give unexpected results.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>In general the best approach for unsupported objects or dtypes is to provide a <code class="docutils literal notranslate"><span class="pre">default_handler</span></code>.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">DataFrame</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)])</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>  <span class="c1"># raises</span>
<span class="go">RuntimeError: Unhandled numpy dtype 15</span>
</pre></div>
</div>
<p>can be dealt with by specifying a simple <code class="docutils literal notranslate"><span class="pre">default_handler</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [249]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)])</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">default_handler</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="gh">Out[249]: </span><span class="go">&#39;{&quot;0&quot;:{&quot;0&quot;:&quot;(1+0j)&quot;,&quot;1&quot;:&quot;(2+0j)&quot;,&quot;2&quot;:&quot;(1+2j)&quot;}}&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="reading-json">
<span id="io-json-reader"></span><h3>Reading JSON<a class="headerlink" href="#reading-json" title="Permalink to this headline">#</a></h3>
<p>Reading a JSON string to pandas object can take a number of parameters.
The parser will try to parse a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> if <code class="docutils literal notranslate"><span class="pre">typ</span></code> is not supplied or
is <code class="docutils literal notranslate"><span class="pre">None</span></code>. To explicitly force <code class="docutils literal notranslate"><span class="pre">Series</span></code> parsing, pass <code class="docutils literal notranslate"><span class="pre">typ=series</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">filepath_or_buffer</span></code> : a <strong>VALID</strong> JSON string or file handle / StringIO. The string could be
a URL. Valid URL schemes include http, ftp, S3, and file. For file URLs, a host
is expected. For instance, a local file could be
file ://localhost/path/to/table.json</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">typ</span></code> : type of object to recover (series or frame), default â€˜frameâ€™</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orient</span></code> :</p>
<dl class="simple">
<dt>Series :</dt><dd><ul class="simple">
<li><p>default is <code class="docutils literal notranslate"><span class="pre">index</span></code></p></li>
<li><p>allowed values are {<code class="docutils literal notranslate"><span class="pre">split</span></code>, <code class="docutils literal notranslate"><span class="pre">records</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>}</p></li>
</ul>
</dd>
<dt>DataFrame</dt><dd><ul class="simple">
<li><p>default is <code class="docutils literal notranslate"><span class="pre">columns</span></code></p></li>
<li><p>allowed values are {<code class="docutils literal notranslate"><span class="pre">split</span></code>, <code class="docutils literal notranslate"><span class="pre">records</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">columns</span></code>, <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code>}</p></li>
</ul>
</dd>
</dl>
<p>The format of the JSON string</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">split</span></code></p></td>
<td><p>dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">records</span></code></p></td>
<td><p>list like [{column -&gt; value}, â€¦ , {column -&gt; value}]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index</span></code></p></td>
<td><p>dict like {index -&gt; {column -&gt; value}}</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns</span></code></p></td>
<td><p>dict like {column -&gt; {index -&gt; value}}</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">values</span></code></p></td>
<td><p>just the values array</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">table</span></code></p></td>
<td><p>adhering to the JSON <a class="reference external" href="javascript:if(confirm('https://specs.frictionlessdata.io/table-schema/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://specs.frictionlessdata.io/table-schema/'" tppabs="https://specs.frictionlessdata.io/table-schema/">Table Schema</a></p></td>
</tr>
</tbody>
</table>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dtype</span></code> : if True, infer dtypes, if a dict of column to dtype, then use those, if <code class="docutils literal notranslate"><span class="pre">False</span></code>, then donâ€™t infer dtypes at all, default is True, apply only to the data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">convert_axes</span></code> : boolean, try to convert the axes to the proper dtypes, default is <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">convert_dates</span></code> : a list of columns to parse for dates; If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then try to parse date-like columns, default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keep_default_dates</span></code> : boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code>. If parsing dates, then parse the default date-like columns.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> : direct decoding to NumPy arrays. default is <code class="docutils literal notranslate"><span class="pre">False</span></code>;
Supports numeric data only, although labels may be non-numeric. Also note that the JSON ordering <strong>MUST</strong> be the same for each term if <code class="docutils literal notranslate"><span class="pre">numpy=True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">precise_float</span></code> : boolean, default <code class="docutils literal notranslate"><span class="pre">False</span></code>. Set to enable usage of higher precision (strtod) function when decoding string to double values. Default (<code class="docutils literal notranslate"><span class="pre">False</span></code>) is to use fast but less precise builtin functionality.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_unit</span></code> : string, the timestamp unit to detect if converting dates. Default
None. By default the timestamp precision will be detected, if this is not desired
then pass one of â€˜sâ€™, â€˜msâ€™, â€˜usâ€™ or â€˜nsâ€™ to force timestamp precision to
seconds, milliseconds, microseconds or nanoseconds respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lines</span></code> : reads file as one json object per line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encoding</span></code> : The encoding to use to decode py3 bytes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chunksize</span></code> : when used in combination with <code class="docutils literal notranslate"><span class="pre">lines=True</span></code>, return a JsonReader which reads in <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> lines per iteration.</p></li>
</ul>
<p>The parser will raise one of <code class="docutils literal notranslate"><span class="pre">ValueError/TypeError/AssertionError</span></code> if the JSON is not parseable.</p>
<p>If a non-default <code class="docutils literal notranslate"><span class="pre">orient</span></code> was used when encoding to JSON be sure to pass the same
option here so that decoding produces sensible results, see <a class="reference internal" href="#orient-options">Orient Options</a> for an
overview.</p>
<section id="data-conversion">
<h4>Data conversion<a class="headerlink" href="#data-conversion" title="Permalink to this headline">#</a></h4>
<p>The default of <code class="docutils literal notranslate"><span class="pre">convert_axes=True</span></code>, <code class="docutils literal notranslate"><span class="pre">dtype=True</span></code>, and <code class="docutils literal notranslate"><span class="pre">convert_dates=True</span></code>
will try to parse the axes, and all of the data into appropriate types,
including dates. If you need to override specific dtypes, pass a dict to
<code class="docutils literal notranslate"><span class="pre">dtype</span></code>. <code class="docutils literal notranslate"><span class="pre">convert_axes</span></code> should only be set to <code class="docutils literal notranslate"><span class="pre">False</span></code> if you need to
preserve string-like numbers (e.g. â€˜1â€™, â€˜2â€™) in an axes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Large integer values may be converted to dates if <code class="docutils literal notranslate"><span class="pre">convert_dates=True</span></code> and the data and / or column labels appear â€˜date-likeâ€™. The exact threshold depends on the <code class="docutils literal notranslate"><span class="pre">date_unit</span></code> specified. â€˜date-likeâ€™ means that the column label meets one of the following criteria:</p>
<blockquote>
<div><ul class="simple">
<li><p>it ends with <code class="docutils literal notranslate"><span class="pre">'_at'</span></code></p></li>
<li><p>it ends with <code class="docutils literal notranslate"><span class="pre">'_time'</span></code></p></li>
<li><p>it begins with <code class="docutils literal notranslate"><span class="pre">'timestamp'</span></code></p></li>
<li><p>it is <code class="docutils literal notranslate"><span class="pre">'modified'</span></code></p></li>
<li><p>it is <code class="docutils literal notranslate"><span class="pre">'date'</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When reading JSON data, automatic coercing into dtypes has some quirks:</p>
<blockquote>
<div><ul class="simple">
<li><p>an index can be reconstructed in a different order from serialization, that is, the returned order is not guaranteed to be the same as before serialization</p></li>
<li><p>a column that was <code class="docutils literal notranslate"><span class="pre">float</span></code> data will be converted to <code class="docutils literal notranslate"><span class="pre">integer</span></code> if it can be done safely, e.g. a column of <code class="docutils literal notranslate"><span class="pre">1.</span></code></p></li>
<li><p>bool columns will be converted to <code class="docutils literal notranslate"><span class="pre">integer</span></code> on reconstruction</p></li>
</ul>
</div></blockquote>
<p>Thus there are times where you may want to specify specific dtypes via the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> keyword argument.</p>
</div>
<p>Reading from a JSON string:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [250]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
<span class="gh">Out[250]: </span><span class="go"></span>
<span class="go">        date         B         A</span>
<span class="go">0 2013-01-01  0.403310  0.176444</span>
<span class="go">1 2013-01-01  0.301624 -0.154951</span>
<span class="go">2 2013-01-01 -1.369849 -2.179861</span>
<span class="go">3 2013-01-01  1.462696 -0.954208</span>
<span class="go">4 2013-01-01 -0.826591 -1.743161</span>
</pre></div>
</div>
<p>Reading from a file:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [251]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">)</span>
<span class="gh">Out[251]: </span><span class="go"></span>
<span class="go">                   A         B       date  ints  bools</span>
<span class="go">2013-01-01 -0.121306 -0.097883 2013-01-01     0   True</span>
<span class="go">2013-01-02  0.695775  0.341734 2013-01-01     1   True</span>
<span class="go">2013-01-03  0.959726 -1.110336 2013-01-01     2   True</span>
<span class="go">2013-01-04 -0.619976  0.149748 2013-01-01     3   True</span>
<span class="go">2013-01-05 -0.732339  0.687738 2013-01-01     4   True</span>
</pre></div>
</div>
<p>Donâ€™t convert any data (but still convert axes and dates):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [252]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[252]: </span><span class="go"></span>
<span class="go">A        object</span>
<span class="go">B        object</span>
<span class="go">date     object</span>
<span class="go">ints     object</span>
<span class="go">bools    object</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Specify dtypes for conversion:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [253]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;float32&quot;</span><span class="p">,</span> <span class="s2">&quot;bools&quot;</span><span class="p">:</span> <span class="s2">&quot;int8&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[253]: </span><span class="go"></span>
<span class="go">A               float32</span>
<span class="go">B               float64</span>
<span class="go">date     datetime64[ns]</span>
<span class="go">ints              int64</span>
<span class="go">bools              int8</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Preserve string indices:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [254]: </span><span class="n">si</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [255]: </span><span class="n">si</span>
<span class="gh">Out[255]: </span><span class="go"></span>
<span class="go">     0    1    2    3</span>
<span class="go">0  0.0  0.0  0.0  0.0</span>
<span class="go">1  0.0  0.0  0.0  0.0</span>
<span class="go">2  0.0  0.0  0.0  0.0</span>
<span class="go">3  0.0  0.0  0.0  0.0</span>

<span class="gp">In [256]: </span><span class="n">si</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[256]: </span><span class="go">Index([&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;], dtype=&#39;object&#39;)</span>

<span class="gp">In [257]: </span><span class="n">si</span><span class="o">.</span><span class="n">columns</span>
<span class="gh">Out[257]: </span><span class="go">Int64Index([0, 1, 2, 3], dtype=&#39;int64&#39;)</span>

<span class="gp">In [258]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">si</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="gp">In [259]: </span><span class="n">sij</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">convert_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [260]: </span><span class="n">sij</span>
<span class="gh">Out[260]: </span><span class="go"></span>
<span class="go">   0  1  2  3</span>
<span class="go">0  0  0  0  0</span>
<span class="go">1  0  0  0  0</span>
<span class="go">2  0  0  0  0</span>
<span class="go">3  0  0  0  0</span>

<span class="gp">In [261]: </span><span class="n">sij</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[261]: </span><span class="go">Index([&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;], dtype=&#39;object&#39;)</span>

<span class="gp">In [262]: </span><span class="n">sij</span><span class="o">.</span><span class="n">columns</span>
<span class="gh">Out[262]: </span><span class="go">Index([&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p>Dates written in nanoseconds need to be read back in nanoseconds:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [263]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfj2</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_unit</span><span class="o">=</span><span class="s2">&quot;ns&quot;</span><span class="p">)</span>

<span class="go"># Try to parse timestamps as milliseconds -&gt; Won&#39;t Work</span>
<span class="gp">In [264]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">)</span>

<span class="gp">In [265]: </span><span class="n">dfju</span>
<span class="gh">Out[265]: </span><span class="go"></span>
<span class="go">                            A         B                 date  ints  bools</span>
<span class="go">1356998400000000000 -0.121306 -0.097883  1356998400000000000     0   True</span>
<span class="go">1357084800000000000  0.695775  0.341734  1356998400000000000     1   True</span>
<span class="go">1357171200000000000  0.959726 -1.110336  1356998400000000000     2   True</span>
<span class="go">1357257600000000000 -0.619976  0.149748  1356998400000000000     3   True</span>
<span class="go">1357344000000000000 -0.732339  0.687738  1356998400000000000     4   True</span>

<span class="go"># Let pandas detect the correct precision</span>
<span class="gp">In [266]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>

<span class="gp">In [267]: </span><span class="n">dfju</span>
<span class="gh">Out[267]: </span><span class="go"></span>
<span class="go">                   A         B       date  ints  bools</span>
<span class="go">2013-01-01 -0.121306 -0.097883 2013-01-01     0   True</span>
<span class="go">2013-01-02  0.695775  0.341734 2013-01-01     1   True</span>
<span class="go">2013-01-03  0.959726 -1.110336 2013-01-01     2   True</span>
<span class="go">2013-01-04 -0.619976  0.149748 2013-01-01     3   True</span>
<span class="go">2013-01-05 -0.732339  0.687738 2013-01-01     4   True</span>

<span class="go"># Or specify that all timestamps are in nanoseconds</span>
<span class="gp">In [268]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s2">&quot;ns&quot;</span><span class="p">)</span>

<span class="gp">In [269]: </span><span class="n">dfju</span>
<span class="gh">Out[269]: </span><span class="go"></span>
<span class="go">                   A         B       date  ints  bools</span>
<span class="go">2013-01-01 -0.121306 -0.097883 2013-01-01     0   True</span>
<span class="go">2013-01-02  0.695775  0.341734 2013-01-01     1   True</span>
<span class="go">2013-01-03  0.959726 -1.110336 2013-01-01     2   True</span>
<span class="go">2013-01-04 -0.619976  0.149748 2013-01-01     3   True</span>
<span class="go">2013-01-05 -0.732339  0.687738 2013-01-01     4   True</span>
</pre></div>
</div>
</section>
<section id="the-numpy-parameter">
<h4>The Numpy parameter<a class="headerlink" href="#the-numpy-parameter" title="Permalink to this headline">#</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This param has been deprecated as of version 1.0.0 and will raise a <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>.</p>
<p>This supports numeric data only. Index and columns labels may be non-numeric, e.g. strings, dates etc.</p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">numpy=True</span></code> is passed to <code class="docutils literal notranslate"><span class="pre">read_json</span></code> an attempt will be made to sniff
an appropriate dtype during deserialization and to subsequently decode directly
to NumPy arrays, bypassing the need for intermediate Python objects.</p>
<p>This can provide speedups if you are deserialising a large amount of numeric
data:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [270]: </span><span class="n">randfloats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>

<span class="gp">In [271]: </span><span class="n">randfloats</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="gp">In [272]: </span><span class="n">dffloats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randfloats</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;ABCDEFGHIJ&quot;</span><span class="p">))</span>

<span class="gp">In [273]: </span><span class="n">jsonfloats</span> <span class="o">=</span> <span class="n">dffloats</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [274]: </span><span class="o">%</span><span class="k">timeit</span> pd.read_json(jsonfloats)
<span class="go">8.22 ms +- 26.1 us per loop (mean +- std. dev. of 7 runs, 100 loops each)</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [275]: </span><span class="o">%</span><span class="k">timeit</span> pd.read_json(jsonfloats, numpy=True)
<span class="go">5.76 ms +- 40.7 us per loop (mean +- std. dev. of 7 runs, 100 loops each)</span>
</pre></div>
</div>
<p>The speedup is less noticeable for smaller datasets:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [276]: </span><span class="n">jsonfloats</span> <span class="o">=</span> <span class="n">dffloats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [277]: </span><span class="o">%</span><span class="k">timeit</span> pd.read_json(jsonfloats)
<span class="go">4.52 ms +- 30.9 us per loop (mean +- std. dev. of 7 runs, 100 loops each)</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [278]: </span><span class="o">%</span><span class="k">timeit</span> pd.read_json(jsonfloats, numpy=True)
<span class="go">4.1 ms +- 20.3 us per loop (mean +- std. dev. of 7 runs, 100 loops each)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Direct NumPy decoding makes a number of assumptions and may fail or produce
unexpected output if these assumptions are not satisfied:</p>
<blockquote>
<div><ul class="simple">
<li><p>data is numeric.</p></li>
<li><p>data is uniform. The dtype is sniffed from the first value decoded.
A <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> may be raised, or incorrect output may be produced
if this condition is not satisfied.</p></li>
<li><p>labels are ordered. Labels are only read from the first container, it is assumed
that each subsequent row / column has been encoded in the same order. This should be satisfied if the
data was encoded using <code class="docutils literal notranslate"><span class="pre">to_json</span></code> but may not be the case if the JSON
is from another source.</p></li>
</ul>
</div></blockquote>
</div>
</section>
</section>
<section id="normalization">
<span id="io-json-normalize"></span><h3>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">#</a></h3>
<p>pandas provides a utility function to take a dict or list of dicts and <em>normalize</em> this semi-structured data
into a flat table.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [279]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;first&quot;</span><span class="p">:</span> <span class="s2">&quot;Coleen&quot;</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">:</span> <span class="s2">&quot;Volk&quot;</span><span class="p">}},</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;given&quot;</span><span class="p">:</span> <span class="s2">&quot;Mark&quot;</span><span class="p">,</span> <span class="s2">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Regner&quot;</span><span class="p">}},</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Faye Raker&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span><span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [280]: </span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gh">Out[280]: </span><span class="go"></span>
<span class="go">    id name.first name.last name.given name.family        name</span>
<span class="go">0  1.0     Coleen      Volk        NaN         NaN         NaN</span>
<span class="go">1  NaN        NaN       NaN       Mark      Regner         NaN</span>
<span class="go">2  2.0        NaN       NaN        NaN         NaN  Faye Raker</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [281]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;Florida&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;shortname&quot;</span><span class="p">:</span> <span class="s2">&quot;FL&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;governor&quot;</span><span class="p">:</span> <span class="s2">&quot;Rick Scott&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;county&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">   .....: </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Dade&quot;</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">},</span>
<span class="gp">   .....: </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Broward&quot;</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="mi">40000</span><span class="p">},</span>
<span class="gp">   .....: </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Palm Beach&quot;</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="mi">60000</span><span class="p">},</span>
<span class="gp">   .....: </span>        <span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">},</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;Ohio&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;shortname&quot;</span><span class="p">:</span> <span class="s2">&quot;OH&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;governor&quot;</span><span class="p">:</span> <span class="s2">&quot;John Kasich&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;county&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">   .....: </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Summit&quot;</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">},</span>
<span class="gp">   .....: </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cuyahoga&quot;</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">},</span>
<span class="gp">   .....: </span>        <span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">},</span>
<span class="gp">   .....: </span><span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [282]: </span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;county&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="s2">&quot;shortname&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;governor&quot;</span><span class="p">]])</span>
<span class="gh">Out[282]: </span><span class="go"></span>
<span class="go">         name  population    state shortname info.governor</span>
<span class="go">0        Dade       12345  Florida        FL    Rick Scott</span>
<span class="go">1     Broward       40000  Florida        FL    Rick Scott</span>
<span class="go">2  Palm Beach       60000  Florida        FL    Rick Scott</span>
<span class="go">3      Summit        1234     Ohio        OH   John Kasich</span>
<span class="go">4    Cuyahoga        1337     Ohio        OH   John Kasich</span>
</pre></div>
</div>
<p>The max_level parameter provides more control over which level to end normalization.
With max_level=1 the following snippet normalizes until 1st nesting level of the provided dict.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [283]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;CreatedBy&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;User001&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;Lookup&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">   .....: </span>            <span class="s2">&quot;TextField&quot;</span><span class="p">:</span> <span class="s2">&quot;Some text&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>            <span class="s2">&quot;UserField&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Id&quot;</span><span class="p">:</span> <span class="s2">&quot;ID001&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name001&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span>        <span class="p">},</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;Image&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [284]: </span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">max_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[284]: </span><span class="go"></span>
<span class="go">  CreatedBy.Name Lookup.TextField                    Lookup.UserField Image.a</span>
<span class="go">0        User001        Some text  {&#39;Id&#39;: &#39;ID001&#39;, &#39;Name&#39;: &#39;Name001&#39;}       b</span>
</pre></div>
</div>
</section>
<section id="line-delimited-json">
<span id="io-jsonl"></span><h3>Line delimited json<a class="headerlink" href="#line-delimited-json" title="Permalink to this headline">#</a></h3>
<p>pandas is able to read and write line-delimited json files that are common in data processing pipelines
using Hadoop or Spark.</p>
<p>For line-delimited json files, pandas can also return an iterator which reads in <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> lines at a time. This can be useful for large files or to read from a stream.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [285]: </span><span class="n">jsonl</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   .....: </span><span class="s2">    {&quot;a&quot;: 1, &quot;b&quot;: 2}</span>
<span class="gp">   .....: </span><span class="s2">    {&quot;a&quot;: 3, &quot;b&quot;: 4}</span>
<span class="gp">   .....: </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [286]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">jsonl</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [287]: </span><span class="n">df</span>
<span class="gh">Out[287]: </span><span class="go"></span>
<span class="go">   a  b</span>
<span class="go">0  1  2</span>
<span class="go">1  3  4</span>

<span class="gp">In [288]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[288]: </span><span class="go">&#39;{&quot;a&quot;:1,&quot;b&quot;:2}\n{&quot;a&quot;:3,&quot;b&quot;:4}\n&#39;</span>

<span class="go"># reader is an iterator that returns ``chunksize`` lines each iteration</span>
<span class="gp">In [289]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">jsonl</span><span class="p">),</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">reader</span>
<span class="gp">   .....: </span>    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>        <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">Empty DataFrame</span>
<span class="go">Columns: []</span>
<span class="go">Index: []</span>
<span class="go">   a  b</span>
<span class="go">0  1  2</span>
<span class="go">   a  b</span>
<span class="go">1  3  4</span>
</pre></div>
</div>
</section>
<section id="table-schema">
<span id="io-table-schema"></span><h3>Table schema<a class="headerlink" href="#table-schema" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="javascript:if(confirm('https://specs.frictionlessdata.io/table-schema/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://specs.frictionlessdata.io/table-schema/'" tppabs="https://specs.frictionlessdata.io/table-schema/">Table Schema</a> is a spec for describing tabular datasets as a JSON
object. The JSON includes information on the field names, types, and
other attributes. You can use the orient <code class="docutils literal notranslate"><span class="pre">table</span></code> to build
a JSON string with two fields, <code class="docutils literal notranslate"><span class="pre">schema</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [290]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2016-01-01&quot;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">},</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;idx&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [291]: </span><span class="n">df</span>
<span class="gh">Out[291]: </span><span class="go"></span>
<span class="go">     A  B          C</span>
<span class="go">idx                 </span>
<span class="go">0    1  a 2016-01-01</span>
<span class="go">1    2  b 2016-01-02</span>
<span class="go">2    3  c 2016-01-03</span>

<span class="gp">In [292]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;iso&quot;</span><span class="p">)</span>
<span class="gh">Out[292]: </span><span class="go">&#39;{&quot;schema&quot;:{&quot;fields&quot;:[{&quot;name&quot;:&quot;idx&quot;,&quot;type&quot;:&quot;integer&quot;},{&quot;name&quot;:&quot;A&quot;,&quot;type&quot;:&quot;integer&quot;},{&quot;name&quot;:&quot;B&quot;,&quot;type&quot;:&quot;string&quot;},{&quot;name&quot;:&quot;C&quot;,&quot;type&quot;:&quot;datetime&quot;}],&quot;primaryKey&quot;:[&quot;idx&quot;],&quot;pandas_version&quot;:&quot;1.4.0&quot;},&quot;data&quot;:[{&quot;idx&quot;:0,&quot;A&quot;:1,&quot;B&quot;:&quot;a&quot;,&quot;C&quot;:&quot;2016-01-01T00:00:00.000&quot;},{&quot;idx&quot;:1,&quot;A&quot;:2,&quot;B&quot;:&quot;b&quot;,&quot;C&quot;:&quot;2016-01-02T00:00:00.000&quot;},{&quot;idx&quot;:2,&quot;A&quot;:3,&quot;B&quot;:&quot;c&quot;,&quot;C&quot;:&quot;2016-01-03T00:00:00.000&quot;}]}&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">schema</span></code> field contains the <code class="docutils literal notranslate"><span class="pre">fields</span></code> key, which itself contains
a list of column name to type pairs, including the <code class="docutils literal notranslate"><span class="pre">Index</span></code> or <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>
(see below for a list of types).
The <code class="docutils literal notranslate"><span class="pre">schema</span></code> field also contains a <code class="docutils literal notranslate"><span class="pre">primaryKey</span></code> field if the (Multi)index
is unique.</p>
<p>The second field, <code class="docutils literal notranslate"><span class="pre">data</span></code>, contains the serialized data with the <code class="docutils literal notranslate"><span class="pre">records</span></code>
orient.
The index is included, and any datetimes are ISO 8601 formatted, as required
by the Table Schema spec.</p>
<p>The full list of types supported are described in the Table Schema
spec. This table shows the mapping from pandas types:</p>
<table class="table">
<colgroup>
<col style="width: 47%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pandas type</p></th>
<th class="head"><p>Table Schema type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>int64</p></td>
<td><p>integer</p></td>
</tr>
<tr class="row-odd"><td><p>float64</p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>bool</p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-odd"><td><p>datetime64[ns]</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-even"><td><p>timedelta64[ns]</p></td>
<td><p>duration</p></td>
</tr>
<tr class="row-odd"><td><p>categorical</p></td>
<td><p>any</p></td>
</tr>
<tr class="row-even"><td><p>object</p></td>
<td><p>str</p></td>
</tr>
</tbody>
</table>
<p>A few notes on the generated table schema:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">schema</span></code> object contains a <code class="docutils literal notranslate"><span class="pre">pandas_version</span></code> field. This contains
the version of pandasâ€™ dialect of the schema, and will be incremented
with each revision.</p></li>
<li><p>All dates are converted to UTC when serializing. Even timezone naive values,
which are treated as UTC with an offset of 0.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [293]: </span><span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">build_table_schema</span>

<span class="gp">In [294]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

<span class="gp">In [295]: </span><span class="n">build_table_schema</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gh">Out[295]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: [{&#39;name&#39;: &#39;index&#39;, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;values&#39;, &#39;type&#39;: &#39;datetime&#39;}],</span>
<span class="go"> &#39;primaryKey&#39;: [&#39;index&#39;],</span>
<span class="go"> &#39;pandas_version&#39;: &#39;1.4.0&#39;}</span>
</pre></div>
</div>
</li>
<li><p>datetimes with a timezone (before serializing), include an additional field
<code class="docutils literal notranslate"><span class="pre">tz</span></code> with the time zone name (e.g. <code class="docutils literal notranslate"><span class="pre">'US/Central'</span></code>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [296]: </span><span class="n">s_tz</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;US/Central&quot;</span><span class="p">))</span>

<span class="gp">In [297]: </span><span class="n">build_table_schema</span><span class="p">(</span><span class="n">s_tz</span><span class="p">)</span>
<span class="gh">Out[297]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: [{&#39;name&#39;: &#39;index&#39;, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;values&#39;, &#39;type&#39;: &#39;datetime&#39;, &#39;tz&#39;: &#39;US/Central&#39;}],</span>
<span class="go"> &#39;primaryKey&#39;: [&#39;index&#39;],</span>
<span class="go"> &#39;pandas_version&#39;: &#39;1.4.0&#39;}</span>
</pre></div>
</div>
</li>
<li><p>Periods are converted to timestamps before serialization, and so have the
same behavior of being converted to UTC. In addition, periods will contain
and additional field <code class="docutils literal notranslate"><span class="pre">freq</span></code> with the periodâ€™s frequency, e.g. <code class="docutils literal notranslate"><span class="pre">'A-DEC'</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [298]: </span><span class="n">s_per</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;A-DEC&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

<span class="gp">In [299]: </span><span class="n">build_table_schema</span><span class="p">(</span><span class="n">s_per</span><span class="p">)</span>
<span class="gh">Out[299]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: [{&#39;name&#39;: &#39;index&#39;, &#39;type&#39;: &#39;datetime&#39;, &#39;freq&#39;: &#39;A-DEC&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;values&#39;, &#39;type&#39;: &#39;integer&#39;}],</span>
<span class="go"> &#39;primaryKey&#39;: [&#39;index&#39;],</span>
<span class="go"> &#39;pandas_version&#39;: &#39;1.4.0&#39;}</span>
</pre></div>
</div>
</li>
<li><p>Categoricals use the <code class="docutils literal notranslate"><span class="pre">any</span></code> type and an <code class="docutils literal notranslate"><span class="pre">enum</span></code> constraint listing
the set of possible values. Additionally, an <code class="docutils literal notranslate"><span class="pre">ordered</span></code> field is included:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [300]: </span><span class="n">s_cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]))</span>

<span class="gp">In [301]: </span><span class="n">build_table_schema</span><span class="p">(</span><span class="n">s_cat</span><span class="p">)</span>
<span class="gh">Out[301]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: [{&#39;name&#39;: &#39;index&#39;, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;values&#39;,</span>
<span class="go">   &#39;type&#39;: &#39;any&#39;,</span>
<span class="go">   &#39;constraints&#39;: {&#39;enum&#39;: [&#39;a&#39;, &#39;b&#39;]},</span>
<span class="go">   &#39;ordered&#39;: False}],</span>
<span class="go"> &#39;primaryKey&#39;: [&#39;index&#39;],</span>
<span class="go"> &#39;pandas_version&#39;: &#39;1.4.0&#39;}</span>
</pre></div>
</div>
</li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">primaryKey</span></code> field, containing an array of labels, is included
<em>if the index is unique</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [302]: </span><span class="n">s_dupe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [303]: </span><span class="n">build_table_schema</span><span class="p">(</span><span class="n">s_dupe</span><span class="p">)</span>
<span class="gh">Out[303]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: [{&#39;name&#39;: &#39;index&#39;, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;values&#39;, &#39;type&#39;: &#39;integer&#39;}],</span>
<span class="go"> &#39;pandas_version&#39;: &#39;1.4.0&#39;}</span>
</pre></div>
</div>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">primaryKey</span></code> behavior is the same with MultiIndexes, but in this
case the <code class="docutils literal notranslate"><span class="pre">primaryKey</span></code> is an array:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [304]: </span><span class="n">s_multi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]))</span>

<span class="gp">In [305]: </span><span class="n">build_table_schema</span><span class="p">(</span><span class="n">s_multi</span><span class="p">)</span>
<span class="gh">Out[305]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: [{&#39;name&#39;: &#39;level_0&#39;, &#39;type&#39;: &#39;string&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;level_1&#39;, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="go">  {&#39;name&#39;: &#39;values&#39;, &#39;type&#39;: &#39;integer&#39;}],</span>
<span class="go"> &#39;primaryKey&#39;: FrozenList([&#39;level_0&#39;, &#39;level_1&#39;]),</span>
<span class="go"> &#39;pandas_version&#39;: &#39;1.4.0&#39;}</span>
</pre></div>
</div>
</li>
<li><p>The default naming roughly follows these rules:</p>
<blockquote>
<div><ul class="simple">
<li><p>For series, the <code class="docutils literal notranslate"><span class="pre">object.name</span></code> is used. If thatâ€™s none, then the
name is <code class="docutils literal notranslate"><span class="pre">values</span></code></p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>, the stringified version of the column name is used</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">Index</span></code> (not <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>), <code class="docutils literal notranslate"><span class="pre">index.name</span></code> is used, with a
fallback to <code class="docutils literal notranslate"><span class="pre">index</span></code> if that is None.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">mi.names</span></code> is used. If any level has no name,
then <code class="docutils literal notranslate"><span class="pre">level_&lt;i&gt;</span></code> is used.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">read_json</span></code> also accepts <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code> as an argument. This allows for
the preservation of metadata such as dtypes and index names in a
round-trippable manner.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [306]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;bar&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2018-01-01&quot;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;qux&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]),</span>
<span class="gp">   .....: </span>    <span class="p">},</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;idx&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [307]: </span><span class="n">df</span>
<span class="gh">Out[307]: </span><span class="go"></span>
<span class="go">     foo bar        baz qux</span>
<span class="go">idx                        </span>
<span class="go">0      1   a 2018-01-01   a</span>
<span class="go">1      2   b 2018-01-02   b</span>
<span class="go">2      3   c 2018-01-03   c</span>
<span class="go">3      4   d 2018-01-04   c</span>

<span class="gp">In [308]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[308]: </span><span class="go"></span>
<span class="go">foo             int64</span>
<span class="go">bar            object</span>
<span class="go">baz    datetime64[ns]</span>
<span class="go">qux          category</span>
<span class="go">dtype: object</span>

<span class="gp">In [309]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>

<span class="gp">In [310]: </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>

<span class="gp">In [311]: </span><span class="n">new_df</span>
<span class="gh">Out[311]: </span><span class="go"></span>
<span class="go">     foo bar        baz qux</span>
<span class="go">idx                        </span>
<span class="go">0      1   a 2018-01-01   a</span>
<span class="go">1      2   b 2018-01-02   b</span>
<span class="go">2      3   c 2018-01-03   c</span>
<span class="go">3      4   d 2018-01-04   c</span>

<span class="gp">In [312]: </span><span class="n">new_df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[312]: </span><span class="go"></span>
<span class="go">foo             int64</span>
<span class="go">bar            object</span>
<span class="go">baz    datetime64[ns]</span>
<span class="go">qux          category</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</div></blockquote>
<p>Please note that the literal string â€˜indexâ€™ as the name of an <a class="reference internal" href="pandas.Index.html#pandas.Index" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>
is not round-trippable, nor are any names beginning with <code class="docutils literal notranslate"><span class="pre">'level_'</span></code> within a
<a class="reference internal" href="pandas.MultiIndex.html#pandas.MultiIndex" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>. These are used by default in <a class="reference internal" href="pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> to
indicate missing values and the subsequent read cannot distinguish the intent.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [313]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;index&quot;</span>

<span class="gp">In [314]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>

<span class="gp">In [315]: </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>

<span class="gp">In [316]: </span><span class="nb">print</span><span class="p">(</span><span class="n">new_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code> along with user-defined <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code>,
the generated schema will contain an additional <code class="docutils literal notranslate"><span class="pre">extDtype</span></code> key in the respective
<code class="docutils literal notranslate"><span class="pre">fields</span></code> element. This extra key is not standard but does enable JSON roundtrips
for extension types (e.g. <code class="docutils literal notranslate"><span class="pre">read_json(df.to_json(orient=&quot;table&quot;),</span> <span class="pre">orient=&quot;table&quot;)</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">extDtype</span></code> key carries the name of the extension, if you have properly registered
the <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code>, pandas will use said name to perform a lookup into the registry
and re-convert the serialized data into your custom dtype.</p>
</section>
</section>
<section id="html">
<h2>HTML<a class="headerlink" href="#html" title="Permalink to this headline">#</a></h2>
<section id="reading-html-content">
<span id="io-read-html"></span><h3>Reading HTML content<a class="headerlink" href="#reading-html-content" title="Permalink to this headline">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We <strong>highly encourage</strong> you to read the <a class="reference internal" href="#io-html-gotchas"><span class="std std-ref">HTML Table Parsing gotchas</span></a>
below regarding the issues surrounding the BeautifulSoup4/html5lib/lxml parsers.</p>
</div>
<p>The top-level <code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code> function can accept an HTML
string/file/URL and will parse HTML tables into list of pandas <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>.
Letâ€™s look at a few examples.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">read_html</span></code> returns a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects, even if there is
only a single table contained in the HTML content.</p>
</div>
<p>Read a URL with no options:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [320]: </span><span class="s2">&quot;https://www.fdic.gov/resources/resolutions/bank-failures/failed-bank-list&quot;</span>
<span class="gp">In [321]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gh">Out[321]:</span>
<span class="go">[                         Bank NameBank           CityCity StateSt  ...              Acquiring InstitutionAI Closing DateClosing FundFund</span>
<span class="go"> 0                    Almena State Bank             Almena      KS  ...                          Equity Bank    October 23, 2020    10538</span>
<span class="go"> 1           First City Bank of Florida  Fort Walton Beach      FL  ...            United Fidelity Bank, fsb    October 16, 2020    10537</span>
<span class="go"> 2                 The First State Bank      Barboursville      WV  ...                       MVB Bank, Inc.       April 3, 2020    10536</span>
<span class="go"> 3                   Ericson State Bank            Ericson      NE  ...           Farmers and Merchants Bank   February 14, 2020    10535</span>
<span class="go"> 4     City National Bank of New Jersey             Newark      NJ  ...                      Industrial Bank    November 1, 2019    10534</span>
<span class="go"> ..                                 ...                ...     ...  ...                                  ...                 ...      ...</span>
<span class="go"> 558                 Superior Bank, FSB           Hinsdale      IL  ...                Superior Federal, FSB       July 27, 2001     6004</span>
<span class="go"> 559                Malta National Bank              Malta      OH  ...                    North Valley Bank         May 3, 2001     4648</span>
<span class="go"> 560    First Alliance Bank &amp; Trust Co.         Manchester      NH  ...  Southern New Hampshire Bank &amp; Trust    February 2, 2001     4647</span>
<span class="go"> 561  National State Bank of Metropolis         Metropolis      IL  ...              Banterra Bank of Marion   December 14, 2000     4646</span>
<span class="go"> 562                   Bank of Honolulu           Honolulu      HI  ...                   Bank of the Orient    October 13, 2000     4645</span>

<span class="go"> [563 rows x 7 columns]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data from the above URL changes every Monday so the resulting data above may be slightly different.</p>
</div>
<p>Read in the content of the file from the above URL and pass it to <code class="docutils literal notranslate"><span class="pre">read_html</span></code>
as a string:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [317]: </span><span class="n">html_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   .....: </span><span class="s2">         &lt;table&gt;</span>
<span class="gp">   .....: </span><span class="s2">             &lt;tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">                 &lt;th&gt;A&lt;/th&gt;</span>
<span class="gp">   .....: </span><span class="s2">                 &lt;th colspan=&quot;1&quot;&gt;B&lt;/th&gt;</span>
<span class="gp">   .....: </span><span class="s2">                 &lt;th rowspan=&quot;1&quot;&gt;C&lt;/th&gt;</span>
<span class="gp">   .....: </span><span class="s2">             &lt;/tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">             &lt;tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">                 &lt;td&gt;a&lt;/td&gt;</span>
<span class="gp">   .....: </span><span class="s2">                 &lt;td&gt;b&lt;/td&gt;</span>
<span class="gp">   .....: </span><span class="s2">                 &lt;td&gt;c&lt;/td&gt;</span>
<span class="gp">   .....: </span><span class="s2">             &lt;/tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">         &lt;/table&gt;</span>
<span class="gp">   .....: </span><span class="s2">     &quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [318]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tmp.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html_str</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [319]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="s2">&quot;tmp.html&quot;</span><span class="p">)</span>

<span class="gp">In [320]: </span><span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[320]: </span><span class="go"></span>
<span class="go">   A  B  C</span>
<span class="go">0  a  b  c</span>
</pre></div>
</div>
<p>You can even pass in an instance of <code class="docutils literal notranslate"><span class="pre">StringIO</span></code> if you so desire:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [321]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">html_str</span><span class="p">))</span>

<span class="gp">In [322]: </span><span class="n">dfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[322]: </span><span class="go"></span>
<span class="go">   A  B  C</span>
<span class="go">0  a  b  c</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following examples are not run by the IPython evaluator due to the fact
that having so many network-accessing functions slows down the documentation
build. If you spot an error or an example that doesnâ€™t run, please do not
hesitate to report it over on <a class="reference external" href="javascript:if(confirm('https://github.com/pandas-dev/pandas/issues  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/pandas-dev/pandas/issues'" tppabs="https://github.com/pandas-dev/pandas/issues">pandas GitHub issues page</a>.</p>
</div>
<p>Read a URL and match a table that contains specific text:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="s2">&quot;Metcalf Bank&quot;</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a header row (by default <code class="docutils literal notranslate"><span class="pre">&lt;th&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;td&gt;</span></code> elements located within a
<code class="docutils literal notranslate"><span class="pre">&lt;thead&gt;</span></code> are used to form the column index, if multiple rows are contained within
<code class="docutils literal notranslate"><span class="pre">&lt;thead&gt;</span></code> then a MultiIndex is created); if specified, the header row is taken
from the data minus the parsed header elements (<code class="docutils literal notranslate"><span class="pre">&lt;th&gt;</span></code> elements).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify an index column:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a number of rows to skip:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a number of rows to skip using a list (<code class="docutils literal notranslate"><span class="pre">range</span></code> works
as well):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Specify an HTML attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;table&quot;</span><span class="p">})</span>
<span class="n">dfs2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;sortable&quot;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">dfs1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dfs2</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>  <span class="c1"># Should be True</span>
</pre></div>
</div>
<p>Specify values that should be converted to NaN:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;No Acquirer&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Specify whether to keep the default set of NaN values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify converters for columns. This is useful for numerical text data that has
leading zeros. By default columns that are numerical are cast to numeric
types and the leading zeros are lost. To avoid this, we can convert these
columns to strings.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">url_mcc</span> <span class="o">=</span> <span class="s2">&quot;https://en.wikipedia.org/wiki/Mobile_country_code&quot;</span>
<span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span>
    <span class="n">url_mcc</span><span class="p">,</span>
    <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Telekom Albania&quot;</span><span class="p">,</span>
    <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;MNC&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Use some combination of the above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Metcalf Bank&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Read in pandas <code class="docutils literal notranslate"><span class="pre">to_html</span></code> output (with some loss of floating point precision):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{0:.40g}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
<span class="n">dfin</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">lxml</span></code> backend will raise an error on a failed parse if that is the only
parser you provide. If you only have a single parser you can provide just a
string, but it is considered good practice to pass a list with one string if,
for example, the function expects a sequence of strings. You may use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;Metcalf Bank&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lxml&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Or you could pass <code class="docutils literal notranslate"><span class="pre">flavor='lxml'</span></code> without a list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;Metcalf Bank&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if you have bs4 and html5lib installed and pass <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">['lxml',</span>
<span class="pre">'bs4']</span></code> then the parse will most likely succeed. Note that <em>as soon as a parse
succeeds, the function will return</em>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;Metcalf Bank&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lxml&quot;</span><span class="p">,</span> <span class="s2">&quot;bs4&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Links can be extracted from cells along with the text using <code class="docutils literal notranslate"><span class="pre">extract_links=&quot;all&quot;</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [323]: </span><span class="n">html_table</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   .....: </span><span class="s2">&lt;table&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;th&gt;GitHub&lt;/th&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;td&gt;&lt;a href=&quot;https://github.com/pandas-dev/pandas&quot;&gt;pandas&lt;/a&gt;&lt;/td&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/tr&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;/table&gt;</span>
<span class="gp">   .....: </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [324]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">html_table</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">extract_links</span><span class="o">=</span><span class="s2">&quot;all&quot;</span>
<span class="gp">   .....: </span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [325]: </span><span class="n">df</span>
<span class="gh">Out[325]: </span><span class="go"></span>
<span class="go">                                   (GitHub, None)</span>
<span class="go">0  (pandas, https://github.com/pandas-dev/pandas)</span>

<span class="gp">In [326]: </span><span class="n">df</span><span class="p">[(</span><span class="s2">&quot;GitHub&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
<span class="gh">Out[326]: </span><span class="go"></span>
<span class="go">0    (pandas, https://github.com/pandas-dev/pandas)</span>
<span class="go">Name: (GitHub, None), dtype: object</span>

<span class="gp">In [327]: </span><span class="n">df</span><span class="p">[(</span><span class="s2">&quot;GitHub&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[327]: </span><span class="go"></span>
<span class="go">0    https://github.com/pandas-dev/pandas</span>
<span class="go">Name: (GitHub, None), dtype: object</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</section>
<section id="writing-to-html-files">
<span id="io-html"></span><h3>Writing to HTML files<a class="headerlink" href="#writing-to-html-files" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects have an instance method <code class="docutils literal notranslate"><span class="pre">to_html</span></code> which renders the
contents of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as an HTML table. The function arguments are as
in the method <code class="docutils literal notranslate"><span class="pre">to_string</span></code> described above.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all of the possible options for <code class="docutils literal notranslate"><span class="pre">DataFrame.to_html</span></code> are shown here for
brevityâ€™s sake. See <code class="xref py py-func docutils literal notranslate"><span class="pre">to_html()</span></code> for the
full set of options.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In an HTML-rendering supported environment like a Jupyter Notebook, <code class="docutils literal notranslate"><span class="pre">display(HTML(...))`</span></code>
will render the raw HTML into the environment.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [328]: </span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>

<span class="gp">In [329]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="gp">In [330]: </span><span class="n">df</span>
<span class="gh">Out[330]: </span><span class="go"></span>
<span class="go">          0         1</span>
<span class="go">0  0.070319  1.773907</span>
<span class="go">1  0.253908  0.414581</span>

<span class="gp">In [331]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span>

<span class="gp">In [332]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>  <span class="c1"># raw html</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.070319&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.773907&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.253908&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.414581&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [333]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">columns</span></code> argument will limit the columns shown:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [334]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="gp">In [335]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.070319&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.253908&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [336]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">float_format</span></code> takes a Python callable to control the precision of floating
point values:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [337]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{0:.10f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>

<span class="gp">In [338]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.0703192665&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.7739074228&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.2539083433&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.4145805920&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [339]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bold_rows</span></code> will make the row labels bold by default, but you can turn that
off:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [340]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">bold_rows</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [341]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;td&gt;0&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.070319&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.773907&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;td&gt;1&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.253908&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.414581&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [342]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">classes</span></code> argument provides the ability to give the resulting HTML
table CSS classes. Note that these classes are <em>appended</em> to the existing
<code class="docutils literal notranslate"><span class="pre">'dataframe'</span></code> class.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [343]: </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;awesome_table_class&quot;</span><span class="p">,</span> <span class="s2">&quot;even_more_awesome_class&quot;</span><span class="p">]))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe awesome_table_class even_more_awesome_class&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.070319&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;1.773907&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;0.253908&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.414581&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">render_links</span></code> argument provides the ability to add hyperlinks to cells
that contain URLs.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [344]: </span><span class="n">url_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Python&quot;</span><span class="p">,</span> <span class="s2">&quot;pandas&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;https://www.python.org/&quot;</span><span class="p">,</span> <span class="s2">&quot;https://pandas.pydata.org&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [345]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">url_df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">render_links</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [346]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;name&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;url&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;Python&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;&lt;a href=&quot;https://www.python.org/&quot; target=&quot;_blank&quot;&gt;https://www.python.org/&lt;/a&gt;&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;pandas&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;&lt;a href=&quot;https://pandas.pydata.org&quot; target=&quot;_blank&quot;&gt;https://pandas.pydata.org&lt;/a&gt;&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [347]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">escape</span></code> argument allows you to control whether the
â€œ&lt;â€, â€œ&gt;â€ and â€œ&amp;â€ characters escaped in the resulting HTML (by default it is
<code class="docutils literal notranslate"><span class="pre">True</span></code>). So to get the HTML without escaped characters pass <code class="docutils literal notranslate"><span class="pre">escape=False</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [348]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;&amp;&lt;&gt;&quot;</span><span class="p">),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)})</span>
</pre></div>
</div>
<p>Escaped:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [349]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span>

<span class="gp">In [350]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;a&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;b&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;amp;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.842321&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;lt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.211337&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;2&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;gt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.055427&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [351]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<p>Not escaped:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [352]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">escape</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [353]: </span><span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;a&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;b&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&amp;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.842321&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&lt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;0.211337&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;2&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;&gt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.055427&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>

<span class="gp">In [354]: </span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
<span class="go">&lt;IPython.core.display.HTML object&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some browsers may not show a difference in the rendering of the previous two
HTML tables.</p>
</div>
</section>
<section id="html-table-parsing-gotchas">
<span id="io-html-gotchas"></span><h3>HTML Table Parsing Gotchas<a class="headerlink" href="#html-table-parsing-gotchas" title="Permalink to this headline">#</a></h3>
<p>There are some versioning issues surrounding the libraries that are used to
parse HTML tables in the top-level pandas io function <code class="docutils literal notranslate"><span class="pre">read_html</span></code>.</p>
<p><strong>Issues with</strong> <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a></p>
<ul>
<li><p>Benefits</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> is very fast.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> requires Cython to install correctly.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Drawbacks</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> does <em>not</em> make any guarantees about the results of its parse
<em>unless</em> it is given <a class="reference external" href="javascript:if(confirm('https://validator.w3.org/docs/help.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://validator.w3.org/docs/help.html#validation_basics'" tppabs="https://validator.w3.org/docs/help.html#validation_basics"><strong>strictly valid markup</strong></a>.</p></li>
<li><p>In light of the above, we have chosen to allow you, the user, to use the
<a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> backend, but <strong>this backend will use</strong> <a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a> if <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a>
fails to parse</p></li>
<li><p>It is therefore <em>highly recommended</em> that you install both
<a class="reference external" href="javascript:if(confirm('https://www.crummy.com/software/BeautifulSoup  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.crummy.com/software/BeautifulSoup'" tppabs="https://www.crummy.com/software/BeautifulSoup"><strong>BeautifulSoup4</strong></a> and <a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a>, so that you will still get a valid
result (provided everything else is valid) even if <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> fails.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>Issues with</strong> <a class="reference external" href="javascript:if(confirm('https://www.crummy.com/software/BeautifulSoup  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.crummy.com/software/BeautifulSoup'" tppabs="https://www.crummy.com/software/BeautifulSoup"><strong>BeautifulSoup4</strong></a> <strong>using</strong> <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> <strong>as a backend</strong></p>
<ul class="simple">
<li><p>The above issues hold here as well since <a class="reference external" href="javascript:if(confirm('https://www.crummy.com/software/BeautifulSoup  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.crummy.com/software/BeautifulSoup'" tppabs="https://www.crummy.com/software/BeautifulSoup"><strong>BeautifulSoup4</strong></a> is essentially
just a wrapper around a parser backend.</p></li>
</ul>
<p><strong>Issues with</strong> <a class="reference external" href="javascript:if(confirm('https://www.crummy.com/software/BeautifulSoup  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.crummy.com/software/BeautifulSoup'" tppabs="https://www.crummy.com/software/BeautifulSoup"><strong>BeautifulSoup4</strong></a> <strong>using</strong> <a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a> <strong>as a backend</strong></p>
<ul>
<li><p>Benefits</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a> is far more lenient than <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/"><strong>lxml</strong></a> and consequently deals
with <em>real-life markup</em> in a much saner way rather than just, e.g.,
dropping an element without notifying you.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a> <em>generates valid HTML5 markup from invalid markup
automatically</em>. This is extremely important for parsing HTML tables,
since it guarantees a valid document. However, that does NOT mean that
it is â€œcorrectâ€, since the process of fixing markup does not have a
single definition.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a> is pure Python and requires no additional build steps beyond
its own installation.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Drawbacks</p>
<blockquote>
<div><ul class="simple">
<li><p>The biggest drawback to using <a class="reference external" href="javascript:if(confirm('https://github.com/html5lib/html5lib-python  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/html5lib/html5lib-python'" tppabs="https://github.com/html5lib/html5lib-python"><strong>html5lib</strong></a> is that it is slow as
molasses. However consider the fact that many tables on the web are not
big enough for the parsing algorithm runtime to matter. It is more
likely that the bottleneck will be in the process of reading the raw
text from the URL over the web, i.e., IO (input-output). For very large
tables, this might not be true.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="latex">
<span id="io-latex"></span><h2>LaTeX<a class="headerlink" href="#latex" title="Permalink to this headline">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<p>Currently there are no methods to read from LaTeX, only output methods.</p>
<section id="writing-to-latex-files">
<h3>Writing to LaTeX files<a class="headerlink" href="#writing-to-latex-files" title="Permalink to this headline">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DataFrame <em>and</em> Styler objects currently have a <code class="docutils literal notranslate"><span class="pre">to_latex</span></code> method. We recommend
using the <a class="reference internal" href="pandas.io.formats.style.Styler.to_latex.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.io.formats.style.Styler.to_latex.html"><span class="doc">Styler.to_latex()</span></a> method
over <a class="reference internal" href="pandas.DataFrame.to_latex.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_latex.html"><span class="doc">DataFrame.to_latex()</span></a> due to the formerâ€™s greater flexibility with
conditional styling, and the latterâ€™s possible future deprecation.</p>
</div>
<p>Review the documentation for <a class="reference internal" href="pandas.io.formats.style.Styler.to_latex.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.io.formats.style.Styler.to_latex.html"><span class="doc">Styler.to_latex</span></a>,
which gives examples of conditional styling and explains the operation of its keyword
arguments.</p>
<p>For simple application the following pattern is sufficient.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [355]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">])</span>

<span class="gp">In [356]: </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">to_latex</span><span class="p">())</span>
<span class="go">\begin{tabular}{lrr}</span>
<span class="go"> &amp; c &amp; d \\</span>
<span class="go">a &amp; 1 &amp; 2 \\</span>
<span class="go">b &amp; 3 &amp; 4 \\</span>
<span class="go">\end{tabular}</span>
</pre></div>
</div>
<p>To format values before output, chain the <a class="reference internal" href="pandas.io.formats.style.Styler.format.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.io.formats.style.Styler.format.html"><span class="doc">Styler.format</span></a>
method.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [357]: </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;â‚¬ </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_latex</span><span class="p">())</span>
<span class="go">\begin{tabular}{lrr}</span>
<span class="go"> &amp; c &amp; d \\</span>
<span class="go">a &amp; â‚¬ 1 &amp; â‚¬ 2 \\</span>
<span class="go">b &amp; â‚¬ 3 &amp; â‚¬ 4 \\</span>
<span class="go">\end{tabular}</span>
</pre></div>
</div>
</section>
</section>
<section id="xml">
<h2>XML<a class="headerlink" href="#xml" title="Permalink to this headline">#</a></h2>
<section id="reading-xml">
<span id="io-read-xml"></span><h3>Reading XML<a class="headerlink" href="#reading-xml" title="Permalink to this headline">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<p>The top-level <code class="xref py py-func docutils literal notranslate"><span class="pre">read_xml()</span></code> function can accept an XML
string/file/URL and will parse nodes and attributes into a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since there is no standard XML structure where design types can vary in
many ways, <code class="docutils literal notranslate"><span class="pre">read_xml</span></code> works best with flatter, shallow versions. If
an XML document is deeply nested, use the <code class="docutils literal notranslate"><span class="pre">stylesheet</span></code> feature to
transform XML into a flatter version.</p>
</div>
<p>Letâ€™s look at a few examples.</p>
<p>Read an XML string:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [358]: </span><span class="n">xml</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;bookstore&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;book category=&quot;cooking&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;title lang=&quot;en&quot;&gt;Everyday Italian&lt;/title&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;author&gt;Giada De Laurentiis&lt;/author&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;year&gt;2005&lt;/year&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;price&gt;30.00&lt;/price&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/book&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;book category=&quot;children&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;title lang=&quot;en&quot;&gt;Harry Potter&lt;/title&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;author&gt;J K. Rowling&lt;/author&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;year&gt;2005&lt;/year&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;price&gt;29.99&lt;/price&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/book&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;book category=&quot;web&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;title lang=&quot;en&quot;&gt;Learning XML&lt;/title&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;author&gt;Erik T. Ray&lt;/author&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;year&gt;2003&lt;/year&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;price&gt;39.95&lt;/price&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/book&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;/bookstore&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [359]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>

<span class="gp">In [360]: </span><span class="n">df</span>
<span class="gh">Out[360]: </span><span class="go"></span>
<span class="go">   category             title               author  year  price</span>
<span class="go">0   cooking  Everyday Italian  Giada De Laurentiis  2005  30.00</span>
<span class="go">1  children      Harry Potter         J K. Rowling  2005  29.99</span>
<span class="go">2       web      Learning XML          Erik T. Ray  2003  39.95</span>
</pre></div>
</div>
<p>Read a URL with no options:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [361]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="s2">&quot;https://www.w3schools.com/xml/books.xml&quot;</span><span class="p">)</span>

<span class="gp">In [362]: </span><span class="n">df</span>
<span class="gh">Out[362]: </span><span class="go"></span>
<span class="go">   category              title                  author  year  price      cover</span>
<span class="go">0   cooking   Everyday Italian     Giada De Laurentiis  2005  30.00       None</span>
<span class="go">1  children       Harry Potter            J K. Rowling  2005  29.99       None</span>
<span class="go">2       web  XQuery Kick Start  Vaidyanathan Nagarajan  2003  49.99       None</span>
<span class="go">3       web       Learning XML             Erik T. Ray  2003  39.95  paperback</span>
</pre></div>
</div>
<p>Read in the content of the â€œbooks.xmlâ€ file and pass it to <code class="docutils literal notranslate"><span class="pre">read_xml</span></code>
as a string:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [363]: </span><span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;books.xml&quot;</span>

<span class="gp">In [364]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [365]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....: </span>

<span class="gp">In [366]: </span><span class="n">df</span>
<span class="gh">Out[366]: </span><span class="go"></span>
<span class="go">   category             title               author  year  price</span>
<span class="go">0   cooking  Everyday Italian  Giada De Laurentiis  2005  30.00</span>
<span class="go">1  children      Harry Potter         J K. Rowling  2005  29.99</span>
<span class="go">2       web      Learning XML          Erik T. Ray  2003  39.95</span>
</pre></div>
</div>
<p>Read in the content of the â€œbooks.xmlâ€ as instance of <code class="docutils literal notranslate"><span class="pre">StringIO</span></code> or
<code class="docutils literal notranslate"><span class="pre">BytesIO</span></code> and pass it to <code class="docutils literal notranslate"><span class="pre">read_xml</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [367]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">sio</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....: </span>

<span class="gp">In [368]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">sio</span><span class="p">)</span>

<span class="gp">In [369]: </span><span class="n">df</span>
<span class="gh">Out[369]: </span><span class="go"></span>
<span class="go">   category             title               author  year  price</span>
<span class="go">0   cooking  Everyday Italian  Giada De Laurentiis  2005  30.00</span>
<span class="go">1  children      Harry Potter         J K. Rowling  2005  29.99</span>
<span class="go">2       web      Learning XML          Erik T. Ray  2003  39.95</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [370]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">bio</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....: </span>

<span class="gp">In [371]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">bio</span><span class="p">)</span>

<span class="gp">In [372]: </span><span class="n">df</span>
<span class="gh">Out[372]: </span><span class="go"></span>
<span class="go">   category             title               author  year  price</span>
<span class="go">0   cooking  Everyday Italian  Giada De Laurentiis  2005  30.00</span>
<span class="go">1  children      Harry Potter         J K. Rowling  2005  29.99</span>
<span class="go">2       web      Learning XML          Erik T. Ray  2003  39.95</span>
</pre></div>
</div>
<p>Even read XML from AWS S3 buckets such as NIH NCBI PMC Article Datasets providing
Biomedical and Life Science Jorurnals:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [373]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;s3://pmc-oa-opendata/oa_comm/xml/all/PMC1236943.xml&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;.//journal-meta&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [374]: </span><span class="n">df</span>
<span class="gh">Out[374]: </span><span class="go"></span>
<span class="go">              journal-id              journal-title       issn  publisher</span>
<span class="go">0  Cardiovasc Ultrasound  Cardiovascular Ultrasound  1476-7120        NaN</span>
</pre></div>
</div>
<p>With <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/">lxml</a> as default <code class="docutils literal notranslate"><span class="pre">parser</span></code>, you access the full-featured XML library
that extends Pythonâ€™s ElementTree API. One powerful tool is ability to query
nodes selectively or conditionally with more expressive XPath:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [375]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;//book[year=2005]&quot;</span><span class="p">)</span>

<span class="gp">In [376]: </span><span class="n">df</span>
<span class="gh">Out[376]: </span><span class="go"></span>
<span class="go">   category             title               author  year  price</span>
<span class="go">0   cooking  Everyday Italian  Giada De Laurentiis  2005  30.00</span>
<span class="go">1  children      Harry Potter         J K. Rowling  2005  29.99</span>
</pre></div>
</div>
<p>Specify only elements or only attributes to parse:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [377]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">elems_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [378]: </span><span class="n">df</span>
<span class="gh">Out[378]: </span><span class="go"></span>
<span class="go">              title               author  year  price</span>
<span class="go">0  Everyday Italian  Giada De Laurentiis  2005  30.00</span>
<span class="go">1      Harry Potter         J K. Rowling  2005  29.99</span>
<span class="go">2      Learning XML          Erik T. Ray  2003  39.95</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [379]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">attrs_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [380]: </span><span class="n">df</span>
<span class="gh">Out[380]: </span><span class="go"></span>
<span class="go">   category</span>
<span class="go">0   cooking</span>
<span class="go">1  children</span>
<span class="go">2       web</span>
</pre></div>
</div>
<p>XML documents can have namespaces with prefixes and default namespaces without
prefixes both of which are denoted with a special attribute <code class="docutils literal notranslate"><span class="pre">xmlns</span></code>. In order
to parse by node under a namespace context, <code class="docutils literal notranslate"><span class="pre">xpath</span></code> must reference a prefix.</p>
<p>For example, below XML contains a namespace with prefix, <code class="docutils literal notranslate"><span class="pre">doc</span></code>, and URI at
<code class="docutils literal notranslate"><span class="pre">https://example.com</span></code>. In order to parse <code class="docutils literal notranslate"><span class="pre">doc:row</span></code> nodes,
<code class="docutils literal notranslate"><span class="pre">namespaces</span></code> must be used.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [381]: </span><span class="n">xml</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;doc:data xmlns:doc=&quot;https://example.com&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;doc:row&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:shape&gt;square&lt;/doc:shape&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:degrees&gt;360&lt;/doc:degrees&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:sides&gt;4.0&lt;/doc:sides&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/doc:row&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;doc:row&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:shape&gt;circle&lt;/doc:shape&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:degrees&gt;360&lt;/doc:degrees&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:sides/&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/doc:row&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;doc:row&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:shape&gt;triangle&lt;/doc:shape&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:degrees&gt;180&lt;/doc:degrees&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;doc:sides&gt;3.0&lt;/doc:sides&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/doc:row&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;/doc:data&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [382]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span>
<span class="gp">   .....: </span>                 <span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;//doc:row&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>                 <span class="n">namespaces</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.com&quot;</span><span class="p">})</span>
<span class="gp">   .....: </span>

<span class="gp">In [383]: </span><span class="n">df</span>
<span class="gh">Out[383]: </span><span class="go"></span>
<span class="go">      shape  degrees  sides</span>
<span class="go">0    square      360    4.0</span>
<span class="go">1    circle      360    NaN</span>
<span class="go">2  triangle      180    3.0</span>
</pre></div>
</div>
<p>Similarly, an XML document can have a default namespace without prefix. Failing
to assign a temporary prefix will return no nodes and raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.
But assigning <em>any</em> temporary name to correct URI allows parsing by nodes.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [384]: </span><span class="n">xml</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;data xmlns=&quot;https://example.com&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;sides/&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2">&lt;/data&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [385]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span>
<span class="gp">   .....: </span>                 <span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;//pandas:row&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>                 <span class="n">namespaces</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pandas&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.com&quot;</span><span class="p">})</span>
<span class="gp">   .....: </span>

<span class="gp">In [386]: </span><span class="n">df</span>
<span class="gh">Out[386]: </span><span class="go"></span>
<span class="go">      shape  degrees  sides</span>
<span class="go">0    square      360    4.0</span>
<span class="go">1    circle      360    NaN</span>
<span class="go">2  triangle      180    3.0</span>
</pre></div>
</div>
<p>However, if XPath does not reference node names such as default, <code class="docutils literal notranslate"><span class="pre">/*</span></code>, then
<code class="docutils literal notranslate"><span class="pre">namespaces</span></code> is not required.</p>
<p>With <a class="reference external" href="javascript:if(confirm('https://lxml.de/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/'" tppabs="https://lxml.de/">lxml</a> as parser, you can flatten nested XML documents with an XSLT
script which also can be string/file/URL types. As background, <a class="reference external" href="javascript:if(confirm('https://www.w3.org/TR/xslt/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.w3.org/TR/xslt/'" tppabs="https://www.w3.org/TR/xslt/">XSLT</a> is
a special-purpose language written in a special XML file that can transform
original XML documents into other XML, HTML, even text (CSV, JSON, etc.)
using an XSLT processor.</p>
<p>For example, consider this somewhat nested structure of Chicago â€œLâ€ Rides
where station and rides elements encapsulate data in their own sections.
With below XSLT, <code class="docutils literal notranslate"><span class="pre">lxml</span></code> can transform original nested document into a flatter
output (as shown below for demonstration) for easier parse into <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [387]: </span><span class="n">xml</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;response&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;station id=&quot;40850&quot; name=&quot;Library&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;month&gt;2020-09-01T00:00:00&lt;/month&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_weekday_rides&gt;864.2&lt;/avg_weekday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_saturday_rides&gt;534&lt;/avg_saturday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_sunday_holiday_rides&gt;417.2&lt;/avg_sunday_holiday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;/rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;station id=&quot;41700&quot; name=&quot;Washington/Wabash&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;month&gt;2020-09-01T00:00:00&lt;/month&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_weekday_rides&gt;2707.4&lt;/avg_weekday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_saturday_rides&gt;1909.8&lt;/avg_saturday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_sunday_holiday_rides&gt;1438.6&lt;/avg_sunday_holiday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;/rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;station id=&quot;40380&quot; name=&quot;Clark/Lake&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;month&gt;2020-09-01T00:00:00&lt;/month&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_weekday_rides&gt;2949.6&lt;/avg_weekday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_saturday_rides&gt;1657&lt;/avg_saturday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_sunday_holiday_rides&gt;1453.8&lt;/avg_sunday_holiday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">    &lt;/rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">  &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/response&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [388]: </span><span class="n">xsl</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:output method=&quot;xml&quot; omit-xml-declaration=&quot;no&quot; indent=&quot;yes&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:strip-space elements=&quot;*&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:template match=&quot;/response&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;xsl:copy&gt;</span>
<span class="gp">   .....: </span><span class="s2">        &lt;xsl:apply-templates select=&quot;row&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;/xsl:copy&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/xsl:template&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:template match=&quot;row&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;xsl:copy&gt;</span>
<span class="gp">   .....: </span><span class="s2">        &lt;station_id&gt;&lt;xsl:value-of select=&quot;station/@id&quot;/&gt;&lt;/station_id&gt;</span>
<span class="gp">   .....: </span><span class="s2">        &lt;station_name&gt;&lt;xsl:value-of select=&quot;station/@name&quot;/&gt;&lt;/station_name&gt;</span>
<span class="gp">   .....: </span><span class="s2">        &lt;xsl:copy-of select=&quot;month|rides/*&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;/xsl:copy&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/xsl:template&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/xsl:stylesheet&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [389]: </span><span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;response&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;station_id&gt;40850&lt;/station_id&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;station_name&gt;Library&lt;/station_name&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;month&gt;2020-09-01T00:00:00&lt;/month&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_weekday_rides&gt;864.2&lt;/avg_weekday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_saturday_rides&gt;534&lt;/avg_saturday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_sunday_holiday_rides&gt;417.2&lt;/avg_sunday_holiday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;station_id&gt;41700&lt;/station_id&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;station_name&gt;Washington/Wabash&lt;/station_name&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;month&gt;2020-09-01T00:00:00&lt;/month&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_weekday_rides&gt;2707.4&lt;/avg_weekday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_saturday_rides&gt;1909.8&lt;/avg_saturday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_sunday_holiday_rides&gt;1438.6&lt;/avg_sunday_holiday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;row&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;station_id&gt;40380&lt;/station_id&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;station_name&gt;Clark/Lake&lt;/station_name&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;month&gt;2020-09-01T00:00:00&lt;/month&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_weekday_rides&gt;2949.6&lt;/avg_weekday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_saturday_rides&gt;1657&lt;/avg_saturday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">      &lt;avg_sunday_holiday_rides&gt;1453.8&lt;/avg_sunday_holiday_rides&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/row&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/response&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [390]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="n">stylesheet</span><span class="o">=</span><span class="n">xsl</span><span class="p">)</span>

<span class="gp">In [391]: </span><span class="n">df</span>
<span class="gh">Out[391]: </span><span class="go"></span>
<span class="go">   station_id       station_name  ... avg_saturday_rides  avg_sunday_holiday_rides</span>
<span class="go">0       40850            Library  ...              534.0                     417.2</span>
<span class="go">1       41700  Washington/Wabash  ...             1909.8                    1438.6</span>
<span class="go">2       40380         Clark/Lake  ...             1657.0                    1453.8</span>

<span class="go">[3 rows x 6 columns]</span>
</pre></div>
</div>
<p>For very large XML files that can range in hundreds of megabytes to gigabytes, <a class="reference internal" href="pandas.read_xml.html#pandas.read_xml" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_xml()</span></code></a>
supports parsing such sizeable files using <a class="reference external" href="javascript:if(confirm('https://lxml.de/3.2/parsing.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://lxml.de/3.2/parsing.html#iterparse-and-iterwalk'" tppabs="https://lxml.de/3.2/parsing.html#iterparse-and-iterwalk">lxmlâ€™s iterparse</a> and <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/xml.etree.elementtree.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse'" tppabs="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse">etreeâ€™s iterparse</a>
which are memory-efficient methods to iterate through an XML tree and extract specific elements and attributes.
without holding entire tree in memory.</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</div></blockquote>
<p>To use this feature, you must pass a physical XML file path into <code class="docutils literal notranslate"><span class="pre">read_xml</span></code> and use the <code class="docutils literal notranslate"><span class="pre">iterparse</span></code> argument.
Files should not be compressed or point to online sources but stored on local disk. Also, <code class="docutils literal notranslate"><span class="pre">iterparse</span></code> should be
a dictionary where the key is the repeating nodes in document (which become the rows) and the value is a list of
any element or attribute that is a descendant (i.e., child, grandchild) of repeating node. Since XPath is not
used in this method, descendants do not need to share same relationship with one another. Below shows example
of reading in Wikipediaâ€™s very large (12 GB+) latest article data dump.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span>
<span class="go">...         &quot;/path/to/downloaded/enwikisource-latest-pages-articles.xml&quot;,</span>
<span class="go">...         iterparse = {&quot;page&quot;: [&quot;title&quot;, &quot;ns&quot;, &quot;id&quot;]}</span>
<span class="go">...     )</span>
<span class="go">...     df</span>
<span class="gh">Out[2]:</span>
<span class="go">                                                     title   ns        id</span>
<span class="go">0                                       Gettysburg Address    0     21450</span>
<span class="go">1                                                Main Page    0     42950</span>
<span class="go">2                            Declaration by United Nations    0      8435</span>
<span class="go">3             Constitution of the United States of America    0      8435</span>
<span class="go">4                     Declaration of Independence (Israel)    0     17858</span>
<span class="go">...                                                    ...  ...       ...</span>
<span class="go">3578760               Page:Black cat 1897 07 v2 n10.pdf/17  104    219649</span>
<span class="go">3578761               Page:Black cat 1897 07 v2 n10.pdf/43  104    219649</span>
<span class="go">3578762               Page:Black cat 1897 07 v2 n10.pdf/44  104    219649</span>
<span class="go">3578763      The History of Tom Jones, a Foundling/Book IX    0  12084291</span>
<span class="go">3578764  Page:Shakespeare of Stratford (1926) Yale.djvu/91  104     21450</span>

<span class="go">[3578765 rows x 3 columns]</span>
</pre></div>
</div>
</section>
<section id="writing-xml">
<span id="io-xml"></span><h3>Writing XML<a class="headerlink" href="#writing-xml" title="Permalink to this headline">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects have an instance method <code class="docutils literal notranslate"><span class="pre">to_xml</span></code> which renders the
contents of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as an XML document.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method does not support special properties of XML including DTD,
CData, XSD schemas, processing instructions, comments, and others.
Only namespaces at the root level is supported. However, <code class="docutils literal notranslate"><span class="pre">stylesheet</span></code>
allows design changes after initial output.</p>
</div>
<p>Letâ€™s look at a few examples.</p>
<p>Write an XML without options:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [392]: </span><span class="n">geom_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="s2">&quot;triangle&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;degrees&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">360</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;sides&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [393]: </span><span class="nb">print</span><span class="p">(</span><span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">())</span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;data&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;0&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;1&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides/&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;2&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">&lt;/data&gt;</span>
</pre></div>
</div>
<p>Write an XML with new root and row name:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [394]: </span><span class="nb">print</span><span class="p">(</span><span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span> <span class="n">row_name</span><span class="o">=</span><span class="s2">&quot;objects&quot;</span><span class="p">))</span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;geometry&gt;</span>
<span class="go">  &lt;objects&gt;</span>
<span class="go">    &lt;index&gt;0&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="go">  &lt;/objects&gt;</span>
<span class="go">  &lt;objects&gt;</span>
<span class="go">    &lt;index&gt;1&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides/&gt;</span>
<span class="go">  &lt;/objects&gt;</span>
<span class="go">  &lt;objects&gt;</span>
<span class="go">    &lt;index&gt;2&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="go">  &lt;/objects&gt;</span>
<span class="go">&lt;/geometry&gt;</span>
</pre></div>
</div>
<p>Write an attribute-centric XML:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [395]: </span><span class="nb">print</span><span class="p">(</span><span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">attr_cols</span><span class="o">=</span><span class="n">geom_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;data&gt;</span>
<span class="go">  &lt;row index=&quot;0&quot; shape=&quot;square&quot; degrees=&quot;360&quot; sides=&quot;4.0&quot;/&gt;</span>
<span class="go">  &lt;row index=&quot;1&quot; shape=&quot;circle&quot; degrees=&quot;360&quot;/&gt;</span>
<span class="go">  &lt;row index=&quot;2&quot; shape=&quot;triangle&quot; degrees=&quot;180&quot; sides=&quot;3.0&quot;/&gt;</span>
<span class="go">&lt;/data&gt;</span>
</pre></div>
</div>
<p>Write a mix of elements and attributes:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [396]: </span><span class="nb">print</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span>
<span class="gp">   .....: </span>        <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="n">attr_cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="n">elem_cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;degrees&#39;</span><span class="p">,</span> <span class="s1">&#39;sides&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;data&gt;</span>
<span class="go">  &lt;row shape=&quot;square&quot;&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row shape=&quot;circle&quot;&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides/&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row shape=&quot;triangle&quot;&gt;</span>
<span class="go">    &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">&lt;/data&gt;</span>
</pre></div>
</div>
<p>Any <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code> with hierarchical columns will be flattened for XML element names
with levels delimited by underscores:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [397]: </span><span class="n">ext_geom_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;other&quot;</span><span class="p">,</span> <span class="s2">&quot;polygon&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="s2">&quot;triangle&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;degrees&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">360</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;sides&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [398]: </span><span class="n">pvt_df</span> <span class="o">=</span> <span class="n">ext_geom_df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                                 <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;type&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                                 <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;degrees&#39;</span><span class="p">,</span> <span class="s1">&#39;sides&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                                 <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [399]: </span><span class="n">pvt_df</span>
<span class="gh">Out[399]: </span><span class="go"></span>
<span class="go">         degrees         sides        </span>
<span class="go">type       other polygon other polygon</span>
<span class="go">shape                                 </span>
<span class="go">circle     360.0     NaN   0.0     NaN</span>
<span class="go">square       NaN   360.0   NaN     4.0</span>
<span class="go">triangle     NaN   180.0   NaN     3.0</span>

<span class="gp">In [400]: </span><span class="nb">print</span><span class="p">(</span><span class="n">pvt_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">())</span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;data&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees_other&gt;360.0&lt;/degrees_other&gt;</span>
<span class="go">    &lt;degrees_polygon/&gt;</span>
<span class="go">    &lt;sides_other&gt;0.0&lt;/sides_other&gt;</span>
<span class="go">    &lt;sides_polygon/&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="go">    &lt;degrees_other/&gt;</span>
<span class="go">    &lt;degrees_polygon&gt;360.0&lt;/degrees_polygon&gt;</span>
<span class="go">    &lt;sides_other/&gt;</span>
<span class="go">    &lt;sides_polygon&gt;4.0&lt;/sides_polygon&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees_other/&gt;</span>
<span class="go">    &lt;degrees_polygon&gt;180.0&lt;/degrees_polygon&gt;</span>
<span class="go">    &lt;sides_other/&gt;</span>
<span class="go">    &lt;sides_polygon&gt;3.0&lt;/sides_polygon&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">&lt;/data&gt;</span>
</pre></div>
</div>
<p>Write an XML with default namespace:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [401]: </span><span class="nb">print</span><span class="p">(</span><span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">namespaces</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.com&quot;</span><span class="p">}))</span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;data xmlns=&quot;https://example.com&quot;&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;0&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;1&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides/&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;2&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">&lt;/data&gt;</span>
</pre></div>
</div>
<p>Write an XML with namespace prefix:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [402]: </span><span class="nb">print</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">namespaces</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.com&quot;</span><span class="p">},</span>
<span class="gp">   .....: </span>                   <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;doc&quot;</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span class="go">&lt;doc:data xmlns:doc=&quot;https://example.com&quot;&gt;</span>
<span class="go">  &lt;doc:row&gt;</span>
<span class="go">    &lt;doc:index&gt;0&lt;/doc:index&gt;</span>
<span class="go">    &lt;doc:shape&gt;square&lt;/doc:shape&gt;</span>
<span class="go">    &lt;doc:degrees&gt;360&lt;/doc:degrees&gt;</span>
<span class="go">    &lt;doc:sides&gt;4.0&lt;/doc:sides&gt;</span>
<span class="go">  &lt;/doc:row&gt;</span>
<span class="go">  &lt;doc:row&gt;</span>
<span class="go">    &lt;doc:index&gt;1&lt;/doc:index&gt;</span>
<span class="go">    &lt;doc:shape&gt;circle&lt;/doc:shape&gt;</span>
<span class="go">    &lt;doc:degrees&gt;360&lt;/doc:degrees&gt;</span>
<span class="go">    &lt;doc:sides/&gt;</span>
<span class="go">  &lt;/doc:row&gt;</span>
<span class="go">  &lt;doc:row&gt;</span>
<span class="go">    &lt;doc:index&gt;2&lt;/doc:index&gt;</span>
<span class="go">    &lt;doc:shape&gt;triangle&lt;/doc:shape&gt;</span>
<span class="go">    &lt;doc:degrees&gt;180&lt;/doc:degrees&gt;</span>
<span class="go">    &lt;doc:sides&gt;3.0&lt;/doc:sides&gt;</span>
<span class="go">  &lt;/doc:row&gt;</span>
<span class="go">&lt;/doc:data&gt;</span>
</pre></div>
</div>
<p>Write an XML without declaration or pretty print:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [403]: </span><span class="nb">print</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">xml_declaration</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">   .....: </span>                   <span class="n">pretty_print</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">&lt;data&gt;&lt;row&gt;&lt;index&gt;0&lt;/index&gt;&lt;shape&gt;square&lt;/shape&gt;&lt;degrees&gt;360&lt;/degrees&gt;&lt;sides&gt;4.0&lt;/sides&gt;&lt;/row&gt;&lt;row&gt;&lt;index&gt;1&lt;/index&gt;&lt;shape&gt;circle&lt;/shape&gt;&lt;degrees&gt;360&lt;/degrees&gt;&lt;sides/&gt;&lt;/row&gt;&lt;row&gt;&lt;index&gt;2&lt;/index&gt;&lt;shape&gt;triangle&lt;/shape&gt;&lt;degrees&gt;180&lt;/degrees&gt;&lt;sides&gt;3.0&lt;/sides&gt;&lt;/row&gt;&lt;/data&gt;</span>
</pre></div>
</div>
<p>Write an XML and transform with stylesheet:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [404]: </span><span class="n">xsl</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:output method=&quot;xml&quot; omit-xml-declaration=&quot;no&quot; indent=&quot;yes&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:strip-space elements=&quot;*&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:template match=&quot;/data&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">     &lt;geometry&gt;</span>
<span class="gp">   .....: </span><span class="s2">       &lt;xsl:apply-templates select=&quot;row&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">     &lt;/geometry&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/xsl:template&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;xsl:template match=&quot;row&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">     &lt;object index=&quot;</span><span class="si">{index}</span><span class="s2">&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">       &lt;xsl:if test=&quot;shape!=&#39;circle&#39;&quot;&gt;</span>
<span class="gp">   .....: </span><span class="s2">           &lt;xsl:attribute name=&quot;type&quot;&gt;polygon&lt;/xsl:attribute&gt;</span>
<span class="gp">   .....: </span><span class="s2">       &lt;/xsl:if&gt;</span>
<span class="gp">   .....: </span><span class="s2">       &lt;xsl:copy-of select=&quot;shape&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">       &lt;property&gt;</span>
<span class="gp">   .....: </span><span class="s2">           &lt;xsl:copy-of select=&quot;degrees|sides&quot;/&gt;</span>
<span class="gp">   .....: </span><span class="s2">       &lt;/property&gt;</span>
<span class="gp">   .....: </span><span class="s2">     &lt;/object&gt;</span>
<span class="gp">   .....: </span><span class="s2">   &lt;/xsl:template&gt;</span>
<span class="gp">   .....: </span><span class="s2"> &lt;/xsl:stylesheet&gt;&quot;&quot;&quot;</span>
<span class="gp">   .....: </span>

<span class="gp">In [405]: </span><span class="nb">print</span><span class="p">(</span><span class="n">geom_df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">stylesheet</span><span class="o">=</span><span class="n">xsl</span><span class="p">))</span>
<span class="go">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="go">&lt;geometry&gt;</span>
<span class="go">  &lt;object index=&quot;0&quot; type=&quot;polygon&quot;&gt;</span>
<span class="go">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="go">    &lt;property&gt;</span>
<span class="go">      &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">      &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="go">    &lt;/property&gt;</span>
<span class="go">  &lt;/object&gt;</span>
<span class="go">  &lt;object index=&quot;1&quot;&gt;</span>
<span class="go">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="go">    &lt;property&gt;</span>
<span class="go">      &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">      &lt;sides/&gt;</span>
<span class="go">    &lt;/property&gt;</span>
<span class="go">  &lt;/object&gt;</span>
<span class="go">  &lt;object index=&quot;2&quot; type=&quot;polygon&quot;&gt;</span>
<span class="go">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="go">    &lt;property&gt;</span>
<span class="go">      &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="go">      &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="go">    &lt;/property&gt;</span>
<span class="go">  &lt;/object&gt;</span>
<span class="go">&lt;/geometry&gt;</span>
</pre></div>
</div>
</section>
<section id="xml-final-notes">
<h3>XML Final Notes<a class="headerlink" href="#xml-final-notes" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>All XML documents adhere to <a class="reference external" href="javascript:if(confirm('https://www.w3.org/TR/xml/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.w3.org/TR/xml/'" tppabs="https://www.w3.org/TR/xml/">W3C specifications</a>. Both <code class="docutils literal notranslate"><span class="pre">etree</span></code> and <code class="docutils literal notranslate"><span class="pre">lxml</span></code>
parsers will fail to parse any markup document that is not well-formed or
follows XML syntax rules. Do be aware HTML is not an XML document unless it
follows XHTML specs. However, other popular markup types including KML, XAML,
RSS, MusicML, MathML are compliant <a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/List_of_types_of_XML_schemas  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/List_of_types_of_XML_schemas'" tppabs="https://en.wikipedia.org/wiki/List_of_types_of_XML_schemas">XML schemas</a>.</p></li>
<li><p>For above reason, if your application builds XML prior to pandas operations,
use appropriate DOM libraries like <code class="docutils literal notranslate"><span class="pre">etree</span></code> and <code class="docutils literal notranslate"><span class="pre">lxml</span></code> to build the necessary
document and not by string concatenation or regex adjustments. Always remember
XML is a <em>special</em> text file with markup rules.</p></li>
<li><p>With very large XML files (several hundred MBs to GBs), XPath and XSLT
can become memory-intensive operations. Be sure to have enough available
RAM for reading and writing to large XML files (roughly about 5 times the
size of text).</p></li>
<li><p>Because XSLT is a programming language, use it with caution since such scripts
can pose a security risk in your environment and can run large or infinite
recursive operations. Always test scripts on small fragments before full run.</p></li>
<li><p>The <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/xml.etree.elementtree.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/xml.etree.elementtree.html'" tppabs="https://docs.python.org/3/library/xml.etree.elementtree.html">etree</a> parser supports all functionality of both <code class="docutils literal notranslate"><span class="pre">read_xml</span></code> and
<code class="docutils literal notranslate"><span class="pre">to_xml</span></code> except for complex XPath and any XSLT. Though limited in features,
<code class="docutils literal notranslate"><span class="pre">etree</span></code> is still a reliable and capable parser and tree builder. Its
performance may trail <code class="docutils literal notranslate"><span class="pre">lxml</span></code> to a certain degree for larger files but
relatively unnoticeable on small to medium size files.</p></li>
</ul>
</section>
</section>
<section id="excel-files">
<span id="io-excel"></span><h2>Excel files<a class="headerlink" href="#excel-files" title="Permalink to this headline">#</a></h2>
<p>The <a class="reference internal" href="pandas.read_excel.html#pandas.read_excel" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> method can read Excel 2007+ (<code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>) files
using the <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> Python module. Excel 2003 (<code class="docutils literal notranslate"><span class="pre">.xls</span></code>) files
can be read using <code class="docutils literal notranslate"><span class="pre">xlrd</span></code>. Binary Excel (<code class="docutils literal notranslate"><span class="pre">.xlsb</span></code>)
files can be read using <code class="docutils literal notranslate"><span class="pre">pyxlsb</span></code>.
The <a class="reference internal" href="pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_excel()</span></code></a> instance method is used for
saving a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to Excel. Generally the semantics are
similar to working with <a class="reference internal" href="#io-read-csv-table"><span class="std std-ref">csv</span></a> data.
See the <a class="reference internal" href="cookbook.html#cookbook-excel" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html#cookbook-excel"><span class="std std-ref">cookbook</span></a> for some advanced strategies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference external" href="javascript:if(confirm('https://xlwt.readthedocs.io/en/latest/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlwt.readthedocs.io/en/latest/'" tppabs="https://xlwt.readthedocs.io/en/latest/">xlwt</a> package for writing old-style <code class="docutils literal notranslate"><span class="pre">.xls</span></code>
excel files is no longer maintained.
The <a class="reference external" href="javascript:if(confirm('https://xlrd.readthedocs.io/en/latest/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlrd.readthedocs.io/en/latest/'" tppabs="https://xlrd.readthedocs.io/en/latest/">xlrd</a> package is now only for reading
old-style <code class="docutils literal notranslate"><span class="pre">.xls</span></code> files.</p>
<p>Before pandas 1.3.0, the default argument <code class="docutils literal notranslate"><span class="pre">engine=None</span></code> to <a class="reference internal" href="pandas.read_excel.html#pandas.read_excel" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a>
would result in using the <code class="docutils literal notranslate"><span class="pre">xlrd</span></code> engine in many cases, including new
Excel 2007+ (<code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>) files. pandas will now default to using the
<a class="reference external" href="javascript:if(confirm('https://openpyxl.readthedocs.io/en/stable/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://openpyxl.readthedocs.io/en/stable/'" tppabs="https://openpyxl.readthedocs.io/en/stable/">openpyxl</a> engine.</p>
<p>It is strongly encouraged to install <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> to read Excel 2007+
(<code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>) files.
<strong>Please do not report issues when using ``xlrd`` to read ``.xlsx`` files.</strong>
This is no longer supported, switch to using <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> instead.</p>
<p>Attempting to use the <code class="docutils literal notranslate"><span class="pre">xlwt</span></code> engine will raise a <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>
unless the option <code class="xref py py-attr docutils literal notranslate"><span class="pre">io.excel.xls.writer</span></code> is set to <code class="docutils literal notranslate"><span class="pre">&quot;xlwt&quot;</span></code>.
While this option is now deprecated and will also raise a <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>,
it can be globally set and the warning suppressed. Users are recommended to
write <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> files using the <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> engine instead.</p>
</div>
<section id="reading-excel-files">
<span id="io-excel-reader"></span><h3>Reading Excel files<a class="headerlink" href="#reading-excel-files" title="Permalink to this headline">#</a></h3>
<p>In the most basic use-case, <code class="docutils literal notranslate"><span class="pre">read_excel</span></code> takes a path to an Excel
file, and the <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code> indicating which sheet to parse.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="excelfile-class">
<span id="io-excel-excelfile-class"></span><h4><code class="docutils literal notranslate"><span class="pre">ExcelFile</span></code> class<a class="headerlink" href="#excelfile-class" title="Permalink to this headline">#</a></h4>
<p>To facilitate working with multiple sheets from the same file, the <code class="docutils literal notranslate"><span class="pre">ExcelFile</span></code>
class can be used to wrap the file and can be passed into <code class="docutils literal notranslate"><span class="pre">read_excel</span></code>
There will be a performance benefit for reading multiple sheets as the file is
read into memory only once.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xlsx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xlsx</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ExcelFile</span></code> class can also be used as a context manager.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sheet_names</span></code> property will generate
a list of the sheet names in the file.</p>
<p>The primary use-case for an <code class="docutils literal notranslate"><span class="pre">ExcelFile</span></code> is parsing multiple sheets with
different parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># For when Sheet1&#39;s format differs from Sheet2</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">])</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Sheet2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet2&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that if the same parsing parameters are used for all sheets, a list
of sheet names can simply be passed to <code class="docutils literal notranslate"><span class="pre">read_excel</span></code> with no loss in performance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># using the ExcelFile class</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">])</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Sheet2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet2&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">])</span>

<span class="c1"># equivalent using the read_excel function</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span>
    <span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet2&quot;</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ExcelFile</span></code> can also be called with a <code class="docutils literal notranslate"><span class="pre">xlrd.book.Book</span></code> object
as a parameter. This allows the user to control how the excel file is read.
For example, sheets can be loaded on demand by calling <code class="docutils literal notranslate"><span class="pre">xlrd.open_workbook()</span></code>
with <code class="docutils literal notranslate"><span class="pre">on_demand=True</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xlrd</span>

<span class="n">xlrd_book</span> <span class="o">=</span> <span class="n">xlrd</span><span class="o">.</span><span class="n">open_workbook</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="n">on_demand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="n">xlrd_book</span><span class="p">)</span> <span class="k">as</span> <span class="n">xls</span><span class="p">:</span>
    <span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xls</span><span class="p">,</span> <span class="s2">&quot;Sheet2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="specifying-sheets">
<span id="io-excel-specifying-sheets"></span><h4>Specifying sheets<a class="headerlink" href="#specifying-sheets" title="Permalink to this headline">#</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The second argument is <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code>, not to be confused with <code class="docutils literal notranslate"><span class="pre">ExcelFile.sheet_names</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An ExcelFileâ€™s attribute <code class="docutils literal notranslate"><span class="pre">sheet_names</span></code> provides access to a list of sheets.</p>
</div>
<ul class="simple">
<li><p>The arguments <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code> allows specifying the sheet or sheets to read.</p></li>
<li><p>The default value for <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code> is 0, indicating to read the first sheet</p></li>
<li><p>Pass a string to refer to the name of a particular sheet in the workbook.</p></li>
<li><p>Pass an integer to refer to the index of a sheet. Indices follow Python
convention, beginning at 0.</p></li>
<li><p>Pass a list of either strings or integers, to return a dictionary of specified sheets.</p></li>
<li><p>Pass a <code class="docutils literal notranslate"><span class="pre">None</span></code> to return a dictionary of all available sheets.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Using the sheet index:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NA&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Using all default values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using None to get all sheets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a dictionary of DataFrames</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Using a list to get multiple sheets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns the 1st and 4th sheet, as a dictionary of DataFrames.</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">read_excel</span></code> can read more than one sheet, by setting <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code> to either
a list of sheet names, a list of sheet positions, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to read all sheets.
Sheets can be specified by sheet index or sheet name, using an integer or string,
respectively.</p>
</section>
<section id="reading-a-multiindex">
<span id="io-excel-reading-multiindex"></span><h4>Reading a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code><a class="headerlink" href="#reading-a-multiindex" title="Permalink to this headline">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">read_excel</span></code> can read a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> index, by passing a list of columns to <code class="docutils literal notranslate"><span class="pre">index_col</span></code>
and a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> column by passing a list of rows to <code class="docutils literal notranslate"><span class="pre">header</span></code>. If either the <code class="docutils literal notranslate"><span class="pre">index</span></code>
or <code class="docutils literal notranslate"><span class="pre">columns</span></code> have serialized level names those will be read in as well by specifying
the rows/columns that make up the levels.</p>
<p>For example, to read in a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> index without names:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [406]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]},</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]]),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [407]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">)</span>

<span class="gp">In [408]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [409]: </span><span class="n">df</span>
<span class="gh">Out[409]: </span><span class="go"></span>
<span class="go">     a  b</span>
<span class="go">a c  1  5</span>
<span class="go">  d  2  6</span>
<span class="go">b c  3  7</span>
<span class="go">  d  4  8</span>
</pre></div>
</div>
<p>If the index has level names, they will parsed as well, using the same
parameters.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [410]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">set_names</span><span class="p">([</span><span class="s2">&quot;lvl1&quot;</span><span class="p">,</span> <span class="s2">&quot;lvl2&quot;</span><span class="p">])</span>

<span class="gp">In [411]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">)</span>

<span class="gp">In [412]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [413]: </span><span class="n">df</span>
<span class="gh">Out[413]: </span><span class="go"></span>
<span class="go">           a  b</span>
<span class="go">lvl1 lvl2      </span>
<span class="go">a    c     1  5</span>
<span class="go">     d     2  6</span>
<span class="go">b    c     3  7</span>
<span class="go">     d     4  8</span>
</pre></div>
</div>
<p>If the source file has both <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> index and columns, lists specifying each
should be passed to <code class="docutils literal notranslate"><span class="pre">index_col</span></code> and <code class="docutils literal notranslate"><span class="pre">header</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [414]: </span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">])</span>

<span class="gp">In [415]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">)</span>

<span class="gp">In [416]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [417]: </span><span class="n">df</span>
<span class="gh">Out[417]: </span><span class="go"></span>
<span class="go">c1         a   </span>
<span class="go">c2         b  d</span>
<span class="go">lvl1 lvl2      </span>
<span class="go">a    c     1  5</span>
<span class="go">     d     2  6</span>
<span class="go">b    c     3  7</span>
<span class="go">     d     4  8</span>
</pre></div>
</div>
<p>Missing values in columns specified in <code class="docutils literal notranslate"><span class="pre">index_col</span></code> will be forward filled to
allow roundtripping with <code class="docutils literal notranslate"><span class="pre">to_excel</span></code> for <code class="docutils literal notranslate"><span class="pre">merged_cells=True</span></code>. To avoid forward
filling the missing values use <code class="docutils literal notranslate"><span class="pre">set_index</span></code> after reading the data instead of
<code class="docutils literal notranslate"><span class="pre">index_col</span></code>.</p>
</section>
<section id="parsing-specific-columns">
<h4>Parsing specific columns<a class="headerlink" href="#parsing-specific-columns" title="Permalink to this headline">#</a></h4>
<p>It is often the case that users will insert columns to do temporary computations
in Excel and you may not want to read in those columns. <code class="docutils literal notranslate"><span class="pre">read_excel</span></code> takes
a <code class="docutils literal notranslate"><span class="pre">usecols</span></code> keyword to allow you to specify a subset of columns to parse.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.0.0.</span></p>
</div>
<p>Passing in an integer for <code class="docutils literal notranslate"><span class="pre">usecols</span></code> will no longer work. Please pass in a list
of ints from 0 to <code class="docutils literal notranslate"><span class="pre">usecols</span></code> inclusive instead.</p>
<p>You can specify a comma-delimited set of Excel columns and ranges as a string:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="s2">&quot;A,C:E&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">usecols</span></code> is a list of integers, then it is assumed to be the file column
indices to be parsed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>Element order is ignored, so <code class="docutils literal notranslate"><span class="pre">usecols=[0,</span> <span class="pre">1]</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0]</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">usecols</span></code> is a list of strings, it is assumed that each string corresponds
to a column name provided either by the user in <code class="docutils literal notranslate"><span class="pre">names</span></code> or inferred from the
document header row(s). Those strings define which columns will be parsed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Element order is ignored, so <code class="docutils literal notranslate"><span class="pre">usecols=['baz',</span> <span class="pre">'joe']</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">['joe',</span> <span class="pre">'baz']</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">usecols</span></code> is callable, the callable function will be evaluated against
the column names, returning names where the callable function evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isalpha</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="parsing-dates">
<h4>Parsing dates<a class="headerlink" href="#parsing-dates" title="Permalink to this headline">#</a></h4>
<p>Datetime-like values are normally automatically converted to the appropriate
dtype when reading the excel file. But if you have a column of strings that
<em>look</em> like dates (but are not actually formatted as dates in excel), you can
use the <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> keyword to parse those strings to datetimes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;date_strings&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="cell-converters">
<h4>Cell converters<a class="headerlink" href="#cell-converters" title="Permalink to this headline">#</a></h4>
<p>It is possible to transform the contents of Excel cells via the <code class="docutils literal notranslate"><span class="pre">converters</span></code>
option. For instance, to convert a column to boolean:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;MyBools&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">})</span>
</pre></div>
</div>
<p>This options handles missing values and treats exceptions in the converters
as missing data. Transformations are applied cell by cell rather than to the
column as a whole, so the array dtype is not guaranteed. For instance, a
column of integers with missing values cannot be transformed to an array
with integer dtype, because NaN is strictly a float. You can manually mask
missing data to recover integer dtype:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cfun</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>


<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;MyInts&quot;</span><span class="p">:</span> <span class="n">cfun</span><span class="p">})</span>
</pre></div>
</div>
</section>
<section id="dtype-specifications">
<h4>Dtype specifications<a class="headerlink" href="#dtype-specifications" title="Permalink to this headline">#</a></h4>
<p>As an alternative to converters, the type for an entire column can
be specified using the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> keyword, which takes a dictionary
mapping column names to types. To interpret data with
no type inference, use the type <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xls&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;MyInts&quot;</span><span class="p">:</span> <span class="s2">&quot;int64&quot;</span><span class="p">,</span> <span class="s2">&quot;MyText&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="writing-excel-files">
<span id="io-excel-writer"></span><h3>Writing Excel files<a class="headerlink" href="#writing-excel-files" title="Permalink to this headline">#</a></h3>
<section id="writing-excel-files-to-disk">
<h4>Writing Excel files to disk<a class="headerlink" href="#writing-excel-files-to-disk" title="Permalink to this headline">#</a></h4>
<p>To write a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object to a sheet of an Excel file, you can use the
<code class="docutils literal notranslate"><span class="pre">to_excel</span></code> instance method. The arguments are largely the same as <code class="docutils literal notranslate"><span class="pre">to_csv</span></code>
described above, the first argument being the name of the excel file, and the
optional second argument the name of the sheet to which the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> should be
written. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Files with a <code class="docutils literal notranslate"><span class="pre">.xls</span></code> extension will be written using <code class="docutils literal notranslate"><span class="pre">xlwt</span></code> and those with a
<code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> extension will be written using <code class="docutils literal notranslate"><span class="pre">xlsxwriter</span></code> (if available) or
<code class="docutils literal notranslate"><span class="pre">openpyxl</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> will be written in a way that tries to mimic the REPL output.
The <code class="docutils literal notranslate"><span class="pre">index_label</span></code> will be placed in the second
row instead of the first. You can place it in the first row by setting the
<code class="docutils literal notranslate"><span class="pre">merge_cells</span></code> option in <code class="docutils literal notranslate"><span class="pre">to_excel()</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">index_label</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="n">merge_cells</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to write separate <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code> to separate sheets in a single Excel file,
one can pass an <code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
    <span class="n">df1</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
    <span class="n">df2</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="writing-excel-files-to-memory">
<span id="io-excel-writing-buffer"></span><h4>Writing Excel files to memory<a class="headerlink" href="#writing-excel-files-to-memory" title="Permalink to this headline">#</a></h4>
<p>pandas supports writing Excel files to buffer-like objects such as <code class="docutils literal notranslate"><span class="pre">StringIO</span></code> or
<code class="docutils literal notranslate"><span class="pre">BytesIO</span></code> using <code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

<span class="n">bio</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>

<span class="c1"># By setting the &#39;engine&#39; in the ExcelWriter constructor.</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">bio</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;xlsxwriter&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>

<span class="c1"># Save the workbook</span>
<span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c1"># Seek to the beginning and read to copy the workbook to a variable in memory</span>
<span class="n">bio</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">workbook</span> <span class="o">=</span> <span class="n">bio</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">engine</span></code> is optional but recommended. Setting the engine determines
the version of workbook produced. Setting <code class="docutils literal notranslate"><span class="pre">engine='xlrd'</span></code> will produce an
Excel 2003-format workbook (xls). Using either <code class="docutils literal notranslate"><span class="pre">'openpyxl'</span></code> or
<code class="docutils literal notranslate"><span class="pre">'xlsxwriter'</span></code> will produce an Excel 2007-format workbook (xlsx). If
omitted, an Excel 2007-formatted workbook is produced.</p>
</div>
</section>
</section>
<section id="excel-writer-engines">
<span id="io-excel-writers"></span><h3>Excel writer engines<a class="headerlink" href="#excel-writer-engines" title="Permalink to this headline">#</a></h3>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.2.0: </span>As the <a class="reference external" href="javascript:if(confirm('https://pypi.org/project/xlwt/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pypi.org/project/xlwt/'" tppabs="https://pypi.org/project/xlwt/">xlwt</a> package is no longer
maintained, the <code class="docutils literal notranslate"><span class="pre">xlwt</span></code> engine will be removed from a future version
of pandas. This is the only engine in pandas that supports writing to
<code class="docutils literal notranslate"><span class="pre">.xls</span></code> files.</p>
</div>
<p>pandas chooses an Excel writer via two methods:</p>
<ol class="arabic simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">engine</span></code> keyword argument</p></li>
<li><p>the filename extension (via the default specified in config options)</p></li>
</ol>
<p>By default, pandas uses the <a class="reference external" href="javascript:if(confirm('https://xlsxwriter.readthedocs.io/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlsxwriter.readthedocs.io/'" tppabs="https://xlsxwriter.readthedocs.io/">XlsxWriter</a> for <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>, <a class="reference external" href="javascript:if(confirm('https://openpyxl.readthedocs.io/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://openpyxl.readthedocs.io/'" tppabs="https://openpyxl.readthedocs.io/">openpyxl</a>
for <code class="docutils literal notranslate"><span class="pre">.xlsm</span></code>, and <a class="reference external" href="javascript:if(confirm('http://www.python-excel.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.python-excel.org/'" tppabs="http://www.python-excel.org/">xlwt</a> for <code class="docutils literal notranslate"><span class="pre">.xls</span></code> files. If you have multiple
engines installed, you can set the default engine through <a class="reference internal" href="options.html#options" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html#options"><span class="std std-ref">setting the
config options</span></a> <code class="docutils literal notranslate"><span class="pre">io.excel.xlsx.writer</span></code> and
<code class="docutils literal notranslate"><span class="pre">io.excel.xls.writer</span></code>. pandas will fall back on <a class="reference external" href="javascript:if(confirm('https://openpyxl.readthedocs.io/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://openpyxl.readthedocs.io/'" tppabs="https://openpyxl.readthedocs.io/">openpyxl</a> for <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>
files if <a class="reference external" href="javascript:if(confirm('https://xlsxwriter.readthedocs.io/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlsxwriter.readthedocs.io/'" tppabs="https://xlsxwriter.readthedocs.io/">Xlsxwriter</a> is not available.</p>
<p>To specify which writer you want to use, you can pass an engine keyword
argument to <code class="docutils literal notranslate"><span class="pre">to_excel</span></code> and to <code class="docutils literal notranslate"><span class="pre">ExcelWriter</span></code>. The built-in engines are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">openpyxl</span></code>: version 2.4 or higher is required</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xlsxwriter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xlwt</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># By setting the &#39;engine&#39; in the DataFrame &#39;to_excel()&#39; methods.</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;xlsxwriter&quot;</span><span class="p">)</span>

<span class="c1"># By setting the &#39;engine&#39; in the ExcelWriter constructor.</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;xlsxwriter&quot;</span><span class="p">)</span>

<span class="c1"># Or via pandas configuration.</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">options</span>  <span class="c1"># noqa: E402</span>

<span class="n">options</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">excel</span><span class="o">.</span><span class="n">xlsx</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="s2">&quot;xlsxwriter&quot;</span>

<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsx&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="style-and-formatting">
<span id="io-excel-style"></span><h3>Style and formatting<a class="headerlink" href="#style-and-formatting" title="Permalink to this headline">#</a></h3>
<p>The look and feel of Excel worksheets created from pandas can be modified using the following parameters on the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>â€™s <code class="docutils literal notranslate"><span class="pre">to_excel</span></code> method.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">float_format</span></code> : Format string for floating point numbers (default <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">freeze_panes</span></code> : A tuple of two integers representing the bottommost row and rightmost column to freeze. Each of these parameters is one-based, so (1, 1) will freeze the first row and first column (default <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
</ul>
<p>Using the <a class="reference external" href="javascript:if(confirm('https://xlsxwriter.readthedocs.io/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlsxwriter.readthedocs.io/'" tppabs="https://xlsxwriter.readthedocs.io/">Xlsxwriter</a> engine provides many options for controlling the
format of an Excel worksheet created with the <code class="docutils literal notranslate"><span class="pre">to_excel</span></code> method. Excellent examples can be found in the
<a class="reference external" href="javascript:if(confirm('https://xlsxwriter.readthedocs.io/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlsxwriter.readthedocs.io/'" tppabs="https://xlsxwriter.readthedocs.io/">Xlsxwriter</a> documentation here: <a class="reference external" href="javascript:if(confirm('https://xlsxwriter.readthedocs.io/working_with_pandas.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xlsxwriter.readthedocs.io/working_with_pandas.html'" tppabs="https://xlsxwriter.readthedocs.io/working_with_pandas.html">https://xlsxwriter.readthedocs.io/working_with_pandas.html</a></p>
</section>
</section>
<section id="opendocument-spreadsheets">
<span id="io-ods"></span><h2>OpenDocument Spreadsheets<a class="headerlink" href="#opendocument-spreadsheets" title="Permalink to this headline">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.</span></p>
</div>
<p>The <a class="reference internal" href="pandas.read_excel.html#pandas.read_excel" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> method can also read OpenDocument spreadsheets
using the <code class="docutils literal notranslate"><span class="pre">odfpy</span></code> module. The semantics and features for reading
OpenDocument spreadsheets match what can be done for <a class="reference internal" href="#excel-files">Excel files</a> using
<code class="docutils literal notranslate"><span class="pre">engine='odf'</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.ods&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;odf&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently pandas only supports <em>reading</em> OpenDocument spreadsheets. Writing
is not implemented.</p>
</div>
</section>
<section id="binary-excel-xlsb-files">
<span id="io-xlsb"></span><h2>Binary Excel (.xlsb) files<a class="headerlink" href="#binary-excel-xlsb-files" title="Permalink to this headline">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0.</span></p>
</div>
<p>The <a class="reference internal" href="pandas.read_excel.html#pandas.read_excel" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> method can also read binary Excel files
using the <code class="docutils literal notranslate"><span class="pre">pyxlsb</span></code> module. The semantics and features for reading
binary Excel files mostly match what can be done for <a class="reference internal" href="#excel-files">Excel files</a> using
<code class="docutils literal notranslate"><span class="pre">engine='pyxlsb'</span></code>. <code class="docutils literal notranslate"><span class="pre">pyxlsb</span></code> does not recognize datetime types
in files and will return floats instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns a DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;path_to_file.xlsb&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyxlsb&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently pandas only supports <em>reading</em> binary Excel files. Writing
is not implemented.</p>
</div>
</section>
<section id="clipboard">
<span id="io-clipboard"></span><h2>Clipboard<a class="headerlink" href="#clipboard" title="Permalink to this headline">#</a></h2>
<p>A handy way to grab data is to use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">read_clipboard()</span></code> method,
which takes the contents of the clipboard buffer and passes them to the
<code class="docutils literal notranslate"><span class="pre">read_csv</span></code> method. For instance, you can copy the following text to the
clipboard (CTRL-C on many operating systems):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">  A B C</span>
<span class="go">x 1 4 p</span>
<span class="go">y 2 5 q</span>
<span class="go">z 3 6 r</span>
</pre></div>
</div>
<p>And then import the data directly to a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> by calling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">clipdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clipdf</span>
<span class="go">  A B C</span>
<span class="go">x 1 4 p</span>
<span class="go">y 2 5 q</span>
<span class="go">z 3 6 r</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">to_clipboard</span></code> method can be used to write the contents of a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to
the clipboard. Following which you can paste the clipboard contents into other
applications (CTRL-V on many operating systems). Here we illustrate writing a
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> into clipboard and reading it back.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">  A B C</span>
<span class="go">x 1 4 p</span>
<span class="go">y 2 5 q</span>
<span class="go">z 3 6 r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">to_clipboard</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>
<span class="go">  A B C</span>
<span class="go">x 1 4 p</span>
<span class="go">y 2 5 q</span>
<span class="go">z 3 6 r</span>
</pre></div>
</div>
<p>We can see that we got the same content back, which we had earlier written to the clipboard.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may need to install xclip or xsel (with PyQt5, PyQt4 or qtpy) on Linux to use these methods.</p>
</div>
</section>
<section id="pickling">
<span id="io-pickle"></span><h2>Pickling<a class="headerlink" href="#pickling" title="Permalink to this headline">#</a></h2>
<p>All pandas objects are equipped with <code class="docutils literal notranslate"><span class="pre">to_pickle</span></code> methods which use Pythonâ€™s
<code class="docutils literal notranslate"><span class="pre">cPickle</span></code> module to save data structures to disk using the pickle format.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [418]: </span><span class="n">df</span>
<span class="gh">Out[418]: </span><span class="go"></span>
<span class="go">c1         a   </span>
<span class="go">c2         b  d</span>
<span class="go">lvl1 lvl2      </span>
<span class="go">a    c     1  5</span>
<span class="go">     d     2  6</span>
<span class="go">b    c     3  7</span>
<span class="go">     d     4  8</span>

<span class="gp">In [419]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;foo.pkl&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">read_pickle</span></code> function in the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> namespace can be used to load
any pickled pandas object (or any other pickled object) from file:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [420]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;foo.pkl&quot;</span><span class="p">)</span>
<span class="gh">Out[420]: </span><span class="go"></span>
<span class="go">c1         a   </span>
<span class="go">c2         b  d</span>
<span class="go">lvl1 lvl2      </span>
<span class="go">a    c     1  5</span>
<span class="go">     d     2  6</span>
<span class="go">b    c     3  7</span>
<span class="go">     d     4  8</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Loading pickled data received from untrusted sources can be unsafe.</p>
<p>See: <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/pickle.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/pickle.html'" tppabs="https://docs.python.org/3/library/pickle.html">https://docs.python.org/3/library/pickle.html</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="pandas.read_pickle.html#pandas.read_pickle" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_pickle.html#pandas.read_pickle" title="pandas.read_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code></a> is only guaranteed backwards compatible back to pandas version 0.20.3</p>
</div>
<section id="compressed-pickle-files">
<span id="io-pickle-compression"></span><h3>Compressed pickle files<a class="headerlink" href="#compressed-pickle-files" title="Permalink to this headline">#</a></h3>
<p><a class="reference internal" href="pandas.read_pickle.html#pandas.read_pickle" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_pickle.html#pandas.read_pickle" title="pandas.read_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code></a>, <a class="reference internal" href="pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a> and <a class="reference internal" href="pandas.Series.to_pickle.html#pandas.Series.to_pickle" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.to_pickle.html#pandas.Series.to_pickle" title="pandas.Series.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_pickle()</span></code></a> can read
and write compressed pickle files. The compression types of <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">bz2</span></code>, <code class="docutils literal notranslate"><span class="pre">xz</span></code>, <code class="docutils literal notranslate"><span class="pre">zstd</span></code> are supported for reading and writing.
The <code class="docutils literal notranslate"><span class="pre">zip</span></code> file format only supports reading and must contain only one data file
to be read.</p>
<p>The compression type can be an explicit parameter or be inferred from the file extension.
If â€˜inferâ€™, then use <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">bz2</span></code>, <code class="docutils literal notranslate"><span class="pre">zip</span></code>, <code class="docutils literal notranslate"><span class="pre">xz</span></code>, <code class="docutils literal notranslate"><span class="pre">zstd</span></code> if filename ends in <code class="docutils literal notranslate"><span class="pre">'.gz'</span></code>, <code class="docutils literal notranslate"><span class="pre">'.bz2'</span></code>, <code class="docutils literal notranslate"><span class="pre">'.zip'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'.xz'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'.zst'</span></code>, respectively.</p>
<p>The compression parameter can also be a <code class="docutils literal notranslate"><span class="pre">dict</span></code> in order to pass options to the
compression protocol. It must have a <code class="docutils literal notranslate"><span class="pre">'method'</span></code> key set to the name
of the compression protocol, which must be one of
{<code class="docutils literal notranslate"><span class="pre">'zip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'gzip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'bz2'</span></code>, <code class="docutils literal notranslate"><span class="pre">'xz'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zstd'</span></code>}. All other key-value pairs are passed to
the underlying compression library.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [421]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [422]: </span><span class="n">df</span>
<span class="gh">Out[422]: </span><span class="go"></span>
<span class="go">            A    B                   C</span>
<span class="go">0   -0.828876  foo 2013-01-01 00:00:00</span>
<span class="go">1   -0.110383  foo 2013-01-01 00:00:01</span>
<span class="go">2    2.357598  foo 2013-01-01 00:00:02</span>
<span class="go">3   -1.620073  foo 2013-01-01 00:00:03</span>
<span class="go">4    0.440903  foo 2013-01-01 00:00:04</span>
<span class="go">..        ...  ...                 ...</span>
<span class="go">995 -1.177365  foo 2013-01-01 00:16:35</span>
<span class="go">996  1.236988  foo 2013-01-01 00:16:36</span>
<span class="go">997  0.743946  foo 2013-01-01 00:16:37</span>
<span class="go">998 -0.533097  foo 2013-01-01 00:16:38</span>
<span class="go">999 -0.140850  foo 2013-01-01 00:16:39</span>

<span class="go">[1000 rows x 3 columns]</span>
</pre></div>
</div>
<p>Using an explicit compression type:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [423]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.compress&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;gzip&quot;</span><span class="p">)</span>

<span class="gp">In [424]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.compress&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;gzip&quot;</span><span class="p">)</span>

<span class="gp">In [425]: </span><span class="n">rt</span>
<span class="gh">Out[425]: </span><span class="go"></span>
<span class="go">            A    B                   C</span>
<span class="go">0   -0.828876  foo 2013-01-01 00:00:00</span>
<span class="go">1   -0.110383  foo 2013-01-01 00:00:01</span>
<span class="go">2    2.357598  foo 2013-01-01 00:00:02</span>
<span class="go">3   -1.620073  foo 2013-01-01 00:00:03</span>
<span class="go">4    0.440903  foo 2013-01-01 00:00:04</span>
<span class="go">..        ...  ...                 ...</span>
<span class="go">995 -1.177365  foo 2013-01-01 00:16:35</span>
<span class="go">996  1.236988  foo 2013-01-01 00:16:36</span>
<span class="go">997  0.743946  foo 2013-01-01 00:16:37</span>
<span class="go">998 -0.533097  foo 2013-01-01 00:16:38</span>
<span class="go">999 -0.140850  foo 2013-01-01 00:16:39</span>

<span class="go">[1000 rows x 3 columns]</span>
</pre></div>
</div>
<p>Inferring compression type from the extension:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [426]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.xz&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;infer&quot;</span><span class="p">)</span>

<span class="gp">In [427]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.xz&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;infer&quot;</span><span class="p">)</span>

<span class="gp">In [428]: </span><span class="n">rt</span>
<span class="gh">Out[428]: </span><span class="go"></span>
<span class="go">            A    B                   C</span>
<span class="go">0   -0.828876  foo 2013-01-01 00:00:00</span>
<span class="go">1   -0.110383  foo 2013-01-01 00:00:01</span>
<span class="go">2    2.357598  foo 2013-01-01 00:00:02</span>
<span class="go">3   -1.620073  foo 2013-01-01 00:00:03</span>
<span class="go">4    0.440903  foo 2013-01-01 00:00:04</span>
<span class="go">..        ...  ...                 ...</span>
<span class="go">995 -1.177365  foo 2013-01-01 00:16:35</span>
<span class="go">996  1.236988  foo 2013-01-01 00:16:36</span>
<span class="go">997  0.743946  foo 2013-01-01 00:16:37</span>
<span class="go">998 -0.533097  foo 2013-01-01 00:16:38</span>
<span class="go">999 -0.140850  foo 2013-01-01 00:16:39</span>

<span class="go">[1000 rows x 3 columns]</span>
</pre></div>
</div>
<p>The default is to â€˜inferâ€™:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [429]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.gz&quot;</span><span class="p">)</span>

<span class="gp">In [430]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.gz&quot;</span><span class="p">)</span>

<span class="gp">In [431]: </span><span class="n">rt</span>
<span class="gh">Out[431]: </span><span class="go"></span>
<span class="go">            A    B                   C</span>
<span class="go">0   -0.828876  foo 2013-01-01 00:00:00</span>
<span class="go">1   -0.110383  foo 2013-01-01 00:00:01</span>
<span class="go">2    2.357598  foo 2013-01-01 00:00:02</span>
<span class="go">3   -1.620073  foo 2013-01-01 00:00:03</span>
<span class="go">4    0.440903  foo 2013-01-01 00:00:04</span>
<span class="go">..        ...  ...                 ...</span>
<span class="go">995 -1.177365  foo 2013-01-01 00:16:35</span>
<span class="go">996  1.236988  foo 2013-01-01 00:16:36</span>
<span class="go">997  0.743946  foo 2013-01-01 00:16:37</span>
<span class="go">998 -0.533097  foo 2013-01-01 00:16:38</span>
<span class="go">999 -0.140850  foo 2013-01-01 00:16:39</span>

<span class="go">[1000 rows x 3 columns]</span>

<span class="gp">In [432]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;s1.pkl.bz2&quot;</span><span class="p">)</span>

<span class="gp">In [433]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;s1.pkl.bz2&quot;</span><span class="p">)</span>

<span class="gp">In [434]: </span><span class="n">rt</span>
<span class="gh">Out[434]: </span><span class="go"></span>
<span class="go">0     -0.828876</span>
<span class="go">1     -0.110383</span>
<span class="go">2      2.357598</span>
<span class="go">3     -1.620073</span>
<span class="go">4      0.440903</span>
<span class="go">         ...   </span>
<span class="go">995   -1.177365</span>
<span class="go">996    1.236988</span>
<span class="go">997    0.743946</span>
<span class="go">998   -0.533097</span>
<span class="go">999   -0.140850</span>
<span class="go">Name: A, Length: 1000, dtype: float64</span>
</pre></div>
</div>
<p>Passing options to the compression protocol in order to speed up compression:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [435]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.gz&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip&quot;</span><span class="p">,</span> <span class="s2">&quot;compresslevel&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="msgpack">
<span id="io-msgpack"></span><h2>msgpack<a class="headerlink" href="#msgpack" title="Permalink to this headline">#</a></h2>
<p>pandas support for <code class="docutils literal notranslate"><span class="pre">msgpack</span></code> has been removed in version 1.0.0. It is
recommended to use <a class="reference internal" href="#io-pickle"><span class="std std-ref">pickle</span></a> instead.</p>
<p>Alternatively, you can also the Arrow IPC serialization format for on-the-wire
transmission of pandas objects. For documentation on pyarrow, see
<a class="reference external" href="javascript:if(confirm('https://arrow.apache.org/docs/python/ipc.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://arrow.apache.org/docs/python/ipc.html'" tppabs="https://arrow.apache.org/docs/python/ipc.html">here</a>.</p>
</section>
<section id="hdf5-pytables">
<span id="io-hdf5"></span><h2>HDF5 (PyTables)<a class="headerlink" href="#hdf5-pytables" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> is a dict-like object which reads and writes pandas using
the high performance HDF5 format using the excellent <a class="reference external" href="javascript:if(confirm('https://www.pytables.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.pytables.org/'" tppabs="https://www.pytables.org/">PyTables</a> library. See the <a class="reference internal" href="cookbook.html#cookbook-hdf" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html#cookbook-hdf"><span class="std std-ref">cookbook</span></a>
for some advanced strategies</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>pandas uses PyTables for reading and writing HDF5 files, which allows
serializing object-dtype data with pickle. Loading pickled data received from
untrusted sources can be unsafe.</p>
<p>See: <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/pickle.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/pickle.html'" tppabs="https://docs.python.org/3/library/pickle.html">https://docs.python.org/3/library/pickle.html</a> for more.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [436]: </span><span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;store.h5&quot;</span><span class="p">)</span>

<span class="gp">In [437]: </span><span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
</pre></div>
</div>
<p>Objects can be written to the file just like adding key-value pairs to a
dict:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [438]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;1/1/2000&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="gp">In [439]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">])</span>

<span class="gp">In [440]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>

<span class="go"># store.put(&#39;s&#39;, s) is an equivalent method</span>
<span class="gp">In [441]: </span><span class="n">store</span><span class="p">[</span><span class="s2">&quot;s&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>

<span class="gp">In [442]: </span><span class="n">store</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>

<span class="gp">In [443]: </span><span class="n">store</span>
<span class="gh">Out[443]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
</pre></div>
</div>
<p>In a current or later Python session, you can retrieve stored objects:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># store.get(&#39;df&#39;) is an equivalent method</span>
<span class="gp">In [444]: </span><span class="n">store</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">]</span>
<span class="gh">Out[444]: </span><span class="go"></span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>

<span class="go"># dotted (attribute) access provides get as well</span>
<span class="gp">In [445]: </span><span class="n">store</span><span class="o">.</span><span class="n">df</span>
<span class="gh">Out[445]: </span><span class="go"></span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>
</pre></div>
</div>
<p>Deletion of the object specified by the key:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># store.remove(&#39;df&#39;) is an equivalent method</span>
<span class="gp">In [446]: </span><span class="k">del</span> <span class="n">store</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">]</span>

<span class="gp">In [447]: </span><span class="n">store</span>
<span class="gh">Out[447]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
</pre></div>
</div>
<p>Closing a Store and using a context manager:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [448]: </span><span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="gp">In [449]: </span><span class="n">store</span>
<span class="gh">Out[449]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>

<span class="gp">In [450]: </span><span class="n">store</span><span class="o">.</span><span class="n">is_open</span>
<span class="gh">Out[450]: </span><span class="go">False</span>

<span class="go"># Working with, and automatically closing the store using a context manager</span>
<span class="gp">In [451]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;store.h5&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">store</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<section id="read-write-api">
<h3>Read/write API<a class="headerlink" href="#read-write-api" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> supports a top-level API using <code class="docutils literal notranslate"><span class="pre">read_hdf</span></code> for reading and <code class="docutils literal notranslate"><span class="pre">to_hdf</span></code> for writing,
similar to how <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> and <code class="docutils literal notranslate"><span class="pre">to_csv</span></code> work.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [452]: </span><span class="n">df_tl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))})</span>

<span class="gp">In [453]: </span><span class="n">df_tl</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s2">&quot;store_tl.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [454]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;store_tl.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;index&gt;2&quot;</span><span class="p">])</span>
<span class="gh">Out[454]: </span><span class="go"></span>
<span class="go">   A  B</span>
<span class="go">3  3  3</span>
<span class="go">4  4  4</span>
</pre></div>
</div>
<p>HDFStore will by default not drop rows that are all missing. This behavior can be changed by setting <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [455]: </span><span class="n">df_with_missing</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [456]: </span><span class="n">df_with_missing</span>
<span class="gh">Out[456]: </span><span class="go"></span>
<span class="go">   col1  col2</span>
<span class="go">0   0.0   1.0</span>
<span class="go">1   NaN   NaN</span>
<span class="go">2   2.0   NaN</span>

<span class="gp">In [457]: </span><span class="n">df_with_missing</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s2">&quot;file.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df_with_missing&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>

<span class="gp">In [458]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;file.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df_with_missing&quot;</span><span class="p">)</span>
<span class="gh">Out[458]: </span><span class="go"></span>
<span class="go">   col1  col2</span>
<span class="go">0   0.0   1.0</span>
<span class="go">1   NaN   NaN</span>
<span class="go">2   2.0   NaN</span>

<span class="gp">In [459]: </span><span class="n">df_with_missing</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;file.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df_with_missing&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [460]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;file.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df_with_missing&quot;</span><span class="p">)</span>
<span class="gh">Out[460]: </span><span class="go"></span>
<span class="go">   col1  col2</span>
<span class="go">0   0.0   1.0</span>
<span class="go">2   2.0   NaN</span>
</pre></div>
</div>
</section>
<section id="fixed-format">
<span id="io-hdf5-fixed"></span><h3>Fixed format<a class="headerlink" href="#fixed-format" title="Permalink to this headline">#</a></h3>
<p>The examples above show storing using <code class="docutils literal notranslate"><span class="pre">put</span></code>, which write the HDF5 to <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> in a fixed array format, called
the <code class="docutils literal notranslate"><span class="pre">fixed</span></code> format. These types of stores are <strong>not</strong> appendable once written (though you can simply
remove them and rewrite). Nor are they <strong>queryable</strong>; they must be
retrieved in their entirety. They also do not support dataframes with non-unique column names.
The <code class="docutils literal notranslate"><span class="pre">fixed</span></code> format stores offer very fast writing and slightly faster reading than <code class="docutils literal notranslate"><span class="pre">table</span></code> stores.
This format is specified by default when using <code class="docutils literal notranslate"><span class="pre">put</span></code> or <code class="docutils literal notranslate"><span class="pre">to_hdf</span></code> or by <code class="docutils literal notranslate"><span class="pre">format='fixed'</span></code> or <code class="docutils literal notranslate"><span class="pre">format='f'</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A <code class="docutils literal notranslate"><span class="pre">fixed</span></code> format will raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if you try to retrieve using a <code class="docutils literal notranslate"><span class="pre">where</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s2">&quot;test_fixed.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;test_fixed.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;index&gt;5&quot;</span><span class="p">)</span>
<span class="go">TypeError: cannot pass a where specification when reading a fixed format.</span>
<span class="go">           this store must be selected in its entirety</span>
</pre></div>
</div>
</div>
</section>
<section id="table-format">
<span id="io-hdf5-table"></span><h3>Table format<a class="headerlink" href="#table-format" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> supports another <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> format on disk, the <code class="docutils literal notranslate"><span class="pre">table</span></code>
format. Conceptually a <code class="docutils literal notranslate"><span class="pre">table</span></code> is shaped very much like a DataFrame,
with rows and columns. A <code class="docutils literal notranslate"><span class="pre">table</span></code> may be appended to in the same or
other sessions. In addition, delete and query type operations are
supported. This format is specified by <code class="docutils literal notranslate"><span class="pre">format='table'</span></code> or <code class="docutils literal notranslate"><span class="pre">format='t'</span></code>
to <code class="docutils literal notranslate"><span class="pre">append</span></code> or <code class="docutils literal notranslate"><span class="pre">put</span></code> or <code class="docutils literal notranslate"><span class="pre">to_hdf</span></code>.</p>
<p>This format can be set as an option as well <code class="docutils literal notranslate"><span class="pre">pd.set_option('io.hdf.default_format','table')</span></code> to
enable <code class="docutils literal notranslate"><span class="pre">put/append/to_hdf</span></code> to by default store in the <code class="docutils literal notranslate"><span class="pre">table</span></code> format.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [461]: </span><span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;store.h5&quot;</span><span class="p">)</span>

<span class="gp">In [462]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>

<span class="gp">In [463]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>

<span class="go"># append data (creates a table automatically)</span>
<span class="gp">In [464]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>

<span class="gp">In [465]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>

<span class="gp">In [466]: </span><span class="n">store</span>
<span class="gh">Out[466]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>

<span class="go"># select the entire object</span>
<span class="gp">In [467]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">)</span>
<span class="gh">Out[467]: </span><span class="go"></span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>

<span class="go"># the type of stored data</span>
<span class="gp">In [468]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">_v_attrs</span><span class="o">.</span><span class="n">pandas_type</span>
<span class="gh">Out[468]: </span><span class="go">&#39;frame_table&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also create a <code class="docutils literal notranslate"><span class="pre">table</span></code> by passing <code class="docutils literal notranslate"><span class="pre">format='table'</span></code> or <code class="docutils literal notranslate"><span class="pre">format='t'</span></code> to a <code class="docutils literal notranslate"><span class="pre">put</span></code> operation.</p>
</div>
</section>
<section id="hierarchical-keys">
<span id="io-hdf5-keys"></span><h3>Hierarchical keys<a class="headerlink" href="#hierarchical-keys" title="Permalink to this headline">#</a></h3>
<p>Keys to a store can be specified as a string. These can be in a
hierarchical path-name like format (e.g. <code class="docutils literal notranslate"><span class="pre">foo/bar/bah</span></code>), which will
generate a hierarchy of sub-stores (or <code class="docutils literal notranslate"><span class="pre">Groups</span></code> in PyTables
parlance). Keys can be specified without the leading â€˜/â€™ and are <strong>always</strong>
absolute (e.g. â€˜fooâ€™ refers to â€˜/fooâ€™). Removal operations can remove
everything in the sub-store and <strong>below</strong>, so be <em>careful</em>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [469]: </span><span class="n">store</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;foo/bar/bah&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [470]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;food/orange&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [471]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;food/apple&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [472]: </span><span class="n">store</span>
<span class="gh">Out[472]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>

<span class="go"># a list of keys are returned</span>
<span class="gp">In [473]: </span><span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gh">Out[473]: </span><span class="go">[&#39;/df&#39;, &#39;/food/apple&#39;, &#39;/food/orange&#39;, &#39;/foo/bar/bah&#39;]</span>

<span class="go"># remove all nodes under this level</span>
<span class="gp">In [474]: </span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;food&quot;</span><span class="p">)</span>

<span class="gp">In [475]: </span><span class="n">store</span>
<span class="gh">Out[475]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
</pre></div>
</div>
<p>You can walk through the group hierarchy using the <code class="docutils literal notranslate"><span class="pre">walk</span></code> method which
will yield a tuple for each group key along with the relative keys of its contents.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [476]: </span><span class="k">for</span> <span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">subgroups</span><span class="p">,</span> <span class="n">subkeys</span><span class="p">)</span> <span class="ow">in</span> <span class="n">store</span><span class="o">.</span><span class="n">walk</span><span class="p">():</span>
<span class="gp">   .....: </span>    <span class="k">for</span> <span class="n">subgroup</span> <span class="ow">in</span> <span class="n">subgroups</span><span class="p">:</span>
<span class="gp">   .....: </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;GROUP: </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">subgroup</span><span class="p">))</span>
<span class="gp">   .....: </span>    <span class="k">for</span> <span class="n">subkey</span> <span class="ow">in</span> <span class="n">subkeys</span><span class="p">:</span>
<span class="gp">   .....: </span>        <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">])</span>
<span class="gp">   .....: </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;KEY: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
<span class="gp">   .....: </span>        <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
<span class="gp">   .....: </span>
<span class="go">GROUP: /foo</span>
<span class="go">KEY: /df</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>
<span class="go">GROUP: /foo/bar</span>
<span class="go">KEY: /foo/bar/bah</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Hierarchical keys cannot be retrieved as dotted (attribute) access as described above for items stored under the root node.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">store</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">bah</span>
<span class="go">AttributeError: &#39;HDFStore&#39; object has no attribute &#39;foo&#39;</span>

<span class="go"># you can directly access the actual PyTables node but using the root node</span>
<span class="gp">In [9]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">bah</span>
<span class="gh">Out[9]:</span>
<span class="go">/foo/bar/bah (Group) &#39;&#39;</span>
<span class="go">  children := [&#39;block0_items&#39; (Array), &#39;block0_values&#39; (Array), &#39;axis0&#39; (Array), &#39;axis1&#39; (Array)]</span>
</pre></div>
</div>
<p>Instead, use explicit string based keys:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [477]: </span><span class="n">store</span><span class="p">[</span><span class="s2">&quot;foo/bar/bah&quot;</span><span class="p">]</span>
<span class="gh">Out[477]: </span><span class="go"></span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>
</pre></div>
</div>
</div>
</section>
<section id="storing-types">
<span id="io-hdf5-types"></span><h3>Storing types<a class="headerlink" href="#storing-types" title="Permalink to this headline">#</a></h3>
<section id="storing-mixed-types-in-a-table">
<h4>Storing mixed types in a table<a class="headerlink" href="#storing-mixed-types-in-a-table" title="Permalink to this headline">#</a></h4>
<p>Storing mixed-dtype data is supported. Strings are stored as a
fixed-width using the maximum size of the appended column. Subsequent attempts
at appending longer strings will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
<p>Passing <code class="docutils literal notranslate"><span class="pre">min_itemsize={`values`:</span> <span class="pre">size}</span></code> as a parameter to append
will set a larger minimum for the string columns. Storing <code class="docutils literal notranslate"><span class="pre">floats,</span>
<span class="pre">strings,</span> <span class="pre">ints,</span> <span class="pre">bools,</span> <span class="pre">datetime64</span></code> are currently supported. For string
columns, passing <code class="docutils literal notranslate"><span class="pre">nan_rep</span> <span class="pre">=</span> <span class="pre">'nan'</span></code> to append will change the default
nan representation on disk (which converts to/from <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>), this
defaults to <code class="docutils literal notranslate"><span class="pre">nan</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [478]: </span><span class="n">df_mixed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float32&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;int&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;bool&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;datetime64&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;20010102&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">},</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [479]: </span><span class="n">df_mixed</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_mixed</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;datetime64&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [480]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_mixed&quot;</span><span class="p">,</span> <span class="n">df_mixed</span><span class="p">,</span> <span class="n">min_itemsize</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">})</span>

<span class="gp">In [481]: </span><span class="n">df_mixed1</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_mixed&quot;</span><span class="p">)</span>

<span class="gp">In [482]: </span><span class="n">df_mixed1</span>
<span class="gh">Out[482]: </span><span class="go"></span>
<span class="go">          A         B         C  string  int  bool datetime64</span>
<span class="go">0  1.778161 -0.898283 -0.263043  string    1  True 2001-01-02</span>
<span class="go">1 -0.913867 -0.218499 -0.639244  string    1  True 2001-01-02</span>
<span class="go">2 -0.030004  1.408028 -0.866305  string    1  True 2001-01-02</span>
<span class="go">3       NaN       NaN -0.225250     NaN    1  True        NaT</span>
<span class="go">4       NaN       NaN -0.890978     NaN    1  True        NaT</span>
<span class="go">5  0.081323  0.520995 -0.553839  string    1  True 2001-01-02</span>
<span class="go">6 -0.268494  0.620028 -2.762875  string    1  True 2001-01-02</span>
<span class="go">7  0.168016  0.159416 -1.244763  string    1  True 2001-01-02</span>

<span class="gp">In [483]: </span><span class="n">df_mixed1</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[483]: </span><span class="go"></span>
<span class="go">float64           2</span>
<span class="go">float32           1</span>
<span class="go">object            1</span>
<span class="go">int64             1</span>
<span class="go">bool              1</span>
<span class="go">datetime64[ns]    1</span>
<span class="go">dtype: int64</span>

<span class="go"># we have provided a minimum string column size</span>
<span class="gp">In [484]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df_mixed</span><span class="o">.</span><span class="n">table</span>
<span class="gh">Out[484]: </span><span class="go"></span>
<span class="go">/df_mixed/table (Table(8,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(2,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;values_block_1&quot;: Float32Col(shape=(1,), dflt=0.0, pos=2),</span>
<span class="go">  &quot;values_block_2&quot;: StringCol(itemsize=50, shape=(1,), dflt=b&#39;&#39;, pos=3),</span>
<span class="go">  &quot;values_block_3&quot;: Int64Col(shape=(1,), dflt=0, pos=4),</span>
<span class="go">  &quot;values_block_4&quot;: BoolCol(shape=(1,), dflt=False, pos=5),</span>
<span class="go">  &quot;values_block_5&quot;: Int64Col(shape=(1,), dflt=0, pos=6)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (689,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
</section>
<section id="storing-multiindex-dataframes">
<h4>Storing MultiIndex DataFrames<a class="headerlink" href="#storing-multiindex-dataframes" title="Permalink to this headline">#</a></h4>
<p>Storing MultiIndex <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code> as tables is very similar to
storing/selecting from homogeneous index <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [485]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;qux&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]],</span>
<span class="gp">   .....: </span>    <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="gp">   .....: </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [486]: </span><span class="n">df_mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>

<span class="gp">In [487]: </span><span class="n">df_mi</span>
<span class="gh">Out[487]: </span><span class="go"></span>
<span class="go">                  A         B         C</span>
<span class="go">foo bar                                </span>
<span class="go">foo one   -1.280289  0.692545 -0.536722</span>
<span class="go">    two    1.005707  0.296917  0.139796</span>
<span class="go">    three -1.083889  0.811865  1.648435</span>
<span class="go">bar one   -0.164377 -0.402227  1.618922</span>
<span class="go">    two   -1.424723 -0.023232  0.948196</span>
<span class="go">baz two    0.183573  0.145277  0.308146</span>
<span class="go">    three -1.043530 -0.708145  1.430905</span>
<span class="go">qux one   -0.850136  0.813949  1.508891</span>
<span class="go">    two   -1.556154  0.187597  1.176488</span>
<span class="go">    three -1.246093 -0.002726 -0.444249</span>

<span class="gp">In [488]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_mi&quot;</span><span class="p">,</span> <span class="n">df_mi</span><span class="p">)</span>

<span class="gp">In [489]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_mi&quot;</span><span class="p">)</span>
<span class="gh">Out[489]: </span><span class="go"></span>
<span class="go">                  A         B         C</span>
<span class="go">foo bar                                </span>
<span class="go">foo one   -1.280289  0.692545 -0.536722</span>
<span class="go">    two    1.005707  0.296917  0.139796</span>
<span class="go">    three -1.083889  0.811865  1.648435</span>
<span class="go">bar one   -0.164377 -0.402227  1.618922</span>
<span class="go">    two   -1.424723 -0.023232  0.948196</span>
<span class="go">baz two    0.183573  0.145277  0.308146</span>
<span class="go">    three -1.043530 -0.708145  1.430905</span>
<span class="go">qux one   -0.850136  0.813949  1.508891</span>
<span class="go">    two   -1.556154  0.187597  1.176488</span>
<span class="go">    three -1.246093 -0.002726 -0.444249</span>

<span class="go"># the levels are automatically included as data columns</span>
<span class="gp">In [490]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_mi&quot;</span><span class="p">,</span> <span class="s2">&quot;foo=bar&quot;</span><span class="p">)</span>
<span class="gh">Out[490]: </span><span class="go"></span>
<span class="go">                A         B         C</span>
<span class="go">foo bar                              </span>
<span class="go">bar one -0.164377 -0.402227  1.618922</span>
<span class="go">    two -1.424723 -0.023232  0.948196</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> keyword is reserved and cannot be use as a level name.</p>
</div>
</section>
</section>
<section id="querying">
<span id="io-hdf5-query"></span><h3>Querying<a class="headerlink" href="#querying" title="Permalink to this headline">#</a></h3>
<section id="querying-a-table">
<h4>Querying a table<a class="headerlink" href="#querying-a-table" title="Permalink to this headline">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code> operations have an optional criterion that can
be specified to select/delete only a subset of the data. This allows one
to have a very large on-disk table and retrieve only a portion of the
data.</p>
<p>A query is specified using the <code class="docutils literal notranslate"><span class="pre">Term</span></code> class under the hood, as a boolean expression.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">columns</span></code> are supported indexers of <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">data_columns</span></code> are specified, these can be used as additional indexers.</p></li>
<li><p>level name in a MultiIndex, with default name <code class="docutils literal notranslate"><span class="pre">level_0</span></code>, <code class="docutils literal notranslate"><span class="pre">level_1</span></code>, â€¦ if not provided.</p></li>
</ul>
<p>Valid comparison operators are:</p>
<p><code class="docutils literal notranslate"><span class="pre">=,</span> <span class="pre">==,</span> <span class="pre">!=,</span> <span class="pre">&gt;,</span> <span class="pre">&gt;=,</span> <span class="pre">&lt;,</span> <span class="pre">&lt;=</span></code></p>
<p>Valid boolean expressions are combined with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">|</span></code> : or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code> : and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(</span></code> and <code class="docutils literal notranslate"><span class="pre">)</span></code> : for grouping</p></li>
</ul>
<p>These rules are similar to how boolean expressions are used in pandas for indexing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code> will be automatically expanded to the comparison operator <code class="docutils literal notranslate"><span class="pre">==</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code> is the not operator, but can only be used in very limited
circumstances</p></li>
<li><p>If a list/tuple of expressions is passed they will be combined via <code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></li>
</ul>
</div>
<p>The following are valid expressions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'index</span> <span class="pre">&gt;=</span> <span class="pre">date'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;columns</span> <span class="pre">=</span> <span class="pre">['A',</span> <span class="pre">'D']&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;columns</span> <span class="pre">in</span> <span class="pre">['A',</span> <span class="pre">'D']&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'columns</span> <span class="pre">=</span> <span class="pre">A'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'columns</span> <span class="pre">==</span> <span class="pre">A'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;~(columns</span> <span class="pre">=</span> <span class="pre">['A',</span> <span class="pre">'B'])&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'index</span> <span class="pre">&gt;</span> <span class="pre">df.index[3]</span> <span class="pre">&amp;</span> <span class="pre">string</span> <span class="pre">=</span> <span class="pre">&quot;bar&quot;'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'(index</span> <span class="pre">&gt;</span> <span class="pre">df.index[3]</span> <span class="pre">&amp;</span> <span class="pre">index</span> <span class="pre">&lt;=</span> <span class="pre">df.index[6])</span> <span class="pre">|</span> <span class="pre">string</span> <span class="pre">=</span> <span class="pre">&quot;bar&quot;'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ts</span> <span class="pre">&gt;=</span> <span class="pre">Timestamp('2012-02-01')&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;major_axis&gt;=20130101&quot;</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">indexers</span></code> are on the left-hand side of the sub-expression:</p>
<p><code class="docutils literal notranslate"><span class="pre">columns</span></code>, <code class="docutils literal notranslate"><span class="pre">major_axis</span></code>, <code class="docutils literal notranslate"><span class="pre">ts</span></code></p>
<p>The right-hand side of the sub-expression (after a comparison operator) can be:</p>
<ul class="simple">
<li><p>functions that will be evaluated, e.g. <code class="docutils literal notranslate"><span class="pre">Timestamp('2012-02-01')</span></code></p></li>
<li><p>strings, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;bar&quot;</span></code></p></li>
<li><p>date-like, e.g. <code class="docutils literal notranslate"><span class="pre">20130101</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;20130101&quot;</span></code></p></li>
<li><p>lists, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;['A',</span> <span class="pre">'B']&quot;</span></code></p></li>
<li><p>variables that are defined in the local names space, e.g. <code class="docutils literal notranslate"><span class="pre">date</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Passing a string to a query by interpolating it into the query
expression is not recommended. Simply assign the string of interest to a
variable and use that variable in an expression. For example, do this</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;HolyMoly&#39;&quot;</span>
<span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="s2">&quot;index == string&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>instead of this</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;HolyMoly&#39;&quot;</span>
<span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;index == </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The latter will <strong>not</strong> work and will raise a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>.Note that
thereâ€™s a single quote followed by a double quote in the <code class="docutils literal notranslate"><span class="pre">string</span></code>
variable.</p>
<p>If you <em>must</em> interpolate, use the <code class="docutils literal notranslate"><span class="pre">'%r'</span></code> format specifier</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="s2">&quot;index == </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">string</span><span class="p">)</span>
</pre></div>
</div>
<p>which will quote <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
</div>
<p>Here are some examples:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [491]: </span><span class="n">dfq</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;ABCD&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [492]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfq&quot;</span><span class="p">,</span> <span class="n">dfq</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Use boolean expressions, with in-line function evaluation.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [493]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dfq&quot;</span><span class="p">,</span> <span class="s2">&quot;index&gt;pd.Timestamp(&#39;20130104&#39;) &amp; columns=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>
<span class="gh">Out[493]: </span><span class="go"></span>
<span class="go">                   A         B</span>
<span class="go">2013-01-05  1.366810  1.073372</span>
<span class="go">2013-01-06  2.119746 -2.628174</span>
<span class="go">2013-01-07  0.337920 -0.634027</span>
<span class="go">2013-01-08  1.053434  1.109090</span>
<span class="go">2013-01-09 -0.772942 -0.269415</span>
<span class="go">2013-01-10  0.048562 -0.285920</span>
</pre></div>
</div>
<p>Use inline column reference.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [494]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dfq&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;A&gt;0 or C&gt;0&quot;</span><span class="p">)</span>
<span class="gh">Out[494]: </span><span class="go"></span>
<span class="go">                   A         B         C         D</span>
<span class="go">2013-01-01  0.856838  1.491776  0.001283  0.701816</span>
<span class="go">2013-01-02 -1.097917  0.102588  0.661740  0.443531</span>
<span class="go">2013-01-03  0.559313 -0.459055 -1.222598 -0.455304</span>
<span class="go">2013-01-05  1.366810  1.073372 -0.994957  0.755314</span>
<span class="go">2013-01-06  2.119746 -2.628174 -0.089460 -0.133636</span>
<span class="go">2013-01-07  0.337920 -0.634027  0.421107  0.604303</span>
<span class="go">2013-01-08  1.053434  1.109090 -0.367891 -0.846206</span>
<span class="go">2013-01-10  0.048562 -0.285920  1.334100  0.194462</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">columns</span></code> keyword can be supplied to select a list of columns to be
returned, this is equivalent to passing a
<code class="docutils literal notranslate"><span class="pre">'columns=list_of_columns_to_filter'</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [495]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="s2">&quot;columns=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>
<span class="gh">Out[495]: </span><span class="go"></span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01 -0.398501 -0.677311</span>
<span class="go">2000-01-02 -1.167564 -0.593353</span>
<span class="go">2000-01-03 -0.131959  0.089012</span>
<span class="go">2000-01-04  0.169405 -1.358046</span>
<span class="go">2000-01-05  0.492195  0.076693</span>
<span class="go">2000-01-06 -0.285283 -1.210529</span>
<span class="go">2000-01-07  0.941577 -0.342447</span>
<span class="go">2000-01-08  0.052607  2.093214</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> parameters can be specified to limit the total search
space. These are in terms of the total number of rows in a table.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">select</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if the query expression has an unknown
variable reference. Usually this means that you are trying to select on a column
that is <strong>not</strong> a data_column.</p>
<p><code class="docutils literal notranslate"><span class="pre">select</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> if the query expression is not valid.</p>
</div>
</section>
<section id="query-timedelta64-ns">
<span id="io-hdf5-timedelta"></span><h4>Query timedelta64[ns]<a class="headerlink" href="#query-timedelta64-ns" title="Permalink to this headline">#</a></h4>
<p>You can store and query using the <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> type. Terms can be
specified in the format: <code class="docutils literal notranslate"><span class="pre">&lt;float&gt;(&lt;unit&gt;)</span></code>, where float may be signed (and fractional), and unit can be
<code class="docutils literal notranslate"><span class="pre">D,s,ms,us,ns</span></code> for the timedelta. Hereâ€™s an example:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [496]: </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="gp">In [497]: </span><span class="n">dftd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">   .....: </span>            <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">   .....: </span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">   .....: </span>        <span class="p">],</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [498]: </span><span class="n">dftd</span><span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftd</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">dftd</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">]</span>

<span class="gp">In [499]: </span><span class="n">dftd</span>
<span class="gh">Out[499]: </span><span class="go"></span>
<span class="go">           A                   B                  C</span>
<span class="go">0 2013-01-01 2013-01-01 00:00:10  -1 days +23:59:50</span>
<span class="go">1 2013-01-01 2013-01-02 00:00:10  -2 days +23:59:50</span>
<span class="go">2 2013-01-01 2013-01-03 00:00:10  -3 days +23:59:50</span>
<span class="go">3 2013-01-01 2013-01-04 00:00:10  -4 days +23:59:50</span>
<span class="go">4 2013-01-01 2013-01-05 00:00:10  -5 days +23:59:50</span>
<span class="go">5 2013-01-01 2013-01-06 00:00:10  -6 days +23:59:50</span>
<span class="go">6 2013-01-01 2013-01-07 00:00:10  -7 days +23:59:50</span>
<span class="go">7 2013-01-01 2013-01-08 00:00:10  -8 days +23:59:50</span>
<span class="go">8 2013-01-01 2013-01-09 00:00:10  -9 days +23:59:50</span>
<span class="go">9 2013-01-01 2013-01-10 00:00:10 -10 days +23:59:50</span>

<span class="gp">In [500]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dftd&quot;</span><span class="p">,</span> <span class="n">dftd</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [501]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dftd&quot;</span><span class="p">,</span> <span class="s2">&quot;C&lt;&#39;-3.5D&#39;&quot;</span><span class="p">)</span>
<span class="gh">Out[501]: </span><span class="go"></span>
<span class="go">           A                   B                  C</span>
<span class="go">4 2013-01-01 2013-01-05 00:00:10  -5 days +23:59:50</span>
<span class="go">5 2013-01-01 2013-01-06 00:00:10  -6 days +23:59:50</span>
<span class="go">6 2013-01-01 2013-01-07 00:00:10  -7 days +23:59:50</span>
<span class="go">7 2013-01-01 2013-01-08 00:00:10  -8 days +23:59:50</span>
<span class="go">8 2013-01-01 2013-01-09 00:00:10  -9 days +23:59:50</span>
<span class="go">9 2013-01-01 2013-01-10 00:00:10 -10 days +23:59:50</span>
</pre></div>
</div>
</section>
<section id="query-multiindex">
<span id="io-query-multi"></span><h4>Query MultiIndex<a class="headerlink" href="#query-multiindex" title="Permalink to this headline">#</a></h4>
<p>Selecting from a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> can be achieved by using the name of the level.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [502]: </span><span class="n">df_mi</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
<span class="gh">Out[502]: </span><span class="go">FrozenList([&#39;foo&#39;, &#39;bar&#39;])</span>

<span class="gp">In [503]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_mi&quot;</span><span class="p">,</span> <span class="s2">&quot;foo=baz and bar=two&quot;</span><span class="p">)</span>
<span class="gh">Out[503]: </span><span class="go"></span>
<span class="go">                A         B         C</span>
<span class="go">foo bar                              </span>
<span class="go">baz two  0.183573  0.145277  0.308146</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> levels names are <code class="docutils literal notranslate"><span class="pre">None</span></code>, the levels are automatically made available via
the <code class="docutils literal notranslate"><span class="pre">level_n</span></code> keyword with <code class="docutils literal notranslate"><span class="pre">n</span></code> the level of the <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> you want to select from.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [504]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;qux&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]],</span>
<span class="gp">   .....: </span>    <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [505]: </span><span class="n">df_mi_2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>

<span class="gp">In [506]: </span><span class="n">df_mi_2</span>
<span class="gh">Out[506]: </span><span class="go"></span>
<span class="go">                  A         B         C</span>
<span class="go">foo one   -0.646538  1.210676 -0.315409</span>
<span class="go">    two    1.528366  0.376542  0.174490</span>
<span class="go">    three  1.247943 -0.742283  0.710400</span>
<span class="go">bar one    0.434128 -1.246384  1.139595</span>
<span class="go">    two    1.388668 -0.413554 -0.666287</span>
<span class="go">baz two    0.010150 -0.163820 -0.115305</span>
<span class="go">    three  0.216467  0.633720  0.473945</span>
<span class="go">qux one   -0.155446  1.287082  0.320201</span>
<span class="go">    two   -1.256989  0.874920  0.765944</span>
<span class="go">    three  0.025557 -0.729782 -0.127439</span>

<span class="gp">In [507]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_mi_2&quot;</span><span class="p">,</span> <span class="n">df_mi_2</span><span class="p">)</span>

<span class="go"># the levels are automatically included as data columns with keyword level_n</span>
<span class="gp">In [508]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_mi_2&quot;</span><span class="p">,</span> <span class="s2">&quot;level_0=foo and level_1=two&quot;</span><span class="p">)</span>
<span class="gh">Out[508]: </span><span class="go"></span>
<span class="go">                A         B        C</span>
<span class="go">foo two  1.528366  0.376542  0.17449</span>
</pre></div>
</div>
</section>
<section id="indexing">
<h4>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">#</a></h4>
<p>You can create/modify an index for a table with <code class="docutils literal notranslate"><span class="pre">create_table_index</span></code>
after data is already in the table (after and <code class="docutils literal notranslate"><span class="pre">append/put</span></code>
operation). Creating a table index is <strong>highly</strong> encouraged. This will
speed your queries a great deal when you use a <code class="docutils literal notranslate"><span class="pre">select</span></code> with the
indexed dimension as the <code class="docutils literal notranslate"><span class="pre">where</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Indexes are automagically created on the indexables
and any data columns you specify. This behavior can be turned off by passing
<code class="docutils literal notranslate"><span class="pre">index=False</span></code> to <code class="docutils literal notranslate"><span class="pre">append</span></code>.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># we have automagically already created an index (in the first section)</span>
<span class="gp">In [509]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [510]: </span><span class="n">i</span><span class="o">.</span><span class="n">optlevel</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">kind</span>
<span class="gh">Out[510]: </span><span class="go">(6, &#39;medium&#39;)</span>

<span class="go"># change an index by passing new parameters</span>
<span class="gp">In [511]: </span><span class="n">store</span><span class="o">.</span><span class="n">create_table_index</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">optlevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;full&quot;</span><span class="p">)</span>

<span class="gp">In [512]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [513]: </span><span class="n">i</span><span class="o">.</span><span class="n">optlevel</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">kind</span>
<span class="gh">Out[513]: </span><span class="go">(9, &#39;full&#39;)</span>
</pre></div>
</div>
<p>Oftentimes when appending large amounts of data to a store, it is useful to turn off index creation for each append, then recreate at the end.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [514]: </span><span class="n">df_1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">))</span>

<span class="gp">In [515]: </span><span class="n">df_2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">))</span>

<span class="gp">In [516]: </span><span class="n">st</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;appends.h5&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>

<span class="gp">In [517]: </span><span class="n">st</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">df_1</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [518]: </span><span class="n">st</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">df_2</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [519]: </span><span class="n">st</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gh">Out[519]: </span><span class="go"></span>
<span class="go">/df/table (Table(20,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (2730,)</span>
</pre></div>
</div>
<p>Then create the index when finished appending.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [520]: </span><span class="n">st</span><span class="o">.</span><span class="n">create_table_index</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">optlevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;full&quot;</span><span class="p">)</span>

<span class="gp">In [521]: </span><span class="n">st</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gh">Out[521]: </span><span class="go"></span>
<span class="go">/df/table (Table(20,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (2730,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;B&quot;: Index(9, fullshuffle, zlib(1)).is_csi=True}</span>

<span class="gp">In [522]: </span><span class="n">st</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference external" href="javascript:if(confirm('https://stackoverflow.com/questions/17893370/ptrepack-sortby-needs-full-index  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://stackoverflow.com/questions/17893370/ptrepack-sortby-needs-full-index'" tppabs="https://stackoverflow.com/questions/17893370/ptrepack-sortby-needs-full-index">here</a> for how to create a completely-sorted-index (CSI) on an existing store.</p>
</section>
<section id="query-via-data-columns">
<span id="io-hdf5-query-data-columns"></span><h4>Query via data columns<a class="headerlink" href="#query-via-data-columns" title="Permalink to this headline">#</a></h4>
<p>You can designate (and index) certain columns that you want to be able
to perform queries (other than the <code class="docutils literal notranslate"><span class="pre">indexable</span></code> columns, which you can
always query). For instance say you want to perform this common
operation, on-disk, and return just the frame that matches this
query. You can specify <code class="docutils literal notranslate"><span class="pre">data_columns</span> <span class="pre">=</span> <span class="pre">True</span></code> to force all columns to
be <code class="docutils literal notranslate"><span class="pre">data_columns</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [523]: </span><span class="n">df_dc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [524]: </span><span class="n">df_dc</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span>

<span class="gp">In [525]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_dc</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">],</span> <span class="s2">&quot;string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [526]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_dc</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="s2">&quot;string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>

<span class="gp">In [527]: </span><span class="n">df_dc</span><span class="p">[</span><span class="s2">&quot;string2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;cool&quot;</span>

<span class="gp">In [528]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_dc</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="gp">In [529]: </span><span class="n">df_dc</span>
<span class="gh">Out[529]: </span><span class="go"></span>
<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991    foo    cool</span>
<span class="go">2000-01-02 -1.167564  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-03 -0.131959  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563    foo    cool</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685    NaN    cool</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386    NaN    cool</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031    foo    cool</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908    bar    cool</span>

<span class="go"># on-disk operations</span>
<span class="gp">In [530]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_dc&quot;</span><span class="p">,</span> <span class="n">df_dc</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;string2&quot;</span><span class="p">])</span>

<span class="gp">In [531]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_dc&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;B &gt; 0&quot;</span><span class="p">)</span>
<span class="gh">Out[531]: </span><span class="go"></span>
<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-02 -1.167564  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-03 -0.131959  1.000000  1.000000    foo    cool</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685    NaN    cool</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908    bar    cool</span>

<span class="go"># getting creative</span>
<span class="gp">In [532]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_dc&quot;</span><span class="p">,</span> <span class="s2">&quot;B &gt; 0 &amp; C &gt; 0 &amp; string == foo&quot;</span><span class="p">)</span>
<span class="gh">Out[532]: </span><span class="go"></span>
<span class="go">                   A    B    C string string2</span>
<span class="go">2000-01-02 -1.167564  1.0  1.0    foo    cool</span>
<span class="go">2000-01-03 -0.131959  1.0  1.0    foo    cool</span>

<span class="go"># this is in-memory version of this type of selection</span>
<span class="gp">In [533]: </span><span class="n">df_dc</span><span class="p">[(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">B</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">C</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span><span class="p">)]</span>
<span class="gh">Out[533]: </span><span class="go"></span>
<span class="go">                   A    B    C string string2</span>
<span class="go">2000-01-02 -1.167564  1.0  1.0    foo    cool</span>
<span class="go">2000-01-03 -0.131959  1.0  1.0    foo    cool</span>

<span class="go"># we have automagically created this index and the B/C/string/string2</span>
<span class="go"># columns are stored separately as ``PyTables`` columns</span>
<span class="gp">In [534]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df_dc</span><span class="o">.</span><span class="n">table</span>
<span class="gh">Out[534]: </span><span class="go"></span>
<span class="go">/df_dc/table (Table(8,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2),</span>
<span class="go">  &quot;C&quot;: Float64Col(shape=(), dflt=0.0, pos=3),</span>
<span class="go">  &quot;string&quot;: StringCol(itemsize=3, shape=(), dflt=b&#39;&#39;, pos=4),</span>
<span class="go">  &quot;string2&quot;: StringCol(itemsize=4, shape=(), dflt=b&#39;&#39;, pos=5)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (1680,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;B&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;C&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;string&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;string2&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
<p>There is some performance degradation by making lots of columns into
<code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">columns</span></code>, so it is up to the user to designate these. In addition,
you cannot change data columns (nor indexables) after the first
append/put operation (Of course you can simply read in the data and
create a new table!).</p>
</section>
<section id="iterator">
<h4>Iterator<a class="headerlink" href="#iterator" title="Permalink to this headline">#</a></h4>
<p>You can pass <code class="docutils literal notranslate"><span class="pre">iterator=True</span></code> or <code class="docutils literal notranslate"><span class="pre">chunksize=number_in_a_chunk</span></code>
to <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">select_as_multiple</span></code> to return an iterator on the results.
The default is 50,000 rows returned in a chunk.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [535]: </span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -0.398501 -0.677311 -0.874991</span>
<span class="go">2000-01-02 -1.167564 -0.593353  0.146262</span>
<span class="go">2000-01-03 -0.131959  0.089012  0.667450</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-04  0.169405 -1.358046 -0.105563</span>
<span class="go">2000-01-05  0.492195  0.076693  0.213685</span>
<span class="go">2000-01-06 -0.285283 -1.210529 -1.408386</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-07  0.941577 -0.342447  0.222031</span>
<span class="go">2000-01-08  0.052607  2.093214  1.064908</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use the iterator with <code class="docutils literal notranslate"><span class="pre">read_hdf</span></code> which will open, then
automatically close the store when finished iterating.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;store.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Note, that the chunksize keyword applies to the <strong>source</strong> rows. So if you
are doing a query, then the chunksize will subdivide the total rows in the table
and the query applied, returning an iterator on potentially unequal sized chunks.</p>
<p>Here is a recipe for generating a query and using it to create equal sized return
chunks.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [536]: </span><span class="n">dfeq</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)})</span>

<span class="gp">In [537]: </span><span class="n">dfeq</span>
<span class="gh">Out[537]: </span><span class="go"></span>
<span class="go">   number</span>
<span class="go">0       1</span>
<span class="go">1       2</span>
<span class="go">2       3</span>
<span class="go">3       4</span>
<span class="go">4       5</span>
<span class="go">5       6</span>
<span class="go">6       7</span>
<span class="go">7       8</span>
<span class="go">8       9</span>
<span class="go">9      10</span>

<span class="gp">In [538]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfeq&quot;</span><span class="p">,</span> <span class="n">dfeq</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;number&quot;</span><span class="p">])</span>

<span class="gp">In [539]: </span><span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="k">return</span> <span class="p">[</span><span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">n</span><span class="p">)]</span>
<span class="gp">   .....: </span>

<span class="gp">In [540]: </span><span class="n">evens</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="gp">In [541]: </span><span class="n">coordinates</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_as_coordinates</span><span class="p">(</span><span class="s2">&quot;dfeq&quot;</span><span class="p">,</span> <span class="s2">&quot;number=evens&quot;</span><span class="p">)</span>

<span class="gp">In [542]: </span><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dfeq&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">c</span><span class="p">))</span>
<span class="gp">   .....: </span>
<span class="go">   number</span>
<span class="go">1       2</span>
<span class="go">3       4</span>
<span class="go">   number</span>
<span class="go">5       6</span>
<span class="go">7       8</span>
<span class="go">   number</span>
<span class="go">9      10</span>
</pre></div>
</div>
</section>
<section id="advanced-queries">
<h4>Advanced queries<a class="headerlink" href="#advanced-queries" title="Permalink to this headline">#</a></h4>
<section id="select-a-single-column">
<h5>Select a single column<a class="headerlink" href="#select-a-single-column" title="Permalink to this headline">#</a></h5>
<p>To retrieve a single indexable or data column, use the
method <code class="docutils literal notranslate"><span class="pre">select_column</span></code>. This will, for example, enable you to get the index
very quickly. These return a <code class="docutils literal notranslate"><span class="pre">Series</span></code> of the result, indexed by the row number.
These do not currently accept the <code class="docutils literal notranslate"><span class="pre">where</span></code> selector.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [543]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s2">&quot;df_dc&quot;</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="gh">Out[543]: </span><span class="go"></span>
<span class="go">0   2000-01-01</span>
<span class="go">1   2000-01-02</span>
<span class="go">2   2000-01-03</span>
<span class="go">3   2000-01-04</span>
<span class="go">4   2000-01-05</span>
<span class="go">5   2000-01-06</span>
<span class="go">6   2000-01-07</span>
<span class="go">7   2000-01-08</span>
<span class="go">Name: index, dtype: datetime64[ns]</span>

<span class="gp">In [544]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s2">&quot;df_dc&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span>
<span class="gh">Out[544]: </span><span class="go"></span>
<span class="go">0    foo</span>
<span class="go">1    foo</span>
<span class="go">2    foo</span>
<span class="go">3    foo</span>
<span class="go">4    NaN</span>
<span class="go">5    NaN</span>
<span class="go">6    foo</span>
<span class="go">7    bar</span>
<span class="go">Name: string, dtype: object</span>
</pre></div>
</div>
</section>
<section id="selecting-coordinates">
<span id="io-hdf5-selecting-coordinates"></span><h5>Selecting coordinates<a class="headerlink" href="#selecting-coordinates" title="Permalink to this headline">#</a></h5>
<p>Sometimes you want to get the coordinates (a.k.a the index locations) of your query. This returns an
<code class="docutils literal notranslate"><span class="pre">Int64Index</span></code> of the resulting locations. These coordinates can also be passed to subsequent
<code class="docutils literal notranslate"><span class="pre">where</span></code> operations.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [545]: </span><span class="n">df_coord</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20000101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [546]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_coord&quot;</span><span class="p">,</span> <span class="n">df_coord</span><span class="p">)</span>

<span class="gp">In [547]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_as_coordinates</span><span class="p">(</span><span class="s2">&quot;df_coord&quot;</span><span class="p">,</span> <span class="s2">&quot;index &gt; 20020101&quot;</span><span class="p">)</span>

<span class="gp">In [548]: </span><span class="n">c</span>
<span class="gh">Out[548]: </span><span class="go"></span>
<span class="go">Int64Index([732, 733, 734, 735, 736, 737, 738, 739, 740, 741,</span>
<span class="go">            ...</span>
<span class="go">            990, 991, 992, 993, 994, 995, 996, 997, 998, 999],</span>
<span class="go">           dtype=&#39;int64&#39;, length=268)</span>

<span class="gp">In [549]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_coord&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="gh">Out[549]: </span><span class="go"></span>
<span class="go">                   0         1</span>
<span class="go">2002-01-02  0.009035  0.921784</span>
<span class="go">2002-01-03 -1.476563 -1.376375</span>
<span class="go">2002-01-04  1.266731  2.173681</span>
<span class="go">2002-01-05  0.147621  0.616468</span>
<span class="go">2002-01-06  0.008611  2.136001</span>
<span class="go">...              ...       ...</span>
<span class="go">2002-09-22  0.781169 -0.791687</span>
<span class="go">2002-09-23 -0.764810 -2.000933</span>
<span class="go">2002-09-24 -0.345662  0.393915</span>
<span class="go">2002-09-25 -0.116661  0.834638</span>
<span class="go">2002-09-26 -1.341780  0.686366</span>

<span class="go">[268 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="selecting-using-a-where-mask">
<span id="io-hdf5-where-mask"></span><h5>Selecting using a where mask<a class="headerlink" href="#selecting-using-a-where-mask" title="Permalink to this headline">#</a></h5>
<p>Sometime your query can involve creating a list of rows to select. Usually this <code class="docutils literal notranslate"><span class="pre">mask</span></code> would
be a resulting <code class="docutils literal notranslate"><span class="pre">index</span></code> from an indexing operation. This example selects the months of
a datetimeindex which are 5.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [550]: </span><span class="n">df_mask</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20000101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [551]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_mask&quot;</span><span class="p">,</span> <span class="n">df_mask</span><span class="p">)</span>

<span class="gp">In [552]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s2">&quot;df_mask&quot;</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="p">)</span>

<span class="gp">In [553]: </span><span class="n">where</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [554]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df_mask&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">where</span><span class="p">)</span>
<span class="gh">Out[554]: </span><span class="go"></span>
<span class="go">                   0         1</span>
<span class="go">2000-05-01 -0.386742 -0.977433</span>
<span class="go">2000-05-02 -0.228819  0.471671</span>
<span class="go">2000-05-03  0.337307  1.840494</span>
<span class="go">2000-05-04  0.050249  0.307149</span>
<span class="go">2000-05-05 -0.802947 -0.946730</span>
<span class="go">...              ...       ...</span>
<span class="go">2002-05-27  1.605281  1.741415</span>
<span class="go">2002-05-28 -0.804450 -0.715040</span>
<span class="go">2002-05-29 -0.874851  0.037178</span>
<span class="go">2002-05-30 -0.161167 -1.294944</span>
<span class="go">2002-05-31 -0.258463 -0.731969</span>

<span class="go">[93 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="storer-object">
<h5>Storer object<a class="headerlink" href="#storer-object" title="Permalink to this headline">#</a></h5>
<p>If you want to inspect the stored object, retrieve via
<code class="docutils literal notranslate"><span class="pre">get_storer</span></code>. You could use this programmatically to say get the number
of rows in an object.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [555]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s2">&quot;df_dc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">nrows</span>
<span class="gh">Out[555]: </span><span class="go">8</span>
</pre></div>
</div>
</section>
</section>
<section id="multiple-table-queries">
<h4>Multiple table queries<a class="headerlink" href="#multiple-table-queries" title="Permalink to this headline">#</a></h4>
<p>The methods <code class="docutils literal notranslate"><span class="pre">append_to_multiple</span></code> and
<code class="docutils literal notranslate"><span class="pre">select_as_multiple</span></code> can perform appending/selecting from
multiple tables at once. The idea is to have one table (call it the
selector table) that you index most/all of the columns, and perform your
queries. The other table(s) are data tables with an index matching the
selector tableâ€™s index. You can then perform a very fast query
on the selector table, yet get lots of data back. This method is similar to
having a very wide table, but enables more efficient queries.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">append_to_multiple</span></code> method splits a given single DataFrame
into multiple tables according to <code class="docutils literal notranslate"><span class="pre">d</span></code>, a dictionary that maps the
table names to a list of â€˜columnsâ€™ you want in that table. If <code class="docutils literal notranslate"><span class="pre">None</span></code>
is used in place of a list, that table will have the remaining
unspecified columns of the given DataFrame. The argument <code class="docutils literal notranslate"><span class="pre">selector</span></code>
defines which table is the selector table (which you can make queries from).
The argument <code class="docutils literal notranslate"><span class="pre">dropna</span></code> will drop rows from the input <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to ensure
tables are synchronized. This means that if a row for one of the tables
being written to is entirely <code class="docutils literal notranslate"><span class="pre">np.NaN</span></code>, that row will be dropped from all tables.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dropna</span></code> is False, <strong>THE USER IS RESPONSIBLE FOR SYNCHRONIZING THE TABLES</strong>.
Remember that entirely <code class="docutils literal notranslate"><span class="pre">np.Nan</span></code> rows are not written to the HDFStore, so if
you choose to call <code class="docutils literal notranslate"><span class="pre">dropna=False</span></code>, some tables may have more rows than others,
and therefore <code class="docutils literal notranslate"><span class="pre">select_as_multiple</span></code> may not work or it may return unexpected
results.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [556]: </span><span class="n">df_mt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;1/1/2000&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [557]: </span><span class="n">df_mt</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>

<span class="gp">In [558]: </span><span class="n">df_mt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_mt</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="go"># you can also create the tables individually</span>
<span class="gp">In [559]: </span><span class="n">store</span><span class="o">.</span><span class="n">append_to_multiple</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;df1_mt&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="s2">&quot;df2_mt&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span> <span class="n">df_mt</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;df1_mt&quot;</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [560]: </span><span class="n">store</span>
<span class="gh">Out[560]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>

<span class="go"># individual tables were created</span>
<span class="gp">In [561]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df1_mt&quot;</span><span class="p">)</span>
<span class="gh">Out[561]: </span><span class="go"></span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01  0.079529 -1.459471</span>
<span class="go">2000-01-02       NaN       NaN</span>
<span class="go">2000-01-03 -0.423113  2.314361</span>
<span class="go">2000-01-04  0.756744 -0.792372</span>
<span class="go">2000-01-05 -0.184971  0.170852</span>
<span class="go">2000-01-06  0.678830  0.633974</span>
<span class="go">2000-01-07  0.034973  0.974369</span>
<span class="go">2000-01-08 -2.110103  0.243062</span>

<span class="gp">In [562]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;df2_mt&quot;</span><span class="p">)</span>
<span class="gh">Out[562]: </span><span class="go"></span>
<span class="go">                   C         D         E         F  foo</span>
<span class="go">2000-01-01 -0.596306 -0.910022 -1.057072 -0.864360  bar</span>
<span class="go">2000-01-02  0.477849  0.283128 -2.045700 -0.338206  bar</span>
<span class="go">2000-01-03 -0.033100 -0.965461 -0.001079 -0.351689  bar</span>
<span class="go">2000-01-04 -0.513555 -1.484776 -0.796280 -0.182321  bar</span>
<span class="go">2000-01-05 -0.872407 -1.751515  0.934334  0.938818  bar</span>
<span class="go">2000-01-06 -1.398256  1.347142 -0.029520  0.082738  bar</span>
<span class="go">2000-01-07 -0.755544  0.380786 -1.634116  1.293610  bar</span>
<span class="go">2000-01-08  1.453064  0.500558 -0.574475  0.694324  bar</span>

<span class="go"># as a multiple</span>
<span class="gp">In [563]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_as_multiple</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">[</span><span class="s2">&quot;df1_mt&quot;</span><span class="p">,</span> <span class="s2">&quot;df2_mt&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="n">where</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&gt;0&quot;</span><span class="p">,</span> <span class="s2">&quot;B&gt;0&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>    <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;df1_mt&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[563]: </span><span class="go"></span>
<span class="go">                   A         B         C         D         E         F  foo</span>
<span class="go">2000-01-06  0.678830  0.633974 -1.398256  1.347142 -0.029520  0.082738  bar</span>
<span class="go">2000-01-07  0.034973  0.974369 -0.755544  0.380786 -1.634116  1.293610  bar</span>
</pre></div>
</div>
</section>
</section>
<section id="delete-from-a-table">
<h3>Delete from a table<a class="headerlink" href="#delete-from-a-table" title="Permalink to this headline">#</a></h3>
<p>You can delete from a table selectively by specifying a <code class="docutils literal notranslate"><span class="pre">where</span></code>. In
deleting rows, it is important to understand the <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> deletes
rows by erasing the rows, then <strong>moving</strong> the following data. Thus
deleting can potentially be a very expensive operation depending on the
orientation of your data. To get optimal performance, itâ€™s
worthwhile to have the dimension you are deleting be the first of the
<code class="docutils literal notranslate"><span class="pre">indexables</span></code>.</p>
<p>Data is ordered (on the disk) in terms of the <code class="docutils literal notranslate"><span class="pre">indexables</span></code>. Hereâ€™s a
simple use case. You store panel-type data, with dates in the
<code class="docutils literal notranslate"><span class="pre">major_axis</span></code> and ids in the <code class="docutils literal notranslate"><span class="pre">minor_axis</span></code>. The data is then
interleaved like this:</p>
<ul class="simple">
<li><dl class="simple">
<dt>date_1</dt><dd><ul>
<li><p>id_1</p></li>
<li><p>id_2</p></li>
<li><p>.</p></li>
<li><p>id_n</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>date_2</dt><dd><ul>
<li><p>id_1</p></li>
<li><p>.</p></li>
<li><p>id_n</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>It should be clear that a delete operation on the <code class="docutils literal notranslate"><span class="pre">major_axis</span></code> will be
fairly quick, as one chunk is removed, then the following data moved. On
the other hand a delete operation on the <code class="docutils literal notranslate"><span class="pre">minor_axis</span></code> will be very
expensive. In this case it would almost certainly be faster to rewrite
the table using a <code class="docutils literal notranslate"><span class="pre">where</span></code> that selects all but the missing data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please note that HDF5 <strong>DOES NOT RECLAIM SPACE</strong> in the h5 files
automatically. Thus, repeatedly deleting (or removing nodes) and adding
again, <strong>WILL TEND TO INCREASE THE FILE SIZE</strong>.</p>
<p>To <em>repack and clean</em> the file, use <a class="reference internal" href="#io-hdf5-ptrepack"><span class="std std-ref">ptrepack</span></a>.</p>
</div>
</section>
<section id="notes-caveats">
<span id="io-hdf5-notes"></span><h3>Notes &amp; caveats<a class="headerlink" href="#notes-caveats" title="Permalink to this headline">#</a></h3>
<section id="compression">
<h4>Compression<a class="headerlink" href="#compression" title="Permalink to this headline">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">PyTables</span></code> allows the stored data to be compressed. This applies to
all kinds of stores, not just tables. Two parameters are used to
control compression: <code class="docutils literal notranslate"><span class="pre">complevel</span></code> and <code class="docutils literal notranslate"><span class="pre">complib</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">complevel</span></code> specifies if and how hard data is to be compressed.
<code class="docutils literal notranslate"><span class="pre">complevel=0</span></code> and <code class="docutils literal notranslate"><span class="pre">complevel=None</span></code> disables compression and
<code class="docutils literal notranslate"><span class="pre">0&lt;complevel&lt;10</span></code> enables compression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">complib</span></code> specifies which compression library to use.
If nothing is specified the default library <code class="docutils literal notranslate"><span class="pre">zlib</span></code> is used. A
compression library usually optimizes for either good compression rates
or speed and the results will depend on the type of data. Which type of
compression to choose depends on your specific needs and data. The list
of supported compression libraries:</p>
<ul>
<li><p><a class="reference external" href="javascript:if(confirm('https://zlib.net/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://zlib.net/'" tppabs="https://zlib.net/">zlib</a>: The default compression library.
A classic in terms of compression, achieves good compression
rates but is somewhat slow.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://www.oberhumer.com/opensource/lzo/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.oberhumer.com/opensource/lzo/'" tppabs="https://www.oberhumer.com/opensource/lzo/">lzo</a>: Fast
compression and decompression.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://sourceware.org/bzip2/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://sourceware.org/bzip2/'" tppabs="https://sourceware.org/bzip2/">bzip2</a>: Good compression rates.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://www.blosc.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.blosc.org/'" tppabs="https://www.blosc.org/">blosc</a>: Fast compression and
decompression.</p>
<p>Support for alternative blosc compressors:</p>
<ul class="simple">
<li><p><a class="reference external" href="javascript:if(confirm('https://www.blosc.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.blosc.org/'" tppabs="https://www.blosc.org/">blosc:blosclz</a> This is the
default compressor for <code class="docutils literal notranslate"><span class="pre">blosc</span></code></p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://fastcompression.blogspot.com/p/lz4.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://fastcompression.blogspot.com/p/lz4.html'" tppabs="https://fastcompression.blogspot.com/p/lz4.html">blosc:lz4</a>:
A compact, very popular and fast compressor.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://fastcompression.blogspot.com/p/lz4.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://fastcompression.blogspot.com/p/lz4.html'" tppabs="https://fastcompression.blogspot.com/p/lz4.html">blosc:lz4hc</a>:
A tweaked version of LZ4, produces better
compression ratios at the expense of speed.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://google.github.io/snappy/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://google.github.io/snappy/'" tppabs="https://google.github.io/snappy/">blosc:snappy</a>:
A popular compressor used in many places.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://zlib.net/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://zlib.net/'" tppabs="https://zlib.net/">blosc:zlib</a>: A classic;
somewhat slower than the previous ones, but
achieving better compression ratios.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://facebook.github.io/zstd/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://facebook.github.io/zstd/'" tppabs="https://facebook.github.io/zstd/">blosc:zstd</a>: An
extremely well balanced codec; it provides the best
compression ratios among the others above, and at
reasonably fast speed.</p></li>
</ul>
</li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">complib</span></code> is defined as something other than the listed libraries a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> exception is issued.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the library specified with the <code class="docutils literal notranslate"><span class="pre">complib</span></code> option is missing on your platform,
compression defaults to <code class="docutils literal notranslate"><span class="pre">zlib</span></code> without further ado.</p>
</div>
<p>Enable compression for all objects within the file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">store_compressed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span>
    <span class="s2">&quot;store_compressed.h5&quot;</span><span class="p">,</span> <span class="n">complevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="s2">&quot;blosc:blosclz&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Or on-the-fly compression (this only applies to tables) in stores where compression is not enabled:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="s2">&quot;zlib&quot;</span><span class="p">,</span> <span class="n">complevel</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ptrepack">
<span id="io-hdf5-ptrepack"></span><h4>ptrepack<a class="headerlink" href="#ptrepack" title="Permalink to this headline">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">PyTables</span></code> offers better write performance when tables are compressed after
they are written, as opposed to turning on compression at the very
beginning. You can use the supplied <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> utility
<code class="docutils literal notranslate"><span class="pre">ptrepack</span></code>. In addition, <code class="docutils literal notranslate"><span class="pre">ptrepack</span></code> can change compression levels
after the fact.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ptrepack --chunkshape=auto --propindexes --complevel=9 --complib=blosc in.h5 out.h5</span>
</pre></div>
</div>
<p>Furthermore <code class="docutils literal notranslate"><span class="pre">ptrepack</span> <span class="pre">in.h5</span> <span class="pre">out.h5</span></code> will <em>repack</em> the file to allow
you to reuse previously deleted space. Alternatively, one can simply
remove the file and write again, or use the <code class="docutils literal notranslate"><span class="pre">copy</span></code> method.</p>
</section>
<section id="caveats">
<span id="io-hdf5-caveats"></span><h4>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">#</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> is <strong>not-threadsafe for writing</strong>. The underlying
<code class="docutils literal notranslate"><span class="pre">PyTables</span></code> only supports concurrent reads (via threading or
processes). If you need reading and writing <em>at the same time</em>, you
need to serialize these operations in a single thread in a single
process. You will corrupt your data otherwise. See the (<a class="reference external" href="javascript:if(confirm('https://github.com/pandas-dev/pandas/issues/2397  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/pandas-dev/pandas/issues/2397'" tppabs="https://github.com/pandas-dev/pandas/issues/2397">GH2397</a>) for more information.</p>
</div>
<ul class="simple">
<li><p>If you use locks to manage write access between multiple processes, you
may want to use <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/os.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/os.html#os.fsync'" tppabs="https://docs.python.org/3/library/os.html#os.fsync" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsync()</span></code></a> before releasing write locks. For
convenience you can use <code class="docutils literal notranslate"><span class="pre">store.flush(fsync=True)</span></code> to do this for you.</p></li>
<li><p>Once a <code class="docutils literal notranslate"><span class="pre">table</span></code> is created columns (DataFrame)
are fixed; only exactly the same columns can be appended</p></li>
<li><p>Be aware that timezones (e.g., <code class="docutils literal notranslate"><span class="pre">pytz.timezone('US/Eastern')</span></code>)
are not necessarily equal across timezone versions. So if data is
localized to a specific timezone in the HDFStore using one version
of a timezone library and that data is updated with another version, the data
will be converted to UTC since these timezones are not considered
equal. Either use the same version of timezone library or use <code class="docutils literal notranslate"><span class="pre">tz_convert</span></code> with
the updated timezone definition.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">PyTables</span></code> will show a <code class="docutils literal notranslate"><span class="pre">NaturalNameWarning</span></code> if a column name
cannot be used as an attribute selector.
<em>Natural</em> identifiers contain only letters, numbers, and underscores,
and may not begin with a number.
Other identifiers cannot be used in a <code class="docutils literal notranslate"><span class="pre">where</span></code> clause
and are generally a bad idea.</p>
</div>
</section>
</section>
<section id="datatypes">
<span id="io-hdf5-data-types"></span><h3>DataTypes<a class="headerlink" href="#datatypes" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> will map an object dtype to the <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> underlying
dtype. This means the following types are known to work:</p>
<table class="table">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Represents missing values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>floating : <code class="docutils literal notranslate"><span class="pre">float64,</span> <span class="pre">float32,</span> <span class="pre">float16</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">np.nan</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>integer : <code class="docutils literal notranslate"><span class="pre">int64,</span> <span class="pre">int32,</span> <span class="pre">int8,</span> <span class="pre">uint64,uint32,</span> <span class="pre">uint8</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>boolean</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>categorical : see the section below</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>object : <code class="docutils literal notranslate"><span class="pre">strings</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">np.nan</span></code></p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">unicode</span></code> columns are not supported, and <strong>WILL FAIL</strong>.</p>
<section id="categorical-data">
<span id="io-hdf5-categorical"></span><h4>Categorical data<a class="headerlink" href="#categorical-data" title="Permalink to this headline">#</a></h4>
<p>You can write data that contains <code class="docutils literal notranslate"><span class="pre">category</span></code> dtypes to a <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code>.
Queries work the same as if it was an object array. However, the <code class="docutils literal notranslate"><span class="pre">category</span></code> dtyped data is
stored in a more efficient manner.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [564]: </span><span class="n">dfcat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;aabbcdba&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">),</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">)}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [565]: </span><span class="n">dfcat</span>
<span class="gh">Out[565]: </span><span class="go"></span>
<span class="go">   A         B</span>
<span class="go">0  a -1.608059</span>
<span class="go">1  a  0.851060</span>
<span class="go">2  b -0.736931</span>
<span class="go">3  b  0.003538</span>
<span class="go">4  c -1.422611</span>
<span class="go">5  d  2.060901</span>
<span class="go">6  b  0.993899</span>
<span class="go">7  a -1.371768</span>

<span class="gp">In [566]: </span><span class="n">dfcat</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[566]: </span><span class="go"></span>
<span class="go">A    category</span>
<span class="go">B     float64</span>
<span class="go">dtype: object</span>

<span class="gp">In [567]: </span><span class="n">cstore</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;cats.h5&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>

<span class="gp">In [568]: </span><span class="n">cstore</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfcat&quot;</span><span class="p">,</span> <span class="n">dfcat</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">])</span>

<span class="gp">In [569]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">cstore</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dfcat&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;A in [&#39;b&#39;, &#39;c&#39;]&quot;</span><span class="p">)</span>

<span class="gp">In [570]: </span><span class="n">result</span>
<span class="gh">Out[570]: </span><span class="go"></span>
<span class="go">   A         B</span>
<span class="go">2  b -0.736931</span>
<span class="go">3  b  0.003538</span>
<span class="go">4  c -1.422611</span>
<span class="go">6  b  0.993899</span>

<span class="gp">In [571]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[571]: </span><span class="go"></span>
<span class="go">A    category</span>
<span class="go">B     float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="string-columns">
<h4>String columns<a class="headerlink" href="#string-columns" title="Permalink to this headline">#</a></h4>
<p><strong>min_itemsize</strong></p>
<p>The underlying implementation of <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> uses a fixed column width (itemsize) for string columns.
A string column itemsize is calculated as the maximum of the
length of data (for that column) that is passed to the <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code>, <strong>in the first append</strong>. Subsequent appends,
may introduce a string for a column <strong>larger</strong> than the column can hold, an Exception will be raised (otherwise you
could have a silent truncation of these columns, leading to loss of information). In the future we may relax this and
allow a user-specified truncation to occur.</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">min_itemsize</span></code> on the first table creation to a-priori specify the minimum length of a particular string column.
<code class="docutils literal notranslate"><span class="pre">min_itemsize</span></code> can be an integer, or a dict mapping a column name to an integer. You can pass <code class="docutils literal notranslate"><span class="pre">values</span></code> as a key to
allow all <em>indexables</em> or <em>data_columns</em> to have this min_itemsize.</p>
<p>Passing a <code class="docutils literal notranslate"><span class="pre">min_itemsize</span></code> dict will cause all passed columns to be created as <em>data_columns</em> automatically.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are not passing any <code class="docutils literal notranslate"><span class="pre">data_columns</span></code>, then the <code class="docutils literal notranslate"><span class="pre">min_itemsize</span></code> will be the maximum of the length of any string passed</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [572]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>

<span class="gp">In [573]: </span><span class="n">dfs</span>
<span class="gh">Out[573]: </span><span class="go"></span>
<span class="go">     A    B</span>
<span class="go">0  foo  bar</span>
<span class="go">1  foo  bar</span>
<span class="go">2  foo  bar</span>
<span class="go">3  foo  bar</span>
<span class="go">4  foo  bar</span>

<span class="go"># A and B have a size of 30</span>
<span class="gp">In [574]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfs&quot;</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">min_itemsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="gp">In [575]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s2">&quot;dfs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gh">Out[575]: </span><span class="go"></span>
<span class="go">/dfs/table (Table(5,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: StringCol(itemsize=30, shape=(2,), dflt=b&#39;&#39;, pos=1)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (963,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False}</span>

<span class="go"># A is created as a data_column with a size of 30</span>
<span class="go"># B is size is calculated</span>
<span class="gp">In [576]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfs2&quot;</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">min_itemsize</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">})</span>

<span class="gp">In [577]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s2">&quot;dfs2&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>
<span class="gh">Out[577]: </span><span class="go"></span>
<span class="go">/dfs2/table (Table(5,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: StringCol(itemsize=3, shape=(1,), dflt=b&#39;&#39;, pos=1),</span>
<span class="go">  &quot;A&quot;: StringCol(itemsize=30, shape=(), dflt=b&#39;&#39;, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (1598,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;A&quot;: Index(6, mediumshuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
<p><strong>nan_rep</strong></p>
<p>String columns will serialize a <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> (a missing value) with the <code class="docutils literal notranslate"><span class="pre">nan_rep</span></code> string representation. This defaults to the string value <code class="docutils literal notranslate"><span class="pre">nan</span></code>.
You could inadvertently turn an actual <code class="docutils literal notranslate"><span class="pre">nan</span></code> value into a missing value.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [578]: </span><span class="n">dfss</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;nan&quot;</span><span class="p">]})</span>

<span class="gp">In [579]: </span><span class="n">dfss</span>
<span class="gh">Out[579]: </span><span class="go"></span>
<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  nan</span>

<span class="gp">In [580]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfss&quot;</span><span class="p">,</span> <span class="n">dfss</span><span class="p">)</span>

<span class="gp">In [581]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dfss&quot;</span><span class="p">)</span>
<span class="gh">Out[581]: </span><span class="go"></span>
<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  NaN</span>

<span class="go"># here you need to specify a different nan rep</span>
<span class="gp">In [582]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dfss2&quot;</span><span class="p">,</span> <span class="n">dfss</span><span class="p">,</span> <span class="n">nan_rep</span><span class="o">=</span><span class="s2">&quot;_nan_&quot;</span><span class="p">)</span>

<span class="gp">In [583]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dfss2&quot;</span><span class="p">)</span>
<span class="gh">Out[583]: </span><span class="go"></span>
<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  nan</span>
</pre></div>
</div>
</section>
</section>
<section id="external-compatibility">
<span id="io-external-compatibility"></span><h3>External compatibility<a class="headerlink" href="#external-compatibility" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> writes <code class="docutils literal notranslate"><span class="pre">table</span></code> format objects in specific formats suitable for
producing loss-less round trips to pandas objects. For external
compatibility, <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> can read native <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> format
tables.</p>
<p>It is possible to write an <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> object that can easily be imported into <code class="docutils literal notranslate"><span class="pre">R</span></code> using the
<code class="docutils literal notranslate"><span class="pre">rhdf5</span></code> library (<a class="reference external" href="javascript:if(confirm('https://www.bioconductor.org/packages/release/bioc/html/rhdf5.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.bioconductor.org/packages/release/bioc/html/rhdf5.html'" tppabs="https://www.bioconductor.org/packages/release/bioc/html/rhdf5.html">Package website</a>). Create a table format store like this:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [584]: </span><span class="n">df_for_r</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;first&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;second&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,)),</span>
<span class="gp">   .....: </span>    <span class="p">},</span>
<span class="gp">   .....: </span>    <span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [585]: </span><span class="n">df_for_r</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[585]: </span><span class="go"></span>
<span class="go">      first    second  class</span>
<span class="go">0  0.013480  0.504941      0</span>
<span class="go">1  0.690984  0.898188      1</span>
<span class="go">2  0.510113  0.618748      1</span>
<span class="go">3  0.357698  0.004972      0</span>
<span class="go">4  0.451658  0.012065      1</span>

<span class="gp">In [586]: </span><span class="n">store_export</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;export.h5&quot;</span><span class="p">)</span>

<span class="gp">In [587]: </span><span class="n">store_export</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;df_for_r&quot;</span><span class="p">,</span> <span class="n">df_for_r</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="n">df_dc</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [588]: </span><span class="n">store_export</span>
<span class="gh">Out[588]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: export.h5</span>
</pre></div>
</div>
<p>In R this file can be read into a <code class="docutils literal notranslate"><span class="pre">data.frame</span></code> object using the <code class="docutils literal notranslate"><span class="pre">rhdf5</span></code>
library. The following example function reads the corresponding column names
and data values from the values and assembles them into a <code class="docutils literal notranslate"><span class="pre">data.frame</span></code>:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load values and column names for all datasets from corresponding nodes and</span>
<span class="c1"># insert them into one data.frame object.</span>

<span class="nf">library</span><span class="p">(</span><span class="n">rhdf5</span><span class="p">)</span>

<span class="n">loadhdf5data</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">h5File</span><span class="p">)</span> <span class="p">{</span>

<span class="n">listing</span> <span class="o">&lt;-</span> <span class="nf">h5ls</span><span class="p">(</span><span class="n">h5File</span><span class="p">)</span>
<span class="c1"># Find all data nodes, values are stored in *_values and corresponding column</span>
<span class="c1"># titles in *_items</span>
<span class="n">data_nodes</span> <span class="o">&lt;-</span> <span class="nf">grep</span><span class="p">(</span><span class="s">&quot;_values&quot;</span><span class="p">,</span> <span class="n">listing</span><span class="o">$</span><span class="n">name</span><span class="p">)</span>
<span class="n">name_nodes</span> <span class="o">&lt;-</span> <span class="nf">grep</span><span class="p">(</span><span class="s">&quot;_items&quot;</span><span class="p">,</span> <span class="n">listing</span><span class="o">$</span><span class="n">name</span><span class="p">)</span>
<span class="n">data_paths</span> <span class="o">=</span> <span class="nf">paste</span><span class="p">(</span><span class="n">listing</span><span class="o">$</span><span class="n">group</span><span class="p">[</span><span class="n">data_nodes</span><span class="p">],</span> <span class="n">listing</span><span class="o">$</span><span class="n">name</span><span class="p">[</span><span class="n">data_nodes</span><span class="p">],</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
<span class="n">name_paths</span> <span class="o">=</span> <span class="nf">paste</span><span class="p">(</span><span class="n">listing</span><span class="o">$</span><span class="n">group</span><span class="p">[</span><span class="n">name_nodes</span><span class="p">],</span> <span class="n">listing</span><span class="o">$</span><span class="n">name</span><span class="p">[</span><span class="n">name_nodes</span><span class="p">],</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
<span class="n">columns</span> <span class="o">=</span> <span class="nf">list</span><span class="p">()</span>
<span class="nf">for </span><span class="p">(</span><span class="n">idx</span> <span class="n">in</span> <span class="nf">seq</span><span class="p">(</span><span class="n">data_paths</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1"># NOTE: matrices returned by h5read have to be transposed to obtain</span>
  <span class="c1"># required Fortran order!</span>
  <span class="n">data</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="nf">t</span><span class="p">(</span><span class="nf">h5read</span><span class="p">(</span><span class="n">h5File</span><span class="p">,</span> <span class="n">data_paths</span><span class="p">[</span><span class="n">idx</span><span class="p">])))</span>
  <span class="n">names</span> <span class="o">&lt;-</span> <span class="nf">t</span><span class="p">(</span><span class="nf">h5read</span><span class="p">(</span><span class="n">h5File</span><span class="p">,</span> <span class="n">name_paths</span><span class="p">[</span><span class="n">idx</span><span class="p">]))</span>
  <span class="n">entry</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
  <span class="nf">colnames</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">names</span>
  <span class="n">columns</span> <span class="o">&lt;-</span> <span class="nf">append</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">data</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>

<span class="nf">return</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now you can import the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> into R:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="nf">loadhdf5data</span><span class="p">(</span><span class="s">&quot;transfer.hdf5&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">head</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
         <span class="n">first</span>    <span class="n">second</span> <span class="n">class</span>
<span class="m">1</span> <span class="m">0.4170220047</span> <span class="m">0.3266449</span>     <span class="m">0</span>
<span class="m">2</span> <span class="m">0.7203244934</span> <span class="m">0.5270581</span>     <span class="m">0</span>
<span class="m">3</span> <span class="m">0.0001143748</span> <span class="m">0.8859421</span>     <span class="m">1</span>
<span class="m">4</span> <span class="m">0.3023325726</span> <span class="m">0.3572698</span>     <span class="m">1</span>
<span class="m">5</span> <span class="m">0.1467558908</span> <span class="m">0.9085352</span>     <span class="m">1</span>
<span class="m">6</span> <span class="m">0.0923385948</span> <span class="m">0.6233601</span>     <span class="m">1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The R function lists the entire HDF5 fileâ€™s contents and assembles the
<code class="docutils literal notranslate"><span class="pre">data.frame</span></code> object from all matching nodes, so use this only as a
starting point if you have stored multiple <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects to a
single HDF5 file.</p>
</div>
</section>
<section id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tables</span></code> format come with a writing performance penalty as compared to
<code class="docutils literal notranslate"><span class="pre">fixed</span></code> stores. The benefit is the ability to append/delete and
query (potentially very large amounts of data). Write times are
generally longer as compared with regular stores. Query times can
be quite fast, especially on an indexed axis.</p></li>
<li><p>You can pass <code class="docutils literal notranslate"><span class="pre">chunksize=&lt;int&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">append</span></code>, specifying the
write chunksize (default is 50000). This will significantly lower
your memory usage on writing.</p></li>
<li><p>You can pass <code class="docutils literal notranslate"><span class="pre">expectedrows=&lt;int&gt;</span></code> to the first <code class="docutils literal notranslate"><span class="pre">append</span></code>,
to set the TOTAL number of rows that <code class="docutils literal notranslate"><span class="pre">PyTables</span></code> will expect.
This will optimize read/write performance.</p></li>
<li><p>Duplicate rows can be written to tables, but are filtered out in
selection (with the last items being selected; thus a table is
unique on major, minor pairs)</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">PerformanceWarning</span></code> will be raised if you are attempting to
store types that will be pickled by PyTables (rather than stored as
endemic types). See
<a class="reference external" href="javascript:if(confirm('https://stackoverflow.com/questions/14355151/how-to-make-pandas-hdfstore-put-operation-faster/14370190  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://stackoverflow.com/questions/14355151/how-to-make-pandas-hdfstore-put-operation-faster/14370190#14370190'" tppabs="https://stackoverflow.com/questions/14355151/how-to-make-pandas-hdfstore-put-operation-faster/14370190#14370190">Here</a>
for more information and some solutions.</p></li>
</ul>
</section>
</section>
<section id="feather">
<span id="io-feather"></span><h2>Feather<a class="headerlink" href="#feather" title="Permalink to this headline">#</a></h2>
<p>Feather provides binary columnar serialization for data frames. It is designed to make reading and writing data
frames efficient, and to make sharing data across data analysis languages easy.</p>
<p>Feather is designed to faithfully serialize and de-serialize DataFrames, supporting all of the pandas
dtypes, including extension dtypes such as categorical and datetime with tz.</p>
<p>Several caveats:</p>
<ul class="simple">
<li><p>The format will NOT write an <code class="docutils literal notranslate"><span class="pre">Index</span></code>, or <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> for the
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and will raise an error if a non-default one is provided. You
can <code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> to store the index or <code class="docutils literal notranslate"><span class="pre">.reset_index(drop=True)</span></code> to
ignore it.</p></li>
<li><p>Duplicate column names and non-string columns names are not supported</p></li>
<li><p>Actual Python objects in object dtype columns are not supported. These will
raise a helpful error message on an attempt at serialization.</p></li>
</ul>
<p>See the <a class="reference external" href="javascript:if(confirm('https://github.com/wesm/feather  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/wesm/feather'" tppabs="https://github.com/wesm/feather">Full Documentation</a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [589]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;u1&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;g&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;US/Eastern&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;ns&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [590]: </span><span class="n">df</span>
<span class="gh">Out[590]: </span><span class="go"></span>
<span class="go">   a  b  c  ...          g                         h                             i</span>
<span class="go">0  a  1  3  ... 2013-01-01 2013-01-01 00:00:00-05:00 2013-01-01 00:00:00.000000000</span>
<span class="go">1  b  2  4  ... 2013-01-02 2013-01-02 00:00:00-05:00 2013-01-01 00:00:00.000000001</span>
<span class="go">2  c  3  5  ... 2013-01-03 2013-01-03 00:00:00-05:00 2013-01-01 00:00:00.000000002</span>

<span class="go">[3 rows x 9 columns]</span>

<span class="gp">In [591]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[591]: </span><span class="go"></span>
<span class="go">a                        object</span>
<span class="go">b                         int64</span>
<span class="go">c                         uint8</span>
<span class="go">d                       float64</span>
<span class="go">e                          bool</span>
<span class="go">f                      category</span>
<span class="go">g                datetime64[ns]</span>
<span class="go">h    datetime64[ns, US/Eastern]</span>
<span class="go">i                datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Write to a feather file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [592]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_feather</span><span class="p">(</span><span class="s2">&quot;example.feather&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read from a feather file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [593]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_feather</span><span class="p">(</span><span class="s2">&quot;example.feather&quot;</span><span class="p">)</span>

<span class="gp">In [594]: </span><span class="n">result</span>
<span class="gh">Out[594]: </span><span class="go"></span>
<span class="go">   a  b  c  ...          g                         h                             i</span>
<span class="go">0  a  1  3  ... 2013-01-01 2013-01-01 00:00:00-05:00 2013-01-01 00:00:00.000000000</span>
<span class="go">1  b  2  4  ... 2013-01-02 2013-01-02 00:00:00-05:00 2013-01-01 00:00:00.000000001</span>
<span class="go">2  c  3  5  ... 2013-01-03 2013-01-03 00:00:00-05:00 2013-01-01 00:00:00.000000002</span>

<span class="go">[3 rows x 9 columns]</span>

<span class="go"># we preserve dtypes</span>
<span class="gp">In [595]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[595]: </span><span class="go"></span>
<span class="go">a                        object</span>
<span class="go">b                         int64</span>
<span class="go">c                         uint8</span>
<span class="go">d                       float64</span>
<span class="go">e                          bool</span>
<span class="go">f                      category</span>
<span class="go">g                datetime64[ns]</span>
<span class="go">h    datetime64[ns, US/Eastern]</span>
<span class="go">i                datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="parquet">
<span id="io-parquet"></span><h2>Parquet<a class="headerlink" href="#parquet" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="javascript:if(confirm('https://parquet.apache.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://parquet.apache.org/'" tppabs="https://parquet.apache.org/">Apache Parquet</a> provides a partitioned binary columnar serialization for data frames. It is designed to
make reading and writing data frames efficient, and to make sharing data across data analysis
languages easy. Parquet can use a variety of compression techniques to shrink the file size as much as possible
while still maintaining good read performance.</p>
<p>Parquet is designed to faithfully serialize and de-serialize <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> s, supporting all of the pandas
dtypes, including extension dtypes such as datetime with tz.</p>
<p>Several caveats.</p>
<ul class="simple">
<li><p>Duplicate column names and non-string columns names are not supported.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> engine always writes the index to the output, but <code class="docutils literal notranslate"><span class="pre">fastparquet</span></code> only writes non-default
indexes. This extra column can cause problems for non-pandas consumers that are not expecting it. You can
force including or omitting indexes with the <code class="docutils literal notranslate"><span class="pre">index</span></code> argument, regardless of the underlying engine.</p></li>
<li><p>Index level names, if specified, must be strings.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> engine, categorical dtypes for non-string types can be serialized to parquet, but will de-serialize as their primitive dtype.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> engine preserves the <code class="docutils literal notranslate"><span class="pre">ordered</span></code> flag of categorical dtypes with string types. <code class="docutils literal notranslate"><span class="pre">fastparquet</span></code> does not preserve the <code class="docutils literal notranslate"><span class="pre">ordered</span></code> flag.</p></li>
<li><p>Non supported types include <code class="docutils literal notranslate"><span class="pre">Interval</span></code> and actual Python object types. These will raise a helpful error message
on an attempt at serialization. <code class="docutils literal notranslate"><span class="pre">Period</span></code> type is supported with pyarrow &gt;= 0.16.0.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> engine preserves extension data types such as the nullable integer and string data
type (requiring pyarrow &gt;= 0.16.0, and requiring the extension type to implement the needed protocols,
see the <a class="reference internal" href="extending.html#extending-extension-arrow" tppabs="https://pandas.pydata.org/pandas-docs/stable/development/extending.html#extending-extension-arrow"><span class="std std-ref">extension types documentation</span></a>).</p></li>
</ul>
<p>You can specify an <code class="docutils literal notranslate"><span class="pre">engine</span></code> to direct the serialization. This can be one of <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code>, or <code class="docutils literal notranslate"><span class="pre">fastparquet</span></code>, or <code class="docutils literal notranslate"><span class="pre">auto</span></code>.
If the engine is NOT specified, then the <code class="docutils literal notranslate"><span class="pre">pd.options.io.parquet.engine</span></code> option is checked; if this is also <code class="docutils literal notranslate"><span class="pre">auto</span></code>,
then <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> is tried, and falling back to <code class="docutils literal notranslate"><span class="pre">fastparquet</span></code>.</p>
<p>See the documentation for <a class="reference external" href="javascript:if(confirm('https://arrow.apache.org/docs/python/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://arrow.apache.org/docs/python/'" tppabs="https://arrow.apache.org/docs/python/">pyarrow</a> and <a class="reference external" href="javascript:if(confirm('https://fastparquet.readthedocs.io/en/latest/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://fastparquet.readthedocs.io/en/latest/'" tppabs="https://fastparquet.readthedocs.io/en/latest/">fastparquet</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These engines are very similar and should read/write nearly identical parquet format files.
<code class="docutils literal notranslate"><span class="pre">pyarrow&gt;=8.0.0</span></code> supports timedelta data, <code class="docutils literal notranslate"><span class="pre">fastparquet&gt;=0.1.4</span></code> supports timezone aware datetimes.
These libraries differ by having different underlying dependencies (<code class="docutils literal notranslate"><span class="pre">fastparquet</span></code> by using <code class="docutils literal notranslate"><span class="pre">numba</span></code>, while <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> uses a c-library).</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [596]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;u1&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;g&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;US/Eastern&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [597]: </span><span class="n">df</span>
<span class="gh">Out[597]: </span><span class="go"></span>
<span class="go">   a  b  c    d      e          f                         g  h  i</span>
<span class="go">0  a  1  3  4.0   True 2013-01-01 2013-01-01 00:00:00-05:00  a  a</span>
<span class="go">1  b  2  4  5.0  False 2013-01-02 2013-01-02 00:00:00-05:00  b  b</span>
<span class="go">2  c  3  5  6.0   True 2013-01-03 2013-01-03 00:00:00-05:00  c  c</span>

<span class="gp">In [598]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[598]: </span><span class="go"></span>
<span class="go">a                        object</span>
<span class="go">b                         int64</span>
<span class="go">c                         uint8</span>
<span class="go">d                       float64</span>
<span class="go">e                          bool</span>
<span class="go">f                datetime64[ns]</span>
<span class="go">g    datetime64[ns, US/Eastern]</span>
<span class="go">h                      category</span>
<span class="go">i                      category</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Write to a parquet file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [599]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;example_pa.parquet&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">)</span>

<span class="gp">In [600]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;example_fp.parquet&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;fastparquet&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read from a parquet file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [601]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;example_fp.parquet&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;fastparquet&quot;</span><span class="p">)</span>

<span class="gp">In [602]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;example_pa.parquet&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">)</span>

<span class="gp">In [603]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[603]: </span><span class="go"></span>
<span class="go">a                        object</span>
<span class="go">b                         int64</span>
<span class="go">c                         uint8</span>
<span class="go">d                       float64</span>
<span class="go">e                          bool</span>
<span class="go">f                datetime64[ns]</span>
<span class="go">g    datetime64[ns, US/Eastern]</span>
<span class="go">h                      category</span>
<span class="go">i                      category</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Read only certain columns of a parquet file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [604]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;example_fp.parquet&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;fastparquet&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [605]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;example_pa.parquet&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [606]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[606]: </span><span class="go"></span>
<span class="go">a    object</span>
<span class="go">b     int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<section id="handling-indexes">
<h3>Handling indexes<a class="headerlink" href="#handling-indexes" title="Permalink to this headline">#</a></h3>
<p>Serializing a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to parquet may include the implicit index as one or
more columns in the output file. Thus, this code:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [607]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [608]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;test.parquet&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>creates a parquet file with <em>three</em> columns if you use <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> for serialization:
<code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">__index_level_0__</span></code>. If youâ€™re using <code class="docutils literal notranslate"><span class="pre">fastparquet</span></code>, the
index <a class="reference external" href="javascript:if(confirm('https://fastparquet.readthedocs.io/en/latest/api.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://fastparquet.readthedocs.io/en/latest/api.html#fastparquet.write'" tppabs="https://fastparquet.readthedocs.io/en/latest/api.html#fastparquet.write">may or may not</a>
be written to the file.</p>
<p>This unexpected extra column causes some databases like Amazon Redshift to reject
the file, because that column doesnâ€™t exist in the target table.</p>
<p>If you want to omit a dataframeâ€™s indexes when writing, pass <code class="docutils literal notranslate"><span class="pre">index=False</span></code> to
<a class="reference internal" href="pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_parquet()</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [609]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;test.parquet&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>This creates a parquet file with just the two expected columns, <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>.
If your <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> has a custom index, you wonâ€™t get it back when you load
this file into a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<p>Passing <code class="docutils literal notranslate"><span class="pre">index=True</span></code> will <em>always</em> write the index, even if thatâ€™s not the
underlying engineâ€™s default behavior.</p>
</section>
<section id="partitioning-parquet-files">
<h3>Partitioning Parquet files<a class="headerlink" href="#partitioning-parquet-files" title="Permalink to this headline">#</a></h3>
<p>Parquet supports partitioning of data based on the values of one or more columns.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [610]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>

<span class="gp">In [611]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">,</span> <span class="n">partition_cols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="n">compression</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the parent directory to which data will be saved.
The <code class="docutils literal notranslate"><span class="pre">partition_cols</span></code> are the column names by which the dataset will be partitioned.
Columns are partitioned in the order they are given. The partition splits are
determined by the unique values in the partition columns.
The above example creates a partitioned dataset that may look like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>test
â”œâ”€â”€ a=0
â”‚   â”œâ”€â”€ 0bac803e32dc42ae83fddfd029cbdebc.parquet
â”‚   â””â”€â”€  ...
â””â”€â”€ a=1
    â”œâ”€â”€ e6ab24a4f45147b49b54a662f0c412a3.parquet
    â””â”€â”€ ...
</pre></div>
</div>
</section>
</section>
<section id="orc">
<span id="io-orc"></span><h2>ORC<a class="headerlink" href="#orc" title="Permalink to this headline">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0.</span></p>
</div>
<p>Similar to the <a class="reference internal" href="#io-parquet"><span class="std std-ref">parquet</span></a> format, the <a class="reference external" href="javascript:if(confirm('https://orc.apache.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://orc.apache.org/'" tppabs="https://orc.apache.org/">ORC Format</a> is a binary columnar serialization
for data frames. It is designed to make reading data frames efficient. pandas provides both the reader and the writer for the
ORC format, <a class="reference internal" href="pandas.read_orc.html#pandas.read_orc" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_orc.html#pandas.read_orc" title="pandas.read_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_orc()</span></code></a> and <a class="reference internal" href="pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_orc()</span></code></a>. This requires the <a class="reference external" href="javascript:if(confirm('https://arrow.apache.org/docs/python/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://arrow.apache.org/docs/python/'" tppabs="https://arrow.apache.org/docs/python/">pyarrow</a> library.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>It is <em>highly recommended</em> to install pyarrow using conda due to some issues occurred by pyarrow.</p></li>
<li><p><a class="reference internal" href="pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_orc()</span></code></a> requires pyarrow&gt;=7.0.0.</p></li>
<li><p><a class="reference internal" href="pandas.read_orc.html#pandas.read_orc" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_orc.html#pandas.read_orc" title="pandas.read_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_orc()</span></code></a> and <a class="reference internal" href="pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_orc()</span></code></a> are not supported on Windows yet, you can find valid environments on <a class="reference internal" href="install.html#install-warn-orc" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html#install-warn-orc"><span class="std std-ref">install optional dependencies</span></a>.</p></li>
<li><p>For supported dtypes please refer to <a class="reference external" href="javascript:if(confirm('https://arrow.apache.org/docs/cpp/orc.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://arrow.apache.org/docs/cpp/orc.html#data-types'" tppabs="https://arrow.apache.org/docs/cpp/orc.html#data-types">supported ORC features in Arrow</a>.</p></li>
<li><p>Currently timezones in datetime columns are not preserved when a dataframe is converted into ORC files.</p></li>
</ul>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [612]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">   .....: </span>        <span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;20130101&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [613]: </span><span class="n">df</span>
<span class="gh">Out[613]: </span><span class="go"></span>
<span class="go">   a  b    c      d          e</span>
<span class="go">0  a  1  4.0   True 2013-01-01</span>
<span class="go">1  b  2  5.0  False 2013-01-02</span>
<span class="go">2  c  3  6.0   True 2013-01-03</span>

<span class="gp">In [614]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[614]: </span><span class="go"></span>
<span class="go">a            object</span>
<span class="go">b             int64</span>
<span class="go">c           float64</span>
<span class="go">d              bool</span>
<span class="go">e    datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Write to an orc file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [615]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_orc</span><span class="p">(</span><span class="s2">&quot;example_pa.orc&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;pyarrow&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read from an orc file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [616]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_orc</span><span class="p">(</span><span class="s2">&quot;example_pa.orc&quot;</span><span class="p">)</span>

<span class="gp">In [617]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[617]: </span><span class="go"></span>
<span class="go">a            object</span>
<span class="go">b             int64</span>
<span class="go">c           float64</span>
<span class="go">d              bool</span>
<span class="go">e    datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Read only certain columns of an orc file.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [618]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_orc</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;example_pa.orc&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [619]: </span><span class="n">result</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[619]: </span><span class="go"></span>
<span class="go">a    object</span>
<span class="go">b     int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="sql-queries">
<span id="io-sql"></span><h2>SQL queries<a class="headerlink" href="#sql-queries" title="Permalink to this headline">#</a></h2>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">pandas.io.sql</span></code> module provides a collection of query wrappers to both
facilitate data retrieval and to reduce dependency on DB-specific API. Database abstraction
is provided by SQLAlchemy if installed. In addition you will need a driver library for
your database. Examples of such drivers are <a class="reference external" href="javascript:if(confirm('https://www.psycopg.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.psycopg.org/'" tppabs="https://www.psycopg.org/">psycopg2</a>
for PostgreSQL or <a class="reference external" href="javascript:if(confirm('https://github.com/PyMySQL/PyMySQL  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/PyMySQL/PyMySQL'" tppabs="https://github.com/PyMySQL/PyMySQL">pymysql</a> for MySQL.
For <a class="reference external" href="javascript:if(confirm('https://docs.python.org/3/library/sqlite3.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/library/sqlite3.html'" tppabs="https://docs.python.org/3/library/sqlite3.html">SQLite</a> this is
included in Pythonâ€™s standard library by default.
You can find an overview of supported drivers for each SQL dialect in the
<a class="reference external" href="javascript:if(confirm('https://docs.sqlalchemy.org/en/latest/dialects/index.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.sqlalchemy.org/en/latest/dialects/index.html'" tppabs="https://docs.sqlalchemy.org/en/latest/dialects/index.html">SQLAlchemy docs</a>.</p>
<p>If SQLAlchemy is not installed, a fallback is only provided for sqlite (and
for mysql for backwards compatibility, but this is deprecated and will be
removed in a future version).
This mode requires a Python database adapter which respect the <a class="reference external" href="javascript:if(confirm('https://www.python.org/dev/peps/pep-0249/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/dev/peps/pep-0249/'" tppabs="https://www.python.org/dev/peps/pep-0249/">Python
DB-API</a>.</p>
<p>See also some <a class="reference internal" href="cookbook.html#cookbook-sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html#cookbook-sql"><span class="std std-ref">cookbook examples</span></a> for some advanced strategies.</p>
<p>The key functions are:</p>
<table class="autosummary longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="pandas.read_sql_table.html#pandas.read_sql_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_sql_table</span></code></a>(table_name,Â con[,Â schema,Â ...])</p></td>
<td><p>Read SQL database table into a DataFrame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="pandas.read_sql_query.html#pandas.read_sql_query" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_sql_query</span></code></a>(sql,Â con[,Â index_col,Â ...])</p></td>
<td><p>Read SQL query into a DataFrame.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="pandas.read_sql.html#pandas.read_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_sql</span></code></a>(sql,Â con[,Â index_col,Â ...])</p></td>
<td><p>Read SQL query or database table into a DataFrame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame.to_sql</span></code></a>(name,Â con[,Â schema,Â ...])</p></td>
<td><p>Write records stored in a DataFrame to a SQL database.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The function <a class="reference internal" href="pandas.read_sql.html#pandas.read_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql()</span></code></a> is a convenience wrapper around
<a class="reference internal" href="pandas.read_sql_table.html#pandas.read_sql_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> and <a class="reference internal" href="pandas.read_sql_query.html#pandas.read_sql_query" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_query()</span></code></a> (and for
backward compatibility) and will delegate to specific function depending on
the provided input (database table name or sql query).
Table names do not need to be quoted if they have special characters.</p>
</div>
<p>In the following example, we use the <a class="reference external" href="javascript:if(confirm('https://www.sqlite.org/index.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.sqlite.org/index.html'" tppabs="https://www.sqlite.org/index.html">SQlite</a> SQL database
engine. You can use a temporary SQLite database where data are stored in
â€œmemoryâ€.</p>
<p>To connect with SQLAlchemy you use the <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> function to create an engine
object from database URI. You only need to create the engine once per database you are
connecting to.
For more information on <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> and the URI formatting, see the examples
below and the SQLAlchemy <a class="reference external" href="javascript:if(confirm('https://docs.sqlalchemy.org/en/latest/core/engines.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.sqlalchemy.org/en/latest/core/engines.html'" tppabs="https://docs.sqlalchemy.org/en/latest/core/engines.html">documentation</a></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [620]: </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="go"># Create your engine.</span>
<span class="gp">In [621]: </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///:memory:&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to manage your own connections you can pass one of those instead. The example below opens a
connection to the database using a Python context manager that automatically closes the connection after
the block has completed.
See the <a class="reference external" href="javascript:if(confirm('https://docs.sqlalchemy.org/en/latest/core/connections.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.sqlalchemy.org/en/latest/core/connections.html#basic-usage'" tppabs="https://docs.sqlalchemy.org/en/latest/core/connections.html#basic-usage">SQLAlchemy docs</a>
for an explanation of how the database connection is handled.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">,</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When you open a connection to a database you are also responsible for closing it.
Side effects of leaving a connection open may include locking the database or
other breaking behaviour.</p>
</div>
<section id="writing-dataframes">
<h3>Writing DataFrames<a class="headerlink" href="#writing-dataframes" title="Permalink to this headline">#</a></h3>
<p>Assuming the following data is in a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> <code class="docutils literal notranslate"><span class="pre">data</span></code>, we can insert it into
the database using <a class="reference internal" href="pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_sql()</span></code></a>.</p>
<table class="table">
<colgroup>
<col style="width: 13%" />
<col style="width: 32%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>Date</p></th>
<th class="head"><p>Col_1</p></th>
<th class="head"><p>Col_2</p></th>
<th class="head"><p>Col_3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>26</p></td>
<td><p>2012-10-18</p></td>
<td><p>X</p></td>
<td><p>25.7</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p>42</p></td>
<td><p>2012-10-19</p></td>
<td><p>Y</p></td>
<td><p>-12.4</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p>63</p></td>
<td><p>2012-10-20</p></td>
<td><p>Z</p></td>
<td><p>5.73</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [622]: </span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="gp">In [623]: </span><span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="s2">&quot;Col_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Col_2&quot;</span><span class="p">,</span> <span class="s2">&quot;Col_3&quot;</span><span class="p">]</span>

<span class="gp">In [624]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   .....: </span>    <span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="mf">27.5</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">),</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">12.5</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">(</span><span class="mi">63</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mf">5.73</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [625]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>

<span class="gp">In [626]: </span><span class="n">data</span>
<span class="gh">Out[626]: </span><span class="go"></span>
<span class="go">   id       Date Col_1  Col_2  Col_3</span>
<span class="go">0  26 2010-10-18     X  27.50   True</span>
<span class="go">1  42 2010-10-19     Y -12.50  False</span>
<span class="go">2  63 2010-10-20     Z   5.73   True</span>

<span class="gp">In [627]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gh">Out[627]: </span><span class="go">3</span>
</pre></div>
</div>
<p>With some databases, writing large DataFrames can result in errors due to
packet size limitations being exceeded. This can be avoided by setting the
<code class="docutils literal notranslate"><span class="pre">chunksize</span></code> parameter when calling <code class="docutils literal notranslate"><span class="pre">to_sql</span></code>. For example, the following
writes <code class="docutils literal notranslate"><span class="pre">data</span></code> to the database in batches of 1000 rows at a time:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [628]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;data_chunked&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="gh">Out[628]: </span><span class="go">3</span>
</pre></div>
</div>
<section id="sql-data-types">
<h4>SQL data types<a class="headerlink" href="#sql-data-types" title="Permalink to this headline">#</a></h4>
<p><a class="reference internal" href="pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_sql()</span></code></a> will try to map your data to an appropriate
SQL data type based on the dtype of the data. When you have columns of dtype
<code class="docutils literal notranslate"><span class="pre">object</span></code>, pandas will try to infer the data type.</p>
<p>You can always override the default type by specifying the desired SQL type of
any of the columns by using the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> argument. This argument needs a
dictionary mapping column names to SQLAlchemy types (or strings for the sqlite3
fallback mode).
For example, specifying to use the sqlalchemy <code class="docutils literal notranslate"><span class="pre">String</span></code> type instead of the
default <code class="docutils literal notranslate"><span class="pre">Text</span></code> type for string columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [629]: </span><span class="kn">from</span> <span class="nn">sqlalchemy.types</span> <span class="kn">import</span> <span class="n">String</span>

<span class="gp">In [630]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;data_dtype&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Col_1&quot;</span><span class="p">:</span> <span class="n">String</span><span class="p">})</span>
<span class="gh">Out[630]: </span><span class="go">3</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to the limited support for timedeltaâ€™s in the different database
flavors, columns with type <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> will be written as integer
values as nanoseconds to the database and a warning will be raised.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Columns of <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype will be converted to the dense representation
as you would get with <code class="docutils literal notranslate"><span class="pre">np.asarray(categorical)</span></code> (e.g. for string categories
this gives an array of strings).
Because of this, reading the database table back in does <strong>not</strong> generate
a categorical.</p>
</div>
</section>
</section>
<section id="datetime-data-types">
<span id="io-sql-datetime-data"></span><h3>Datetime data types<a class="headerlink" href="#datetime-data-types" title="Permalink to this headline">#</a></h3>
<p>Using SQLAlchemy, <a class="reference internal" href="pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_sql()</span></code></a> is capable of writing
datetime data that is timezone naive or timezone aware. However, the resulting
data stored in the database ultimately depends on the supported data type
for datetime data of the database system being used.</p>
<p>The following table lists supported data types for datetime data for some
common databases. Other database dialects may have different data types for
datetime data.</p>
<table class="table">
<colgroup>
<col style="width: 15%" />
<col style="width: 60%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Database</p></th>
<th class="head"><p>SQL Datetime Types</p></th>
<th class="head"><p>Timezone Support</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SQLite</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> or <code class="docutils literal notranslate"><span class="pre">DATETIME</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>PostgreSQL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> or <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
<p>When writing timezone aware data to databases that do not support timezones,
the data will be written as timezone naive timestamps that are in local time
with respect to the timezone.</p>
<p><a class="reference internal" href="pandas.read_sql_table.html#pandas.read_sql_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> is also capable of reading datetime data that is
timezone aware or naive. When reading <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> types, pandas
will convert the data to UTC.</p>
<section id="insertion-method">
<span id="io-sql-method"></span><h4>Insertion method<a class="headerlink" href="#insertion-method" title="Permalink to this headline">#</a></h4>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">method</span></code> controls the SQL insertion clause used.
Possible values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code>: Uses standard SQL <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> clause (one per row).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'multi'</span></code>: Pass multiple values in a single <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> clause.
It uses a <em>special</em> SQL syntax not supported by all backends.
This usually provides better performance for analytic databases
like <em>Presto</em> and <em>Redshift</em>, but has worse performance for
traditional SQL backend if the table contains many columns.
For more information check the SQLAlchemy <a class="reference external" href="javascript:if(confirm('https://docs.sqlalchemy.org/en/latest/core/dml.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.sqlalchemy.org/en/latest/core/dml.html#sqlalchemy.sql.expression.Insert.values.params.*args'" tppabs="https://docs.sqlalchemy.org/en/latest/core/dml.html#sqlalchemy.sql.expression.Insert.values.params.*args">documentation</a>.</p></li>
<li><p>callable with signature <code class="docutils literal notranslate"><span class="pre">(pd_table,</span> <span class="pre">conn,</span> <span class="pre">keys,</span> <span class="pre">data_iter)</span></code>:
This can be used to implement a more performant insertion method based on
specific backend dialect features.</p></li>
</ul>
<p>Example of a callable using PostgreSQL <a class="reference external" href="javascript:if(confirm('https://www.postgresql.org/docs/current/sql-copy.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.postgresql.org/docs/current/sql-copy.html'" tppabs="https://www.postgresql.org/docs/current/sql-copy.html">COPY clause</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Alternative to_sql() *method* for DBs that support COPY FROM</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="k">def</span> <span class="nf">psql_insert_copy</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">data_iter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute SQL statement inserting data</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    table : pandas.io.sql.SQLTable</span>
<span class="sd">    conn : sqlalchemy.engine.Engine or sqlalchemy.engine.Connection</span>
<span class="sd">    keys : list of str</span>
<span class="sd">        Column names</span>
<span class="sd">    data_iter : Iterable that iterates the values to be inserted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># gets a DBAPI connection that can provide a cursor</span>
    <span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">connection</span>
    <span class="k">with</span> <span class="n">dbapi_conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">s_buf</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">s_buf</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">data_iter</span><span class="p">)</span>
        <span class="n">s_buf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">columns</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="p">:</span>
            <span class="n">table_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">table_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span>

        <span class="n">sql</span> <span class="o">=</span> <span class="s1">&#39;COPY </span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">) FROM STDIN WITH CSV&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">table_name</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">copy_expert</span><span class="p">(</span><span class="n">sql</span><span class="o">=</span><span class="n">sql</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">s_buf</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="reading-tables">
<h3>Reading tables<a class="headerlink" href="#reading-tables" title="Permalink to this headline">#</a></h3>
<p><a class="reference internal" href="pandas.read_sql_table.html#pandas.read_sql_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> will read a database table given the
table name and optionally a subset of columns to read.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to use <a class="reference internal" href="pandas.read_sql_table.html#pandas.read_sql_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a>, you <strong>must</strong> have the
SQLAlchemy optional dependency installed.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [631]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gh">Out[631]: </span><span class="go"></span>
<span class="go">   index  id       Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26 2010-10-18     X  27.50   True</span>
<span class="go">1      1  42 2010-10-19     Y -12.50  False</span>
<span class="go">2      2  63 2010-10-20     Z   5.73   True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that pandas infers column dtypes from query outputs, and not by looking
up data types in the physical database schema. For example, assume <code class="docutils literal notranslate"><span class="pre">userid</span></code>
is an integer column in a table. Then, intuitively, <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">userid</span> <span class="pre">...</span></code> will
return integer-valued series, while <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">cast(userid</span> <span class="pre">as</span> <span class="pre">text)</span> <span class="pre">...</span></code> will
return object-valued (str) series. Accordingly, if the query output is empty,
then all resulting columns will be returned as object-valued (since they are
most general). If you foresee that your query will sometimes generate an empty
result, you may want to explicitly typecast afterwards to ensure dtype
integrity.</p>
</div>
<p>You can also specify the name of the column as the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> index,
and specify a subset of columns to be read.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [632]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
<span class="gh">Out[632]: </span><span class="go"></span>
<span class="go">    index       Date Col_1  Col_2  Col_3</span>
<span class="go">id                                      </span>
<span class="go">26      0 2010-10-18     X  27.50   True</span>
<span class="go">42      1 2010-10-19     Y -12.50  False</span>
<span class="go">63      2 2010-10-20     Z   5.73   True</span>

<span class="gp">In [633]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Col_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Col_2&quot;</span><span class="p">])</span>
<span class="gh">Out[633]: </span><span class="go"></span>
<span class="go">  Col_1  Col_2</span>
<span class="go">0     X  27.50</span>
<span class="go">1     Y -12.50</span>
<span class="go">2     Z   5.73</span>
</pre></div>
</div>
<p>And you can explicitly force columns to be parsed as dates:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [634]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">])</span>
<span class="gh">Out[634]: </span><span class="go"></span>
<span class="go">   index  id       Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26 2010-10-18     X  27.50   True</span>
<span class="go">1      1  42 2010-10-19     Y -12.50  False</span>
<span class="go">2      2  63 2010-10-20     Z   5.73   True</span>
</pre></div>
</div>
<p>If needed you can explicitly specify a format string, or a dict of arguments
to pass to <a class="reference internal" href="pandas.to_datetime.html#pandas.to_datetime" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.to_datetime()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Date&quot;</span><span class="p">:</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">})</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span>
    <span class="s2">&quot;data&quot;</span><span class="p">,</span>
    <span class="n">engine</span><span class="p">,</span>
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Date&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">}},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can check if a table exists using <code class="xref py py-func docutils literal notranslate"><span class="pre">has_table()</span></code></p>
</section>
<section id="schema-support">
<h3>Schema support<a class="headerlink" href="#schema-support" title="Permalink to this headline">#</a></h3>
<p>Reading from and writing to different schemaâ€™s is supported through the <code class="docutils literal notranslate"><span class="pre">schema</span></code>
keyword in the <a class="reference internal" href="pandas.read_sql_table.html#pandas.read_sql_table" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> and <a class="reference internal" href="pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_sql()</span></code></a>
functions. Note however that this depends on the database flavor (sqlite does not
have schemaâ€™s). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;other_schema&quot;</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;other_schema&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id5">
<h3>Querying<a class="headerlink" href="#id5" title="Permalink to this headline">#</a></h3>
<p>You can query using raw SQL in the <a class="reference internal" href="pandas.read_sql_query.html#pandas.read_sql_query" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_query()</span></code></a> function.
In this case you must use the SQL variant appropriate for your database.
When using SQLAlchemy, you can also pass SQLAlchemy Expression language constructs,
which are database-agnostic.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [635]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM data&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gh">Out[635]: </span><span class="go"></span>
<span class="go">   index  id                        Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26  2010-10-18 00:00:00.000000     X  27.50      1</span>
<span class="go">1      1  42  2010-10-19 00:00:00.000000     Y -12.50      0</span>
<span class="go">2      2  63  2010-10-20 00:00:00.000000     Z   5.73      1</span>
</pre></div>
</div>
<p>Of course, you can specify a more â€œcomplexâ€ query.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [636]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT id, Col_1, Col_2 FROM data WHERE id = 42;&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="gh">Out[636]: </span><span class="go"></span>
<span class="go">   id Col_1  Col_2</span>
<span class="go">0  42     Y  -12.5</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="pandas.read_sql_query.html#pandas.read_sql_query" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_query()</span></code></a> function supports a <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> argument.
Specifying this will return an iterator through chunks of the query result:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [637]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">))</span>

<span class="gp">In [638]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;data_chunks&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[638]: </span><span class="go">20</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [639]: </span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM data_chunks&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">          a         b         c</span>
<span class="go">0  0.070470  0.901320  0.937577</span>
<span class="go">1  0.295770  1.420548 -0.005283</span>
<span class="go">2 -1.518598 -0.730065  0.226497</span>
<span class="go">3 -2.061465  0.632115  0.853619</span>
<span class="go">4  2.719155  0.139018  0.214557</span>
<span class="go">          a         b         c</span>
<span class="go">0 -1.538924 -0.366973 -0.748801</span>
<span class="go">1 -0.478137 -1.559153 -3.097759</span>
<span class="go">2 -2.320335 -0.221090  0.119763</span>
<span class="go">3  0.608228  1.064810 -0.780506</span>
<span class="go">4 -2.736887  0.143539  1.170191</span>
<span class="go">          a         b         c</span>
<span class="go">0 -1.573076  0.075792 -1.722223</span>
<span class="go">1 -0.774650  0.803627  0.221665</span>
<span class="go">2  0.584637  0.147264  1.057825</span>
<span class="go">3 -0.284136  0.912395  1.552808</span>
<span class="go">4  0.189376 -0.109830  0.539341</span>
<span class="go">          a         b         c</span>
<span class="go">0  0.592591 -0.155407 -1.356475</span>
<span class="go">1  0.833837  1.524249  1.606722</span>
<span class="go">2 -0.029487 -0.051359  1.700152</span>
<span class="go">3  0.921484 -0.926347  0.979818</span>
<span class="go">4  0.182380 -0.186376  0.049820</span>
</pre></div>
</div>
<p>You can also run a plain query without creating a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with
<code class="xref py py-func docutils literal notranslate"><span class="pre">execute()</span></code>. This is useful for queries that donâ€™t return values,
such as INSERT. This is functionally equivalent to calling <code class="docutils literal notranslate"><span class="pre">execute</span></code> on the
SQLAlchemy engine or db connection object. Again, you must use the SQL syntax
variant appropriate for your database.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pandas.io</span> <span class="kn">import</span> <span class="n">sql</span>

<span class="n">sql</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM table_name&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
<span class="n">sql</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table_name VALUES(?, ?, ?)&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">12.2</span><span class="p">,</span> <span class="kc">True</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="engine-connection-examples">
<h3>Engine connection examples<a class="headerlink" href="#engine-connection-examples" title="Permalink to this headline">#</a></h3>
<p>To connect with SQLAlchemy you use the <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code> function to create an engine
object from database URI. You only need to create the engine once per database you are
connecting to.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:<a href="javascript:if(confirm('https://pandas.pydata.org/cdn-cgi/l/email-protection  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pandas.pydata.org/cdn-cgi/l/email-protection'" tppabs="https://pandas.pydata.org/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="98ecf1fffdead8f4f7fbf9f4f0f7ebec">[email&#160;protected]</a>:5432/mydatabase&quot;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql+mysqldb://scott:<a href="javascript:if(confirm('https://pandas.pydata.org/cdn-cgi/l/email-protection  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pandas.pydata.org/cdn-cgi/l/email-protection'" tppabs="https://pandas.pydata.org/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="74001d13110634181b1715181c1b0700">[email&#160;protected]</a>/foo&quot;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle://scott:<a href="javascript:if(confirm('https://pandas.pydata.org/cdn-cgi/l/email-protection  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pandas.pydata.org/cdn-cgi/l/email-protection'" tppabs="https://pandas.pydata.org/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2f5b46484a5d6f1e1d18011f011f011e">[email&#160;protected]</a>:1521/sidname&quot;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mssql+pyodbc://mydsn&quot;</span><span class="p">)</span>

<span class="c1"># sqlite://&lt;nohostname&gt;/&lt;path&gt;</span>
<span class="c1"># where &lt;path&gt; is relative:</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///foo.db&quot;</span><span class="p">)</span>

<span class="c1"># or absolute, starting with a slash:</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:////absolute/path/to/foo.db&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information see the examples the SQLAlchemy <a class="reference external" href="javascript:if(confirm('https://docs.sqlalchemy.org/en/latest/core/engines.html  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.sqlalchemy.org/en/latest/core/engines.html'" tppabs="https://docs.sqlalchemy.org/en/latest/core/engines.html">documentation</a></p>
</section>
<section id="advanced-sqlalchemy-queries">
<h3>Advanced SQLAlchemy queries<a class="headerlink" href="#advanced-sqlalchemy-queries" title="Permalink to this headline">#</a></h3>
<p>You can use SQLAlchemy constructs to describe your query.</p>
<p>Use <code class="xref py py-func docutils literal notranslate"><span class="pre">sqlalchemy.text()</span></code> to specify query parameters in a backend-neutral way</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [640]: </span><span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">sa</span>

<span class="gp">In [641]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">sa</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM data where Col_1=:col1&quot;</span><span class="p">),</span> <span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[641]: </span><span class="go"></span>
<span class="go">   index  id                        Date Col_1  Col_2  Col_3</span>
<span class="go">0      0  26  2010-10-18 00:00:00.000000     X   27.5      1</span>
</pre></div>
</div>
<p>If you have an SQLAlchemy description of your database you can express where conditions using SQLAlchemy expressions</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [642]: </span><span class="n">metadata</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">MetaData</span><span class="p">()</span>

<span class="gp">In [643]: </span><span class="n">data_table</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="s2">&quot;data&quot;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">metadata</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">DateTime</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;Col_1&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;Col_2&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Float</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;Col_3&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Boolean</span><span class="p">),</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [644]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">data_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">Col_3</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">),</span> <span class="n">engine</span><span class="p">)</span>
<span class="gh">Out[644]: </span><span class="go"></span>
<span class="go">Empty DataFrame</span>
<span class="go">Columns: [index, Date, Col_1, Col_2, Col_3]</span>
<span class="go">Index: []</span>
</pre></div>
</div>
<p>You can combine SQLAlchemy expressions with parameters passed to <a class="reference internal" href="pandas.read_sql.html#pandas.read_sql" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql()</span></code></a> using <code class="xref py py-func docutils literal notranslate"><span class="pre">sqlalchemy.bindparam()</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [645]: </span><span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>

<span class="gp">In [646]: </span><span class="n">expr</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">data_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">Date</span> <span class="o">&gt;</span> <span class="n">sa</span><span class="o">.</span><span class="n">bindparam</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">))</span>

<span class="gp">In [647]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">18</span><span class="p">)})</span>
<span class="gh">Out[647]: </span><span class="go"></span>
<span class="go">   index       Date Col_1  Col_2  Col_3</span>
<span class="go">0      1 2010-10-19     Y -12.50  False</span>
<span class="go">1      2 2010-10-20     Z   5.73   True</span>
</pre></div>
</div>
</section>
<section id="sqlite-fallback">
<h3>Sqlite fallback<a class="headerlink" href="#sqlite-fallback" title="Permalink to this headline">#</a></h3>
<p>The use of sqlite is supported without using SQLAlchemy.
This mode requires a Python database adapter which respect the <a class="reference external" href="javascript:if(confirm('https://www.python.org/dev/peps/pep-0249/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/dev/peps/pep-0249/'" tppabs="https://www.python.org/dev/peps/pep-0249/">Python
DB-API</a>.</p>
<p>You can create connections like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And then issue the following queries:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">con</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM data&quot;</span><span class="p">,</span> <span class="n">con</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="google-bigquery">
<span id="io-bigquery"></span><h2>Google BigQuery<a class="headerlink" href="#google-bigquery" title="Permalink to this headline">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Starting in 0.20.0, pandas has split off Google BigQuery support into the
separate package <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code>. You can <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pandas-gbq</span></code> to get it.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code> package provides functionality to read/write from Google BigQuery.</p>
<p>pandas integrates with this external package. if <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code> is installed, you can
use the pandas methods <code class="docutils literal notranslate"><span class="pre">pd.read_gbq</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_gbq</span></code>, which will call the
respective functions from <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code>.</p>
<p>Full documentation can be found <a class="reference external" href="javascript:if(confirm('https://pandas-gbq.readthedocs.io/en/latest/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pandas-gbq.readthedocs.io/en/latest/'" tppabs="https://pandas-gbq.readthedocs.io/en/latest/">here</a>.</p>
</section>
<section id="stata-format">
<span id="io-stata"></span><h2>Stata format<a class="headerlink" href="#stata-format" title="Permalink to this headline">#</a></h2>
<section id="writing-to-stata-format">
<span id="io-stata-writer"></span><h3>Writing to stata format<a class="headerlink" href="#writing-to-stata-format" title="Permalink to this headline">#</a></h3>
<p>The method <code class="xref py py-func docutils literal notranslate"><span class="pre">to_stata()</span></code> will write a DataFrame
into a .dta file. The format version of this file is always 115 (Stata 12).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [648]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">))</span>

<span class="gp">In [649]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_stata</span><span class="p">(</span><span class="s2">&quot;stata.dta&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Stata</em> data files have limited data type support; only strings with
244 or fewer characters, <code class="docutils literal notranslate"><span class="pre">int8</span></code>, <code class="docutils literal notranslate"><span class="pre">int16</span></code>, <code class="docutils literal notranslate"><span class="pre">int32</span></code>, <code class="docutils literal notranslate"><span class="pre">float32</span></code>
and <code class="docutils literal notranslate"><span class="pre">float64</span></code> can be stored in <code class="docutils literal notranslate"><span class="pre">.dta</span></code> files. Additionally,
<em>Stata</em> reserves certain values to represent missing data. Exporting a
non-missing value that is outside of the permitted range in Stata for
a particular data type will retype the variable to the next larger
size. For example, <code class="docutils literal notranslate"><span class="pre">int8</span></code> values are restricted to lie between -127
and 100 in Stata, and so variables with values above 100 will trigger
a conversion to <code class="docutils literal notranslate"><span class="pre">int16</span></code>. <code class="docutils literal notranslate"><span class="pre">nan</span></code> values in floating points data
types are stored as the basic missing data type (<code class="docutils literal notranslate"><span class="pre">.</span></code> in <em>Stata</em>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is not possible to export missing data values for integer data types.</p>
</div>
<p>The <em>Stata</em> writer gracefully handles other data types including <code class="docutils literal notranslate"><span class="pre">int64</span></code>,
<code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">uint8</span></code>, <code class="docutils literal notranslate"><span class="pre">uint16</span></code>, <code class="docutils literal notranslate"><span class="pre">uint32</span></code> by casting to
the smallest supported type that can represent the data. For example, data
with a type of <code class="docutils literal notranslate"><span class="pre">uint8</span></code> will be cast to <code class="docutils literal notranslate"><span class="pre">int8</span></code> if all values are less than
100 (the upper bound for non-missing <code class="docutils literal notranslate"><span class="pre">int8</span></code> data in <em>Stata</em>), or, if values are
outside of this range, the variable is cast to <code class="docutils literal notranslate"><span class="pre">int16</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Conversion from <code class="docutils literal notranslate"><span class="pre">int64</span></code> to <code class="docutils literal notranslate"><span class="pre">float64</span></code> may result in a loss of precision
if <code class="docutils literal notranslate"><span class="pre">int64</span></code> values are larger than 2**53.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">StataWriter</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">to_stata()</span></code> only support fixed width
strings containing up to 244 characters, a limitation imposed by the version
115 dta file format. Attempting to write <em>Stata</em> dta files with strings
longer than 244 characters raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</div>
</section>
<section id="reading-from-stata-format">
<span id="io-stata-reader"></span><h3>Reading from Stata format<a class="headerlink" href="#reading-from-stata-format" title="Permalink to this headline">#</a></h3>
<p>The top-level function <code class="docutils literal notranslate"><span class="pre">read_stata</span></code> will read a dta file and return
either a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> or a <code class="xref py py-class docutils literal notranslate"><span class="pre">StataReader</span></code> that can
be used to read the file incrementally.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [650]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;stata.dta&quot;</span><span class="p">)</span>
<span class="gh">Out[650]: </span><span class="go"></span>
<span class="go">   index         A         B</span>
<span class="go">0      0 -1.690072  0.405144</span>
<span class="go">1      1 -1.511309 -1.531396</span>
<span class="go">2      2  0.572698 -1.106845</span>
<span class="go">3      3 -1.185859  0.174564</span>
<span class="go">4      4  0.603797 -1.796129</span>
<span class="go">5      5 -0.791679  1.173795</span>
<span class="go">6      6 -0.277710  1.859988</span>
<span class="go">7      7 -0.258413  1.251808</span>
<span class="go">8      8  1.443262  0.441553</span>
<span class="go">9      9  1.168163 -2.054946</span>
</pre></div>
</div>
<p>Specifying a <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> yields a
<code class="xref py py-class docutils literal notranslate"><span class="pre">StataReader</span></code> instance that can be used to
read <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> lines from the file at a time. The <code class="docutils literal notranslate"><span class="pre">StataReader</span></code>
object can be used as an iterator.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [651]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;stata.dta&quot;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>        <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="go">(3, 3)</span>
<span class="go">(3, 3)</span>
<span class="go">(3, 3)</span>
<span class="go">(1, 3)</span>
</pre></div>
</div>
<p>For more fine-grained control, use <code class="docutils literal notranslate"><span class="pre">iterator=True</span></code> and specify
<code class="docutils literal notranslate"><span class="pre">chunksize</span></code> with each call to
<code class="xref py py-func docutils literal notranslate"><span class="pre">read()</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [652]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;stata.dta&quot;</span><span class="p">,</span> <span class="n">iterator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....: </span>    <span class="n">chunk1</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">   .....: </span>    <span class="n">chunk2</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<p>Currently the <code class="docutils literal notranslate"><span class="pre">index</span></code> is retrieved as a column.</p>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">convert_categoricals</span></code> indicates whether value labels should be
read and used to create a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> variable from them. Value labels can
also be retrieved by the function <code class="docutils literal notranslate"><span class="pre">value_labels</span></code>, which requires <code class="xref py py-func docutils literal notranslate"><span class="pre">read()</span></code>
to be called before use.</p>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">convert_missing</span></code> indicates whether missing value
representations in Stata should be preserved. If <code class="docutils literal notranslate"><span class="pre">False</span></code> (the default),
missing values are represented as <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, missing values are
represented using <code class="docutils literal notranslate"><span class="pre">StataMissingValue</span></code> objects, and columns containing missing
values will have <code class="docutils literal notranslate"><span class="pre">object</span></code> data type.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="pandas.read_stata.html#pandas.read_stata" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">StataReader</span></code> support .dta formats 113-115
(Stata 10-12), 117 (Stata 13), and 118 (Stata 14).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">preserve_dtypes=False</span></code> will upcast to the standard pandas data types:
<code class="docutils literal notranslate"><span class="pre">int64</span></code> for all integer types and <code class="docutils literal notranslate"><span class="pre">float64</span></code> for floating point data. By default,
the Stata data types are preserved when importing.</p>
</div>
<section id="io-stata-categorical">
<span id="id6"></span><h4>Categorical data<a class="headerlink" href="#io-stata-categorical" title="Permalink to this headline">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code> data can be exported to <em>Stata</em> data files as value labeled data.
The exported data consists of the underlying category codes as integer data values
and the categories as value labels. <em>Stata</em> does not have an explicit equivalent
to a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> and information about <em>whether</em> the variable is ordered
is lost when exporting.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><em>Stata</em> only supports string value labels, and so <code class="docutils literal notranslate"><span class="pre">str</span></code> is called on the
categories when exporting data. Exporting <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> variables with
non-string categories produces a warning, and can result a loss of
information if the <code class="docutils literal notranslate"><span class="pre">str</span></code> representations of the categories are not unique.</p>
</div>
<p>Labeled data can similarly be imported from <em>Stata</em> data files as <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>
variables using the keyword argument <code class="docutils literal notranslate"><span class="pre">convert_categoricals</span></code> (<code class="docutils literal notranslate"><span class="pre">True</span></code> by default).
The keyword argument <code class="docutils literal notranslate"><span class="pre">order_categoricals</span></code> (<code class="docutils literal notranslate"><span class="pre">True</span></code> by default) determines
whether imported <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> variables are ordered.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When importing categorical data, the values of the variables in the <em>Stata</em>
data file are not preserved since <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> variables always
use integer data types between <code class="docutils literal notranslate"><span class="pre">-1</span></code> and <code class="docutils literal notranslate"><span class="pre">n-1</span></code> where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number
of categories. If the original values in the <em>Stata</em> data file are required,
these can be imported by setting <code class="docutils literal notranslate"><span class="pre">convert_categoricals=False</span></code>, which will
import original data (but not the variable labels). The original values can
be matched to the imported categorical data since there is a simple mapping
between the original <em>Stata</em> data values and the category codes of imported
Categorical variables: missing values are assigned code <code class="docutils literal notranslate"><span class="pre">-1</span></code>, and the
smallest original value is assigned <code class="docutils literal notranslate"><span class="pre">0</span></code>, the second smallest is assigned
<code class="docutils literal notranslate"><span class="pre">1</span></code> and so on until the largest original value is assigned the code <code class="docutils literal notranslate"><span class="pre">n-1</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Stata</em> supports partially labeled series. These series have value labels for
some but not all data values. Importing a partially labeled series will produce
a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> with string categories for the values that are labeled and
numeric categories for values with no label.</p>
</div>
</section>
</section>
</section>
<section id="sas-formats">
<span id="io-sas-reader"></span><span id="io-sas"></span><h2>SAS formats<a class="headerlink" href="#sas-formats" title="Permalink to this headline">#</a></h2>
<p>The top-level function <a class="reference internal" href="pandas.read_sas.html#pandas.read_sas" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> can read (but not write) SAS
XPORT (.xpt) and (since <em>v0.18.0</em>) SAS7BDAT (.sas7bdat) format files.</p>
<p>SAS files only contain two value types: ASCII text and floating point
values (usually 8 bytes but sometimes truncated). For xport files,
there is no automatic type conversion to integers, dates, or
categoricals. For SAS7BDAT files, the format codes may allow date
variables to be automatically converted to dates. By default the
whole file is read and returned as a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<p>Specify a <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> or use <code class="docutils literal notranslate"><span class="pre">iterator=True</span></code> to obtain reader
objects (<code class="docutils literal notranslate"><span class="pre">XportReader</span></code> or <code class="docutils literal notranslate"><span class="pre">SAS7BDATReader</span></code>) for incrementally
reading the file. The reader objects also have attributes that
contain additional information about the file and its variables.</p>
<p>Read a SAS7BDAT file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sas</span><span class="p">(</span><span class="s2">&quot;sas_data.sas7bdat&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Obtain an iterator and read an XPORT file 100,000 lines at a time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">chunk</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sas</span><span class="p">(</span><span class="s2">&quot;sas_xport.xpt&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span> <span class="k">as</span> <span class="n">rdr</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">rdr</span><span class="p">:</span>
        <span class="n">do_something</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference external" href="javascript:if(confirm('https://support.sas.com/content/dam/SAS/support/en/technical-papers/record-layout-of-a-sas-version-5-or-6-data-set-in-sas-transport-xport-format.pdf  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://support.sas.com/content/dam/SAS/support/en/technical-papers/record-layout-of-a-sas-version-5-or-6-data-set-in-sas-transport-xport-format.pdf'" tppabs="https://support.sas.com/content/dam/SAS/support/en/technical-papers/record-layout-of-a-sas-version-5-or-6-data-set-in-sas-transport-xport-format.pdf">specification</a> for the xport file format is available from the SAS
web site.</p>
<p>No official documentation is available for the SAS7BDAT format.</p>
</section>
<section id="spss-formats">
<span id="io-spss-reader"></span><span id="io-spss"></span><h2>SPSS formats<a class="headerlink" href="#spss-formats" title="Permalink to this headline">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
<p>The top-level function <a class="reference internal" href="pandas.read_spss.html#pandas.read_spss" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_spss.html#pandas.read_spss" title="pandas.read_spss"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_spss()</span></code></a> can read (but not write) SPSS
SAV (.sav) and ZSAV (.zsav) format files.</p>
<p>SPSS files contain column names. By default the
whole file is read, categorical columns are converted into <code class="docutils literal notranslate"><span class="pre">pd.Categorical</span></code>,
and a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with all columns is returned.</p>
<p>Specify the <code class="docutils literal notranslate"><span class="pre">usecols</span></code> parameter to obtain a subset of columns. Specify <code class="docutils literal notranslate"><span class="pre">convert_categoricals=False</span></code>
to avoid converting categorical columns into <code class="docutils literal notranslate"><span class="pre">pd.Categorical</span></code>.</p>
<p>Read an SPSS file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_spss</span><span class="p">(</span><span class="s2">&quot;spss_data.sav&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Extract a subset of columns contained in <code class="docutils literal notranslate"><span class="pre">usecols</span></code> from an SPSS file and
avoid converting categorical columns into <code class="docutils literal notranslate"><span class="pre">pd.Categorical</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_spss</span><span class="p">(</span>
    <span class="s2">&quot;spss_data.sav&quot;</span><span class="p">,</span>
    <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
    <span class="n">convert_categoricals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>More information about the SAV and ZSAV file formats is available <a class="reference external" href="javascript:if(confirm('https://www.ibm.com/docs/en/spss-statistics/22.0.0  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.ibm.com/docs/en/spss-statistics/22.0.0'" tppabs="https://www.ibm.com/docs/en/spss-statistics/22.0.0">here</a>.</p>
</section>
<section id="other-file-formats">
<span id="io-other"></span><h2>Other file formats<a class="headerlink" href="#other-file-formats" title="Permalink to this headline">#</a></h2>
<p>pandas itself only supports IO with a limited set of file formats that map
cleanly to its tabular data model. For reading and writing other file formats
into and from pandas, we recommend these packages from the broader community.</p>
<section id="netcdf">
<h3>netCDF<a class="headerlink" href="#netcdf" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="javascript:if(confirm('https://xarray.pydata.org/en/stable/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://xarray.pydata.org/en/stable/'" tppabs="https://xarray.pydata.org/en/stable/">xarray</a> provides data structures inspired by the pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> for working
with multi-dimensional datasets, with a focus on the netCDF file format and
easy conversion to and from pandas.</p>
</section>
</section>
<section id="performance-considerations">
<span id="io-perf"></span><h2>Performance considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this headline">#</a></h2>
<p>This is an informal comparison of various IO methods, using pandas
0.24.2. Timings are machine dependent and small differences should be
ignored.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">sz</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sz</span><span class="p">),</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">sz</span><span class="p">})</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">RangeIndex: 1000000 entries, 0 to 999999</span>
<span class="go">Data columns (total 2 columns):</span>
<span class="go">A    1000000 non-null float64</span>
<span class="go">B    1000000 non-null int64</span>
<span class="go">dtypes: float64(1), int64(1)</span>
<span class="go">memory usage: 15.3 MB</span>
</pre></div>
</div>
<p>The following test functions will be used below to compare the performance of several IO methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="n">sz</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sz</span><span class="p">),</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">sz</span><span class="p">})</span>

<span class="n">sz</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sz</span><span class="p">),</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">sz</span><span class="p">})</span>


<span class="k">def</span> <span class="nf">test_sql_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;test.sql&quot;</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;test.sql&quot;</span><span class="p">)</span>
    <span class="n">sql_db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;test.sql&quot;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_table&quot;</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">sql_db</span><span class="p">)</span>
    <span class="n">sql_db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">test_sql_read</span><span class="p">():</span>
    <span class="n">sql_db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;test.sql&quot;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;select * from test_table&quot;</span><span class="p">,</span> <span class="n">sql_db</span><span class="p">)</span>
    <span class="n">sql_db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">test_hdf_fixed_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s2">&quot;test_fixed.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_fixed_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;test_fixed.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_fixed_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s2">&quot;test_fixed_compress.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="s2">&quot;blosc&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_fixed_read_compress</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;test_fixed_compress.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_table_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s2">&quot;test_table.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_table_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;test_table.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_table_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span>
        <span class="s2">&quot;test_table_compress.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="s2">&quot;blosc&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;table&quot;</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">test_hdf_table_read_compress</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s2">&quot;test_table_compress.hdf&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_csv_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_csv_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_feather_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_feather</span><span class="p">(</span><span class="s2">&quot;test.feather&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_feather_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_feather</span><span class="p">(</span><span class="s2">&quot;test.feather&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_pickle_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;test.pkl&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_pickle_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;test.pkl&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_pickle_write_compress</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;test.pkl.compress&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;xz&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_pickle_read_compress</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;test.pkl.compress&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;xz&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_parquet_write</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;test.parquet&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_parquet_read</span><span class="p">():</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;test.parquet&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When writing, the top three functions in terms of speed are <code class="docutils literal notranslate"><span class="pre">test_feather_write</span></code>, <code class="docutils literal notranslate"><span class="pre">test_hdf_fixed_write</span></code> and <code class="docutils literal notranslate"><span class="pre">test_hdf_fixed_write_compress</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="o">%</span><span class="k">timeit</span> test_sql_write(df)
<span class="go">3.29 s Â± 43.2 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [5]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_fixed_write(df)
<span class="go">19.4 ms Â± 560 Âµs per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [6]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_fixed_write_compress(df)
<span class="go">19.6 ms Â± 308 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>

<span class="gp">In [7]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_table_write(df)
<span class="go">449 ms Â± 5.61 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [8]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_table_write_compress(df)
<span class="go">448 ms Â± 11.9 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [9]: </span><span class="o">%</span><span class="k">timeit</span> test_csv_write(df)
<span class="go">3.66 s Â± 26.2 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [10]: </span><span class="o">%</span><span class="k">timeit</span> test_feather_write(df)
<span class="go">9.75 ms Â± 117 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)</span>

<span class="gp">In [11]: </span><span class="o">%</span><span class="k">timeit</span> test_pickle_write(df)
<span class="go">30.1 ms Â± 229 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>

<span class="gp">In [12]: </span><span class="o">%</span><span class="k">timeit</span> test_pickle_write_compress(df)
<span class="go">4.29 s Â± 15.9 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [13]: </span><span class="o">%</span><span class="k">timeit</span> test_parquet_write(df)
<span class="go">67.6 ms Â± 706 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<p>When reading, the top three functions in terms of speed are <code class="docutils literal notranslate"><span class="pre">test_feather_read</span></code>, <code class="docutils literal notranslate"><span class="pre">test_pickle_read</span></code> and
<code class="docutils literal notranslate"><span class="pre">test_hdf_fixed_read</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="o">%</span><span class="k">timeit</span> test_sql_read()
<span class="go">1.77 s Â± 17.7 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [15]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_fixed_read()
<span class="go">19.4 ms Â± 436 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>

<span class="gp">In [16]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_fixed_read_compress()
<span class="go">19.5 ms Â± 222 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>

<span class="gp">In [17]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_table_read()
<span class="go">38.6 ms Â± 857 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>

<span class="gp">In [18]: </span><span class="o">%</span><span class="k">timeit</span> test_hdf_table_read_compress()
<span class="go">38.8 ms Â± 1.49 ms per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>

<span class="gp">In [19]: </span><span class="o">%</span><span class="k">timeit</span> test_csv_read()
<span class="go">452 ms Â± 9.04 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [20]: </span><span class="o">%</span><span class="k">timeit</span> test_feather_read()
<span class="go">12.4 ms Â± 99.7 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)</span>

<span class="gp">In [21]: </span><span class="o">%</span><span class="k">timeit</span> test_pickle_read()
<span class="go">18.4 ms Â± 191 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)</span>

<span class="gp">In [22]: </span><span class="o">%</span><span class="k">timeit</span> test_pickle_read_compress()
<span class="go">915 ms Â± 7.48 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class="gp">In [23]: </span><span class="o">%</span><span class="k">timeit</span> test_parquet_read()
<span class="go">24.4 ms Â± 146 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<p>The files <code class="docutils literal notranslate"><span class="pre">test.pkl.compress</span></code>, <code class="docutils literal notranslate"><span class="pre">test.parquet</span></code> and <code class="docutils literal notranslate"><span class="pre">test.feather</span></code> took the least space on disk (in bytes).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>29519500 Oct 10 06:45 test.csv
16000248 Oct 10 06:45 test.feather
8281983  Oct 10 06:49 test.parquet
16000857 Oct 10 06:47 test.pkl
7552144  Oct 10 06:48 test.pkl.compress
34816000 Oct 10 06:42 test.sql
24009288 Oct 10 06:43 test_fixed.hdf
24009288 Oct 10 06:43 test_fixed_compress.hdf
24458940 Oct 10 06:44 test_table.hdf
24458940 Oct 10 06:44 test_table_compress.hdf
</pre></div>
</div>
</section>
</section>
</article>
<footer class="bd-footer-article">

<div class='prev-next-area'>
<a class='left-prev' id="prev-link" href="basics.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html" title="previous page">
<i class="fas fa-angle-left"></i>
<div class="prev-next-info">
<p class="prev-next-subtitle">previous</p>
<p class="prev-next-title">Essential basic functionality</p>
</div>
</a>
<a class='right-next' id="next-link" href="indexing.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html" title="next page">
<div class="prev-next-info">
<p class="prev-next-subtitle">next</p>
<p class="prev-next-title">Indexing and selecting data</p>
</div>
<i class="fas fa-angle-right"></i>
</a>
</div>
</footer>
</div>
<div class="bd-sidebar-secondary bd-toc">
<div class="toc-item">
<div class="tocsection onthispage">
<i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#csv-text-files">
CSV &amp; text files
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#parsing-options">
Parsing options
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#basic">
Basic
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#column-and-index-locations-and-names">
Column and index locations and names
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#general-parsing-configuration">
General parsing configuration
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#na-and-missing-data-handling">
NA and missing data handling
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#datetime-handling">
Datetime handling
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#iteration">
Iteration
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#quoting-compression-and-file-format">
Quoting, compression, and file format
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#error-handling">
Error handling
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#specifying-column-data-types">
Specifying column data types
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#specifying-categorical-dtype">
Specifying categorical dtype
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#naming-and-using-columns">
Naming and using columns
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#handling-column-names">
Handling column names
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#duplicate-names-parsing">
Duplicate names parsing
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#filtering-columns-usecols">
Filtering columns (
<code class="docutils literal notranslate">
<span class="pre">
usecols
</span>
</code>
)
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#comments-and-empty-lines">
Comments and empty lines
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#ignoring-line-comments-and-empty-lines">
Ignoring line comments and empty lines
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#comments">
Comments
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#dealing-with-unicode-data">
Dealing with Unicode data
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#index-columns-and-trailing-delimiters">
Index columns and trailing delimiters
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#date-handling">
Date Handling
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#specifying-date-columns">
Specifying date columns
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#date-parsing-functions">
Date parsing functions
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#parsing-a-csv-with-mixed-timezones">
Parsing a CSV with mixed timezones
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#inferring-datetime-format">
Inferring datetime format
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#international-date-formats">
International date formats
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-csvs-to-binary-file-objects">
Writing CSVs to binary file objects
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#specifying-method-for-floating-point-conversion">
Specifying method for floating-point conversion
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#thousand-separators">
Thousand separators
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#na-values">
NA values
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#infinity">
Infinity
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#returning-series">
Returning Series
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#boolean-values">
Boolean values
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#handling-bad-lines">
Handling â€œbadâ€ lines
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#dialect">
Dialect
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#quoting-and-escape-characters">
Quoting and Escape Characters
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#files-with-fixed-width-columns">
Files with fixed width columns
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#indexes">
Indexes
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#files-with-an-implicit-index-column">
Files with an â€œimplicitâ€ index column
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-an-index-with-a-multiindex">
Reading an index with a
<code class="docutils literal notranslate">
<span class="pre">
MultiIndex
</span>
</code>
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-columns-with-a-multiindex">
Reading columns with a
<code class="docutils literal notranslate">
<span class="pre">
MultiIndex
</span>
</code>
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#automatically-sniffing-the-delimiter">
Automatically â€œsniffingâ€ the delimiter
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-multiple-files-to-create-a-single-dataframe">
Reading multiple files to create a single DataFrame
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#iterating-through-files-chunk-by-chunk">
Iterating through files chunk by chunk
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#specifying-the-parser-engine">
Specifying the parser engine
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-writing-remote-files">
Reading/writing remote files
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-out-data">
Writing out data
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-to-csv-format">
Writing to CSV format
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-a-formatted-string">
Writing a formatted string
</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#json">
JSON
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-json">
Writing JSON
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#orient-options">
Orient options
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#id1">
Date handling
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#fallback-behavior">
Fallback behavior
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-json">
Reading JSON
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#data-conversion">
Data conversion
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#the-numpy-parameter">
The Numpy parameter
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#normalization">
Normalization
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#line-delimited-json">
Line delimited json
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#table-schema">
Table schema
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#html">
HTML
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-html-content">
Reading HTML content
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-to-html-files">
Writing to HTML files
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#html-table-parsing-gotchas">
HTML Table Parsing Gotchas
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#latex">
LaTeX
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-to-latex-files">
Writing to LaTeX files
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#xml">
XML
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-xml">
Reading XML
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-xml">
Writing XML
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#xml-final-notes">
XML Final Notes
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#excel-files">
Excel files
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-excel-files">
Reading Excel files
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#excelfile-class">
<code class="docutils literal notranslate">
<span class="pre">
ExcelFile
</span>
</code>
class
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#specifying-sheets">
Specifying sheets
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-a-multiindex">
Reading a
<code class="docutils literal notranslate">
<span class="pre">
MultiIndex
</span>
</code>
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#parsing-specific-columns">
Parsing specific columns
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#parsing-dates">
Parsing dates
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#cell-converters">
Cell converters
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#dtype-specifications">
Dtype specifications
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-excel-files">
Writing Excel files
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-excel-files-to-disk">
Writing Excel files to disk
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-excel-files-to-memory">
Writing Excel files to memory
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#excel-writer-engines">
Excel writer engines
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#style-and-formatting">
Style and formatting
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#opendocument-spreadsheets">
OpenDocument Spreadsheets
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#binary-excel-xlsb-files">
Binary Excel (.xlsb) files
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#clipboard">
Clipboard
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#pickling">
Pickling
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#compressed-pickle-files">
Compressed pickle files
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#msgpack">
msgpack
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#hdf5-pytables">
HDF5 (PyTables)
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#read-write-api">
Read/write API
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#fixed-format">
Fixed format
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#table-format">
Table format
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#hierarchical-keys">
Hierarchical keys
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#storing-types">
Storing types
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#storing-mixed-types-in-a-table">
Storing mixed types in a table
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#storing-multiindex-dataframes">
Storing MultiIndex DataFrames
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#querying">
Querying
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#querying-a-table">
Querying a table
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#query-timedelta64-ns">
Query timedelta64[ns]
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#query-multiindex">
Query MultiIndex
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#indexing">
Indexing
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#query-via-data-columns">
Query via data columns
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#iterator">
Iterator
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#advanced-queries">
Advanced queries
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry">
<a class="reference internal nav-link" href="#select-a-single-column">
Select a single column
</a>
</li>
<li class="toc-h5 nav-item toc-entry">
<a class="reference internal nav-link" href="#selecting-coordinates">
Selecting coordinates
</a>
</li>
<li class="toc-h5 nav-item toc-entry">
<a class="reference internal nav-link" href="#selecting-using-a-where-mask">
Selecting using a where mask
</a>
</li>
<li class="toc-h5 nav-item toc-entry">
<a class="reference internal nav-link" href="#storer-object">
Storer object
</a>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#multiple-table-queries">
Multiple table queries
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#delete-from-a-table">
Delete from a table
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#notes-caveats">
Notes &amp; caveats
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#compression">
Compression
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#ptrepack">
ptrepack
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#caveats">
Caveats
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#datatypes">
DataTypes
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#categorical-data">
Categorical data
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#string-columns">
String columns
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#external-compatibility">
External compatibility
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#performance">
Performance
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#feather">
Feather
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#parquet">
Parquet
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#handling-indexes">
Handling indexes
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#partitioning-parquet-files">
Partitioning Parquet files
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#orc">
ORC
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#sql-queries">
SQL queries
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-dataframes">
Writing DataFrames
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#sql-data-types">
SQL data types
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#datetime-data-types">
Datetime data types
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#insertion-method">
Insertion method
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-tables">
Reading tables
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#schema-support">
Schema support
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#id5">
Querying
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#engine-connection-examples">
Engine connection examples
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#advanced-sqlalchemy-queries">
Advanced SQLAlchemy queries
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#sqlite-fallback">
Sqlite fallback
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#google-bigquery">
Google BigQuery
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#stata-format">
Stata format
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#writing-to-stata-format">
Writing to stata format
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-from-stata-format">
Reading from Stata format
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#io-stata-categorical">
Categorical data
</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#sas-formats">
SAS formats
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#spss-formats">
SPSS formats
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#other-file-formats">
Other file formats
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#netcdf">
netCDF
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#performance-considerations">
Performance considerations
</a>
</li>
</ul>
</nav>
</div>
<div class="toc-item">
</div>
<div class="toc-item">
<div class="tocsection sourcelink">
<a href="io.rst.txt.htm" tppabs="https://pandas.pydata.org/pandas-docs/stable/_sources/user_guide/io.rst.txt">
<i class="fas fa-file-alt"></i> Show Source
</a>
</div>
</div>
</div>
</div>
<footer class="bd-footer-content">
<div class="bd-footer-content__inner">
</div>
</footer>
</main>
</div>
</div>

<script data-cfasync="false" src="email-decode.min.js" tppabs="https://pandas.pydata.org/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="pydata-sphinx-theme.js-digest=9b1a4fa89bdd0e95b23b" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>
<footer class="bd-footer"><div class="bd-footer__inner container">
<div class="footer-item">
<p class="copyright">
&copy 2022 pandas via <a href="javascript:if(confirm('https://numfocus.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://numfocus.org/'" tppabs="https://numfocus.org/">NumFOCUS, Inc.</a> Hosted by <a href="javascript:if(confirm('https://www.ovhcloud.com/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.ovhcloud.com/'" tppabs="https://www.ovhcloud.com/">OVHcloud</a>.
</p>
</div>
<div class="footer-item">
<p class="sphinx-version">
Created using <a href="javascript:if(confirm('http://sphinx-doc.org/  \n\n¸ÃÎÄ¼þÎÞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·þÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://sphinx-doc.org/'" tppabs="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
</div>
</div>
</footer>
</body>
</html>