
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>Comparison with Stata &#8212; pandas 1.5.1 documentation</title>
<script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>

<link href="theme.css-digest=9b1a4fa89bdd0e95b23b.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="pydata-sphinx-theme.css-digest=9b1a4fa89bdd0e95b23b.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link rel="stylesheet" href="all.min.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/vendor/fontawesome/6.1.2/css/all.min.css">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="stylesheet" type="text/css" href="pygments.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/pygments.css" />
<link rel="stylesheet" type="text/css" href="plot_directive.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/plot_directive.css" />
<link rel="stylesheet" type="text/css" href="copybutton.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/copybutton.css" />
<link rel="stylesheet" type="text/css" href="panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
<link rel="stylesheet" type="text/css" href="panels-variables.06eb56fa6e07937060861dad626602ad.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
<link rel="stylesheet" type="text/css" href="getting_started.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/css/getting_started.css" />
<link rel="stylesheet" type="text/css" href="pandas.css" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/css/pandas.css" />

<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">
<script data-url_root="../../" id="documentation_options" src="documentation_options.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/documentation_options.js"></script>
<script src="jquery.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/jquery.js"></script>
<script src="underscore.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/underscore.js"></script>
<script src="doctools.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/doctools.js"></script>
<script src="clipboard.min.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/clipboard.min.js"></script>
<script src="copybutton.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/copybutton.js"></script>
<script src="toggleprompt.js" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/toggleprompt.js"></script>
<script src="embed-amd.js" tppabs="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
<script async="async" src="analytics.js" tppabs="https://www.google-analytics.com/analytics.js"></script>
<script>
                    window.ga = window.ga || function () {
                        (ga.q = ga.q || []).push(arguments) };
                    ga.l = +new Date;
                    ga('create', 'UA-27880019-2', 'auto');
                    ga('set', 'anonymizeIp', true);
                    ga('send', 'pageview');
                </script>
<script>DOCUMENTATION_OPTIONS.pagename = 'getting_started/comparison/comparison_with_stata';</script>
<script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.pydata.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.5.1';
        </script>
<link rel="shortcut icon" href="../../_static/favicon.ico" />
<link rel="index" title="Index" href="../../genindex.html" />
<link rel="search" title="Search" href="../../search.html" />
<link rel="next" title="Community tutorials" href="../tutorials.html" />
<link rel="prev" title="Comparison with SAS" href="comparison_with_sas.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
</head>
<body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
<input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
<label class="overlay overlay-primary" for="__primary"></label>
<input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
<label class="overlay overlay-secondary" for="__secondary"></label>
<div class="search-button__wrapper">
<div class="search-button__overlay"></div>
<div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="https://pandas.pydata.org/pandas-docs/stable/search.html" method="get">
<i class="icon fas fa-search"></i>
<input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</div>
</div>
<nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
<label class="sidebar-toggle primary-toggle" for="__primary">
<span class="fas fa-bars"></span>
</label>
<div id="navbar-start">
<a class="navbar-brand logo" href="index-5.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/index.html">
<img src="pandas.svg" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/pandas.svg" class="logo__image only-light" alt="Logo image">
<img src="pandas_white.svg" tppabs="https://pandas.pydata.org/static/img/pandas_white.svg" class="logo__image only-dark" alt="Logo image">
</a>
</div>
<div class="col-lg-9 navbar-header-items">
<div id="navbar-center" class="mr-auto">
<div class="navbar-center-item">
<nav class="navbar-nav">
<p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
Site Navigation
</p>
<ul id="navbar-main-elements" class="navbar-nav">
<li class="nav-item current active">
<a class="nav-link" href="index.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/index.html">
Getting started
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-1.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">
User Guide
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-2.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/index.html">
API reference
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-3.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/development/index.html">
Development
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-4.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/whatsnew/index.html">
Release notes
</a>
</li>
</ul>
</nav>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item navbar-end__search-button-container">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
<i class="fas fa-search"></i>
</button>
</div>
<div class="navbar-end-item">
<div class="version-switcher__container dropdown">
<button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
1.5.1 
<span class="caret"></span>
</button>
<div class="version-switcher__menu dropdown-menu list-group-flush py-0">

</div>
</div>
</div>
<div class="navbar-end-item">
<span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
<a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
<a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
<a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
</div>
<div class="navbar-end-item">
<ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
<li class="nav-item">
<a href="javascript:if(confirm('https://github.com/pandas-dev/pandas  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://github.com/pandas-dev/pandas'" tppabs="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label></a>
</li>
<li class="nav-item">
<a href="javascript:if(confirm('https://twitter.com/pandas_dev  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://twitter.com/pandas_dev'" tppabs="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label></a>
</li>
</ul>
</div>
</div>
</div>
<div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
<i class="fas fa-search"></i>
</button>
</div>
<label class="sidebar-toggle secondary-toggle" for="__secondary">
<span class="fas fa-outdent"></span>
</label>
</div>
</nav>
<div class="bd-container">
<div class="bd-container__inner bd-page-width">
<div class="bd-sidebar-primary bd-sidebar">
<div class="sidebar-header-items sidebar-primary__section">
<div class="sidebar-header-items__center">
<div class="navbar-center-item">
<nav class="navbar-nav">
<p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
Site Navigation
</p>
<ul id="navbar-main-elements" class="navbar-nav">
<li class="nav-item current active">
<a class="nav-link" href="index.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/index.html">
Getting started
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-1.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">
User Guide
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-2.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/index.html">
API reference
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-3.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/development/index.html">
Development
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="index-4.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/whatsnew/index.html">
Release notes
</a>
</li>
</ul>
</nav>
</div>
</div>
<div class="sidebar-header-items__end">
<div class="navbar-end-item">
<div class="version-switcher__container dropdown">
<button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
1.5.1 
<span class="caret"></span>
</button>
<div class="version-switcher__menu dropdown-menu list-group-flush py-0">

</div>
</div>
</div>
<div class="navbar-end-item">
<span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
<a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
<a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
<a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
</div>
<div class="navbar-end-item">
<ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
<li class="nav-item">
<a href="javascript:if(confirm('https://github.com/pandas-dev/pandas  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://github.com/pandas-dev/pandas'" tppabs="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label></a>
</li>
<li class="nav-item">
<a href="javascript:if(confirm('https://twitter.com/pandas_dev  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://twitter.com/pandas_dev'" tppabs="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label></a>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebar-start-items sidebar-primary__section">
<div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
<div class="bd-toc-item navbar-nav">
<ul class="current nav bd-sidenav">
<li class="toctree-l1">
<a class="reference internal" href="install.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html">
Installation
</a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="overview.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/overview.html">
Package overview
</a>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="index-6.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/index.html">
Getting started tutorials
</a>
<input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox" />
<label class="toctree-toggle" for="toctree-checkbox-1">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="01_table_oriented.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/01_table_oriented.html">
What kind of data does pandas handle?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="02_read_write.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/02_read_write.html">
How do I read and write tabular data?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="03_subset_data.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/03_subset_data.html">
How do I select a subset of a
<code class="docutils literal notranslate">
<span class="pre">
DataFrame
</span>
</code>
?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="04_plotting.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/04_plotting.html">
How do I create plots in pandas?
</a>
 </li>
<li class="toctree-l2">
<a class="reference internal" href="05_add_columns.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/05_add_columns.html">
How to create new columns derived from existing columns?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="06_calculate_statistics.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/06_calculate_statistics.html">
How to calculate summary statistics?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="07_reshape_table_layout.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/07_reshape_table_layout.html">
How to reshape the layout of tables?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="08_combine_dataframes.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/08_combine_dataframes.html">
How to combine data from multiple tables?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="09_timeseries.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/09_timeseries.html">
How to handle time series data with ease?
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="10_text_data.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/10_text_data.html">
How to manipulate textual data?
</a>
</li>
</ul>
</li>
<li class="toctree-l1 current active has-children">
<a class="reference internal" href="index-7.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/index.html">
Comparison with other tools
</a>
<input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox" />
<label class="toctree-toggle" for="toctree-checkbox-2">
<i class="fas fa-chevron-down">
</i>
</label>
<ul class="current">
<li class="toctree-l2">
<a class="reference internal" href="comparison_with_r.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_r.html">
Comparison with R / R libraries
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="comparison_with_sql.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_sql.html">
Comparison with SQL
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="comparison_with_spreadsheets.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_spreadsheets.html">
Comparison with spreadsheets
</a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="comparison_with_sas.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_sas.html">
Comparison with SAS
</a>
</li>
<li class="toctree-l2 current active">
<a class="current reference internal" href="#">
Comparison with Stata
</a>
</li>
</ul>
</li>
<li class="toctree-l1">
<a class="reference internal" href="tutorials.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/tutorials.html">
Community tutorials
</a>
</li>
</ul>
</div>
</nav>
</div>
</div>
<div class="sidebar-end-items sidebar-primary__section">
<div class="sidebar-end-items__item">
</div>
</div>
</div>
<main class="bd-main">
<div class="bd-content">
<div class="bd-article-container">
<div class="bd-header-article">
</div>
<article class="bd-article" role="main">
<section id="comparison-with-stata">
<span id="compare-with-stata"></span><h1>Comparison with Stata<a class="headerlink" href="#comparison-with-stata" title="Permalink to this headline">#</a></h1>
<p>For potential users coming from <a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/Stata  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://en.wikipedia.org/wiki/Stata'" tppabs="https://en.wikipedia.org/wiki/Stata">Stata</a>
this page is meant to demonstrate how different Stata operations would be
performed in pandas.</p>
<p>If you‚Äôre new to pandas, you might want to first read through <a class="reference internal" href="10min.html#min" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html#min"><span class="std std-ref">10 Minutes to pandas</span></a>
to familiarize yourself with the library.</p>
<p>As is customary, we import pandas and NumPy as follows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="gp">In [2]: </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<section id="data-structures">
<h2>Data structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">#</a></h2>
<section id="general-terminology-translation">
<h3>General terminology translation<a class="headerlink" href="#general-terminology-translation" title="Permalink to this headline">#</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pandas</p></th>
<th class="head"><p>Stata</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></p></td>
<td><p>data set</p></td>
</tr>
<tr class="row-odd"><td><p>column</p></td>
<td><p>variable</p></td>
</tr>
<tr class="row-even"><td><p>row</p></td>
<td><p>observation</p></td>
</tr>
<tr class="row-odd"><td><p>groupby</p></td>
<td><p>bysort</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NaN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="dataframe">
<h3><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code><a class="headerlink" href="#dataframe" title="Permalink to this headline">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> in pandas is analogous to a Stata data set ‚Äì a two-dimensional
data source with labeled columns that can be of different types. As will be
shown in this document, almost any operation that can be applied to a data set
in Stata can also be accomplished in pandas.</p>
</section>
<section id="series">
<h3><code class="docutils literal notranslate"><span class="pre">Series</span></code><a class="headerlink" href="#series" title="Permalink to this headline">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">Series</span></code> is the data structure that represents one column of a
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. Stata doesn‚Äôt have a separate data structure for a single column,
but in general, working with a <code class="docutils literal notranslate"><span class="pre">Series</span></code> is analogous to referencing a column
of a data set in Stata.</p>
</section>
<section id="index">
<h3><code class="docutils literal notranslate"><span class="pre">Index</span></code><a class="headerlink" href="#index" title="Permalink to this headline">#</a></h3>
<p>Every <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code> has an <code class="docutils literal notranslate"><span class="pre">Index</span></code> ‚Äì labels on the
<em>rows</em> of the data. Stata does not have an exactly analogous concept. In Stata, a data set‚Äôs
rows are essentially unlabeled, other than an implicit integer index that can be
accessed with <code class="docutils literal notranslate"><span class="pre">_n</span></code>.</p>
<p>In pandas, if no index is specified, an integer index is also used by default
(first row = 0, second row = 1, and so on). While using a labeled <code class="docutils literal notranslate"><span class="pre">Index</span></code> or
<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> can enable sophisticated analyses and is ultimately an important
part of pandas to understand, for this comparison we will essentially ignore the
<code class="docutils literal notranslate"><span class="pre">Index</span></code> and just treat the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as a collection of columns. Please
see the <a class="reference internal" href="indexing.html#indexing" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing"><span class="std std-ref">indexing documentation</span></a> for much more on how to use an
<code class="docutils literal notranslate"><span class="pre">Index</span></code> effectively.</p>
</section>
<section id="copies-vs-in-place-operations">
<h3>Copies vs. in place operations<a class="headerlink" href="#copies-vs-in-place-operations" title="Permalink to this headline">#</a></h3>
<p>Most pandas operations return copies of the <code class="docutils literal notranslate"><span class="pre">Series</span></code>/<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. To make the changes ‚Äústick‚Äù,
you‚Äôll need to either assign to a new variable:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sorted_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>or overwrite the original one:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will see an <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> keyword argument available for some methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Its use is discouraged. <a class="reference internal" href="indexing.html#indexing-view-versus-copy" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-view-versus-copy"><span class="std std-ref">More information.</span></a></p>
</div>
</section>
</section>
<section id="data-input-output">
<h2>Data input / output<a class="headerlink" href="#data-input-output" title="Permalink to this headline">#</a></h2>
<section id="constructing-a-dataframe-from-values">
<h3>Constructing a DataFrame from values<a class="headerlink" href="#constructing-a-dataframe-from-values" title="Permalink to this headline">#</a></h3>
<p>A Stata data set can be built from specified values by
placing the data after an <code class="docutils literal notranslate"><span class="pre">input</span></code> statement and
specifying the column names.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">input</span> x y
<span class="m">1</span> <span class="m">2</span>
<span class="m">3</span> <span class="m">4</span>
<span class="m">5</span> <span class="m">6</span><span class="k"></span>
<span class="k">end</span>
</pre></div>
</div>
<p>A pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> can be constructed in many different ways,
but for a small number of values, it is often convenient to specify it as
a Python dictionary, where the keys are the column names
and the values are the data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>

<span class="gp">In [4]: </span><span class="n">df</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">   x  y</span>
<span class="go">0  1  2</span>
<span class="go">1  3  4</span>
<span class="go">2  5  6</span>
</pre></div>
</div>
</section>
<section id="reading-external-data">
<h3>Reading external data<a class="headerlink" href="#reading-external-data" title="Permalink to this headline">#</a></h3>
<p>Like Stata, pandas provides utilities for reading in data from
many formats. The <code class="docutils literal notranslate"><span class="pre">tips</span></code> data set, found within the pandas
tests (<a class="reference external" href="javascript:if(confirm('https://raw.githubusercontent.com/pandas-dev/pandas/main/pandas/tests/io/data/csv/tips.csv  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://raw.githubusercontent.com/pandas-dev/pandas/main/pandas/tests/io/data/csv/tips.csv'" tppabs="https://raw.githubusercontent.com/pandas-dev/pandas/main/pandas/tests/io/data/csv/tips.csv">csv</a>)
will be used in many of the following examples.</p>
<p>Stata provides <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">delimited</span></code> to read csv data into a data set in memory.
If the <code class="docutils literal notranslate"><span class="pre">tips.csv</span></code> file is in the current working directory, we can import it as follows.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span>import delimited tips<span class="m">.</span>csv
</pre></div>
</div>
<p>The pandas method is <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>, which works similarly. Additionally, it will automatically download
the data set if presented with a url.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">   ...: </span>    <span class="s2">&quot;https://raw.github.com/pandas-dev&quot;</span>
<span class="gp">   ...: </span>    <span class="s2">&quot;/pandas/main/pandas/tests/io/data/csv/tips.csv&quot;</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [6]: </span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="gp">In [7]: </span><span class="n">tips</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">     total_bill   tip     sex smoker   day    time  size</span>
<span class="go">0         16.99  1.01  Female     No   Sun  Dinner     2</span>
<span class="go">1         10.34  1.66    Male     No   Sun  Dinner     3</span>
<span class="go">2         21.01  3.50    Male     No   Sun  Dinner     3</span>
<span class="go">3         23.68  3.31    Male     No   Sun  Dinner     2</span>
<span class="go">4         24.59  3.61  Female     No   Sun  Dinner     4</span>
<span class="go">..          ...   ...     ...    ...   ...     ...   ...</span>
<span class="go">239       29.03  5.92    Male     No   Sat  Dinner     3</span>
<span class="go">240       27.18  2.00  Female    Yes   Sat  Dinner     2</span>
<span class="go">241       22.67  2.00    Male    Yes   Sat  Dinner     2</span>
<span class="go">242       17.82  1.75    Male     No   Sat  Dinner     2</span>
<span class="go">243       18.78  3.00  Female     No  Thur  Dinner     2</span>

<span class="go">[244 rows x 7 columns]</span>
</pre></div>
</div>
<p>Like <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">delimited</span></code>, <a class="reference internal" href="pandas.read_csv.html#pandas.read_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> can take a number of parameters to specify
how the data should be parsed. For example, if the data were instead tab delimited,
did not have column names, and existed in the current working directory,
the pandas command would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># alternatively, read_table is an alias to read_csv with tab delimiter</span>
<span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>pandas can also read Stata data sets in <code class="docutils literal notranslate"><span class="pre">.dta</span></code> format with the <a class="reference internal" href="pandas.read_stata.html#pandas.read_stata" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;data.dta&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition to text/csv and Stata files, pandas supports a variety of other data formats
such as Excel, SAS, HDF5, Parquet, and SQL databases. These are all read via a <code class="docutils literal notranslate"><span class="pre">pd.read_*</span></code>
function. See the <a class="reference internal" href="io.html#io" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io"><span class="std std-ref">IO documentation</span></a> for more details.</p>
</section>
<section id="limiting-output">
<h3>Limiting output<a class="headerlink" href="#limiting-output" title="Permalink to this headline">#</a></h3>
<p>By default, pandas will truncate output of large <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>s to show the first and last rows.
This can be overridden by <a class="reference internal" href="options.html#options" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html#options"><span class="std std-ref">changing the pandas options</span></a>, or using
<a class="reference internal" href="pandas.DataFrame.head.html#pandas.DataFrame.head" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.head.html#pandas.DataFrame.head" title="pandas.DataFrame.head"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.head()</span></code></a> or <a class="reference internal" href="pandas.DataFrame.tail.html#pandas.DataFrame.tail" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.tail.html#pandas.DataFrame.tail" title="pandas.DataFrame.tail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.tail()</span></code></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">tips</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gh">Out[8]: </span><span class="go"></span>
<span class="go">   total_bill   tip     sex smoker  day    time  size</span>
<span class="go">0       16.99  1.01  Female     No  Sun  Dinner     2</span>
<span class="go">1       10.34  1.66    Male     No  Sun  Dinner     3</span>
<span class="go">2       21.01  3.50    Male     No  Sun  Dinner     3</span>
<span class="go">3       23.68  3.31    Male     No  Sun  Dinner     2</span>
<span class="go">4       24.59  3.61  Female     No  Sun  Dinner     4</span>
</pre></div>
</div>
<p>The equivalent in Stata would be:</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">list in</span> <span class="m">1</span><span class="o">/</span><span class="m">5</span>
</pre></div>
</div>
</section>
<section id="exporting-data">
<h3>Exporting data<a class="headerlink" href="#exporting-data" title="Permalink to this headline">#</a></h3>
<p>The inverse of <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">delimited</span></code> in Stata is <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">delimited</span></code></p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span>export delimited tips2<span class="m">.</span>csv
</pre></div>
</div>
<p>Similarly in pandas, the opposite of <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> is <a class="reference internal" href="pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;tips2.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>pandas can also export to Stata file format with the <a class="reference internal" href="pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span><span class="o">.</span><span class="n">to_stata</span><span class="p">(</span><span class="s2">&quot;tips2.dta&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="data-operations">
<h2>Data operations<a class="headerlink" href="#data-operations" title="Permalink to this headline">#</a></h2>
<section id="operations-on-columns">
<h3>Operations on columns<a class="headerlink" href="#operations-on-columns" title="Permalink to this headline">#</a></h3>
<p>In Stata, arbitrary math expressions can be used with the <code class="docutils literal notranslate"><span class="pre">generate</span></code> and
<code class="docutils literal notranslate"><span class="pre">replace</span></code> commands on new or existing columns. The <code class="docutils literal notranslate"><span class="pre">drop</span></code> command drops
the column from the data set.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">replace</span> total_bill = total_bill <span class="o">-</span> <span class="m">2</span><span class="k"></span>
<span class="k">generate</span> new_bill = total_bill <span class="o">/</span> <span class="m">2</span><span class="k"></span>
<span class="k">drop</span> new_bill
</pre></div>
</div>
<p>pandas provides vectorized operations by specifying the individual <code class="docutils literal notranslate"><span class="pre">Series</span></code> in the
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. New columns can be assigned in the same way. The <a class="reference internal" href="pandas.DataFrame.drop.html#pandas.DataFrame.drop" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a> method drops
a column from the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span>

<span class="gp">In [10]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;new_bill&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span>

<span class="gp">In [11]: </span><span class="n">tips</span>
<span class="gh">Out[11]: </span><span class="go"></span>
<span class="go">     total_bill   tip     sex smoker   day    time  size  new_bill</span>
<span class="go">0         14.99  1.01  Female     No   Sun  Dinner     2     7.495</span>
<span class="go">1          8.34  1.66    Male     No   Sun  Dinner     3     4.170</span>
<span class="go">2         19.01  3.50    Male     No   Sun  Dinner     3     9.505</span>
<span class="go">3         21.68  3.31    Male     No   Sun  Dinner     2    10.840</span>
<span class="go">4         22.59  3.61  Female     No   Sun  Dinner     4    11.295</span>
<span class="go">..          ...   ...     ...    ...   ...     ...   ...       ...</span>
<span class="go">239       27.03  5.92    Male     No   Sat  Dinner     3    13.515</span>
<span class="go">240       25.18  2.00  Female    Yes   Sat  Dinner     2    12.590</span>
<span class="go">241       20.67  2.00    Male    Yes   Sat  Dinner     2    10.335</span>
<span class="go">242       15.82  1.75    Male     No   Sat  Dinner     2     7.910</span>
<span class="go">243       16.78  3.00  Female     No  Thur  Dinner     2     8.390</span>

<span class="go">[244 rows x 8 columns]</span>

<span class="gp">In [12]: </span><span class="n">tips</span> <span class="o">=</span> <span class="n">tips</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;new_bill&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">#</a></h3>
<p>Filtering in Stata is done with an <code class="docutils literal notranslate"><span class="pre">if</span></code> clause on one or more columns.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">list if</span> total_bill <span class="o">&gt;</span> <span class="m">10</span>
</pre></div>
</div>
<p>DataFrames can be filtered in multiple ways; the most intuitive of which is using
<a class="reference internal" href="indexing.html#indexing-boolean" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-boolean"><span class="std std-ref">boolean indexing</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">tips</span><span class="p">[</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">]</span>
<span class="gh">Out[13]: </span><span class="go"></span>
<span class="go">     total_bill   tip     sex smoker   day    time  size</span>
<span class="go">0         14.99  1.01  Female     No   Sun  Dinner     2</span>
<span class="go">2         19.01  3.50    Male     No   Sun  Dinner     3</span>
<span class="go">3         21.68  3.31    Male     No   Sun  Dinner     2</span>
<span class="go">4         22.59  3.61  Female     No   Sun  Dinner     4</span>
<span class="go">5         23.29  4.71    Male     No   Sun  Dinner     4</span>
<span class="go">..          ...   ...     ...    ...   ...     ...   ...</span>
<span class="go">239       27.03  5.92    Male     No   Sat  Dinner     3</span>
<span class="go">240       25.18  2.00  Female    Yes   Sat  Dinner     2</span>
<span class="go">241       20.67  2.00    Male    Yes   Sat  Dinner     2</span>
<span class="go">242       15.82  1.75    Male     No   Sat  Dinner     2</span>
<span class="go">243       16.78  3.00  Female     No  Thur  Dinner     2</span>

<span class="go">[204 rows x 7 columns]</span>
</pre></div>
</div>
<p>The above statement is simply passing a <code class="docutils literal notranslate"><span class="pre">Series</span></code> of <code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code> objects to the DataFrame,
returning all rows with <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">is_dinner</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Dinner&quot;</span>

<span class="gp">In [15]: </span><span class="n">is_dinner</span>
<span class="gh">Out[15]: </span><span class="go"></span>
<span class="go">0      True</span>
<span class="go">1      True</span>
<span class="go">2      True</span>
<span class="go">3      True</span>
<span class="go">4      True</span>
<span class="go">       ... </span>
<span class="go">239    True</span>
<span class="go">240    True</span>
<span class="go">241    True</span>
<span class="go">242    True</span>
<span class="go">243    True</span>
<span class="go">Name: time, Length: 244, dtype: bool</span>

<span class="gp">In [16]: </span><span class="n">is_dinner</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[16]: </span><span class="go"></span>
<span class="go">True     176</span>
<span class="go">False     68</span>
<span class="go">Name: time, dtype: int64</span>

<span class="gp">In [17]: </span><span class="n">tips</span><span class="p">[</span><span class="n">is_dinner</span><span class="p">]</span>
<span class="gh">Out[17]: </span><span class="go"></span>
<span class="go">     total_bill   tip     sex smoker   day    time  size</span>
<span class="go">0         14.99  1.01  Female     No   Sun  Dinner     2</span>
<span class="go">1          8.34  1.66    Male     No   Sun  Dinner     3</span>
<span class="go">2         19.01  3.50    Male     No   Sun  Dinner     3</span>
<span class="go">3         21.68  3.31    Male     No   Sun  Dinner     2</span>
<span class="go">4         22.59  3.61  Female     No   Sun  Dinner     4</span>
<span class="go">..          ...   ...     ...    ...   ...     ...   ...</span>
<span class="go">239       27.03  5.92    Male     No   Sat  Dinner     3</span>
<span class="go">240       25.18  2.00  Female    Yes   Sat  Dinner     2</span>
<span class="go">241       20.67  2.00    Male    Yes   Sat  Dinner     2</span>
<span class="go">242       15.82  1.75    Male     No   Sat  Dinner     2</span>
<span class="go">243       16.78  3.00  Female     No  Thur  Dinner     2</span>

<span class="go">[176 rows x 7 columns]</span>
</pre></div>
</div>
</section>
<section id="if-then-logic">
<h3>If/then logic<a class="headerlink" href="#if-then-logic" title="Permalink to this headline">#</a></h3>
<p>In Stata, an <code class="docutils literal notranslate"><span class="pre">if</span></code> clause can also be used to create new columns.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> bucket = <span class="s">&quot;low&quot;</span><span class="k"> if</span> total_bill <span class="o">&lt;</span> <span class="m">10</span><span class="k"></span>
<span class="k">replace</span> bucket = <span class="s">&quot;high&quot;</span><span class="k"> if</span> total_bill <span class="o">&gt;=</span> <span class="m">10</span>
</pre></div>
</div>
<p>The same operation in pandas can be accomplished using
the <code class="docutils literal notranslate"><span class="pre">where</span></code> method from <code class="docutils literal notranslate"><span class="pre">numpy</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;bucket&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="n">tips</span>
<span class="gh">Out[19]: </span><span class="go"></span>
<span class="go">     total_bill   tip     sex smoker   day    time  size bucket</span>
<span class="go">0         14.99  1.01  Female     No   Sun  Dinner     2   high</span>
<span class="go">1          8.34  1.66    Male     No   Sun  Dinner     3    low</span>
<span class="go">2         19.01  3.50    Male     No   Sun  Dinner     3   high</span>
<span class="go">3         21.68  3.31    Male     No   Sun  Dinner     2   high</span>
<span class="go">4         22.59  3.61  Female     No   Sun  Dinner     4   high</span>
<span class="go">..          ...   ...     ...    ...   ...     ...   ...    ...</span>
<span class="go">239       27.03  5.92    Male     No   Sat  Dinner     3   high</span>
<span class="go">240       25.18  2.00  Female    Yes   Sat  Dinner     2   high</span>
<span class="go">241       20.67  2.00    Male    Yes   Sat  Dinner     2   high</span>
<span class="go">242       15.82  1.75    Male     No   Sat  Dinner     2   high</span>
<span class="go">243       16.78  3.00  Female     No  Thur  Dinner     2   high</span>

<span class="go">[244 rows x 8 columns]</span>
</pre></div>
</div>
</section>
<section id="date-functionality">
<h3>Date functionality<a class="headerlink" href="#date-functionality" title="Permalink to this headline">#</a></h3>
<p>Stata provides a variety of functions to do operations on
date/datetime columns.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> date1 = <span class="nf">mdy</span>(<span class="m">1</span>, <span class="m">15</span>, <span class="m">2013</span>)<span class="k"></span>
<span class="k">generate</span> date2 = <span class="nf">date</span>(<span class="s">&quot;Feb152015&quot;</span>, <span class="s">&quot;MDY&quot;</span>)

<span class="k">generate</span> date1_year = <span class="nf">year</span>(date1)<span class="k"></span>
<span class="k">generate</span> date2_month = <span class="nf">month</span>(date2)

<span class="c1">* shift date to beginning of next month</span><span class="k"></span>
<span class="k">generate</span> date1_next = <span class="nf">mdy</span>(<span class="nf">month</span>(date1) <span class="o">+</span> <span class="m">1</span>, <span class="m">1</span>, <span class="nf">year</span>(date1))<span class="k"> if</span> <span class="nf">month</span>(date1) <span class="o">!=</span> <span class="m">12</span><span class="k"></span>
<span class="k">replace</span> date1_next = <span class="nf">mdy</span>(<span class="m">1</span>, <span class="m">1</span>, <span class="nf">year</span>(date1) <span class="o">+</span> <span class="m">1</span>)<span class="k"> if</span> <span class="nf">month</span>(date1) <span class="o">==</span> <span class="m">12</span><span class="k"></span>
<span class="k">generate</span> months_between = <span class="nf">mofd</span>(date2) <span class="o">-</span> <span class="nf">mofd</span>(date1)

<span class="k">list</span> date1 date2 date1_year date2_month date1_next months_between
</pre></div>
</div>
<p>The equivalent pandas operations are shown below. In addition to these
functions, pandas supports other Time Series features
not available in Stata (such as time zone handling and custom offsets) ‚Äì
see the <a class="reference internal" href="timeseries.html#timeseries" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries"><span class="std std-ref">timeseries documentation</span></a> for more details.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2013-01-15&quot;</span><span class="p">)</span>

<span class="gp">In [21]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2015-02-15&quot;</span><span class="p">)</span>

<span class="gp">In [22]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date1_year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>

<span class="gp">In [23]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date2_month&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span>

<span class="gp">In [24]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date1_next&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date1&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">MonthBegin</span><span class="p">()</span>

<span class="gp">In [25]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;months_between&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;date2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;date1&quot;</span>
<span class="gp">   ....: </span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [26]: </span><span class="n">tips</span><span class="p">[</span>
<span class="gp">   ....: </span>    <span class="p">[</span><span class="s2">&quot;date1&quot;</span><span class="p">,</span> <span class="s2">&quot;date2&quot;</span><span class="p">,</span> <span class="s2">&quot;date1_year&quot;</span><span class="p">,</span> <span class="s2">&quot;date2_month&quot;</span><span class="p">,</span> <span class="s2">&quot;date1_next&quot;</span><span class="p">,</span> <span class="s2">&quot;months_between&quot;</span><span class="p">]</span>
<span class="gp">   ....: </span><span class="p">]</span>
<span class="gp">   ....: </span>
<span class="gh">Out[26]: </span><span class="go"></span>
<span class="go">         date1      date2  date1_year  date2_month date1_next    months_between</span>
<span class="go">0   2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">1   2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">2   2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">3   2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">4   2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">..         ...        ...         ...          ...        ...               ...</span>
<span class="go">239 2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">240 2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">241 2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">242 2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>
<span class="go">243 2013-01-15 2015-02-15        2013            2 2013-02-01  &lt;25 * MonthEnds&gt;</span>

<span class="go">[244 rows x 6 columns]</span>
</pre></div>
</div>
</section>
<section id="selection-of-columns">
<h3>Selection of columns<a class="headerlink" href="#selection-of-columns" title="Permalink to this headline">#</a></h3>
<p>Stata provides keywords to select, drop, and rename columns.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">keep</span> sex total_bill tip

<span class="k">drop</span> sex

<span class="k">rename</span> total_bill total_bill_2
</pre></div>
</div>
<p>The same operations are expressed in pandas below.</p>
<section id="keep-certain-columns">
<h4>Keep certain columns<a class="headerlink" href="#keep-certain-columns" title="Permalink to this headline">#</a></h4>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">tips</span><span class="p">[[</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;total_bill&quot;</span><span class="p">,</span> <span class="s2">&quot;tip&quot;</span><span class="p">]]</span>
<span class="gh">Out[27]: </span><span class="go"></span>
<span class="go">        sex  total_bill   tip</span>
<span class="go">0    Female       14.99  1.01</span>
<span class="go">1      Male        8.34  1.66</span>
<span class="go">2      Male       19.01  3.50</span>
<span class="go">3      Male       21.68  3.31</span>
<span class="go">4    Female       22.59  3.61</span>
<span class="go">..      ...         ...   ...</span>
<span class="go">239    Male       27.03  5.92</span>
<span class="go">240  Female       25.18  2.00</span>
<span class="go">241    Male       20.67  2.00</span>
<span class="go">242    Male       15.82  1.75</span>
<span class="go">243  Female       16.78  3.00</span>

<span class="go">[244 rows x 3 columns]</span>
</pre></div>
</div>
</section>
<section id="drop-a-column">
<h4>Drop a column<a class="headerlink" href="#drop-a-column" title="Permalink to this headline">#</a></h4>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [28]: </span><span class="n">tips</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[28]: </span><span class="go"></span>
<span class="go">     total_bill   tip smoker   day    time  size</span>
<span class="go">0         14.99  1.01     No   Sun  Dinner     2</span>
<span class="go">1          8.34  1.66     No   Sun  Dinner     3</span>
<span class="go">2         19.01  3.50     No   Sun  Dinner     3</span>
<span class="go">3         21.68  3.31     No   Sun  Dinner     2</span>
<span class="go">4         22.59  3.61     No   Sun  Dinner     4</span>
<span class="go">..          ...   ...    ...   ...     ...   ...</span>
<span class="go">239       27.03  5.92     No   Sat  Dinner     3</span>
<span class="go">240       25.18  2.00    Yes   Sat  Dinner     2</span>
<span class="go">241       20.67  2.00    Yes   Sat  Dinner     2</span>
<span class="go">242       15.82  1.75     No   Sat  Dinner     2</span>
<span class="go">243       16.78  3.00     No  Thur  Dinner     2</span>

<span class="go">[244 rows x 6 columns]</span>
</pre></div>
</div>
</section>
<section id="rename-a-column">
<h4>Rename a column<a class="headerlink" href="#rename-a-column" title="Permalink to this headline">#</a></h4>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">tips</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;total_bill&quot;</span><span class="p">:</span> <span class="s2">&quot;total_bill_2&quot;</span><span class="p">})</span>
<span class="gh">Out[29]: </span><span class="go"></span>
<span class="go">     total_bill_2   tip     sex smoker   day    time  size</span>
<span class="go">0           14.99  1.01  Female     No   Sun  Dinner     2</span>
<span class="go">1            8.34  1.66    Male     No   Sun  Dinner     3</span>
<span class="go">2           19.01  3.50    Male     No   Sun  Dinner     3</span>
<span class="go">3           21.68  3.31    Male     No   Sun  Dinner     2</span>
<span class="go">4           22.59  3.61  Female     No   Sun  Dinner     4</span>
<span class="go">..            ...   ...     ...    ...   ...     ...   ...</span>
<span class="go">239         27.03  5.92    Male     No   Sat  Dinner     3</span>
<span class="go">240         25.18  2.00  Female    Yes   Sat  Dinner     2</span>
<span class="go">241         20.67  2.00    Male    Yes   Sat  Dinner     2</span>
<span class="go">242         15.82  1.75    Male     No   Sat  Dinner     2</span>
<span class="go">243         16.78  3.00  Female     No  Thur  Dinner     2</span>

<span class="go">[244 rows x 7 columns]</span>
</pre></div>
</div>
</section>
</section>
<section id="sorting-by-values">
<h3>Sorting by values<a class="headerlink" href="#sorting-by-values" title="Permalink to this headline">#</a></h3>
<p>Sorting in Stata is accomplished via <code class="docutils literal notranslate"><span class="pre">sort</span></code></p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">sort</span> sex total_bill
</pre></div>
</div>
<p>pandas has a <a class="reference internal" href="pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a> method, which takes a list of columns to sort by.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">tips</span> <span class="o">=</span> <span class="n">tips</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;total_bill&quot;</span><span class="p">])</span>

<span class="gp">In [31]: </span><span class="n">tips</span>
<span class="gh">Out[31]: </span><span class="go"></span>
<span class="go">     total_bill    tip     sex smoker   day    time  size</span>
<span class="go">67         1.07   1.00  Female    Yes   Sat  Dinner     1</span>
<span class="go">92         3.75   1.00  Female    Yes   Fri  Dinner     2</span>
<span class="go">111        5.25   1.00  Female     No   Sat  Dinner     1</span>
<span class="go">145        6.35   1.50  Female     No  Thur   Lunch     2</span>
<span class="go">135        6.51   1.25  Female     No  Thur   Lunch     2</span>
<span class="go">..          ...    ...     ...    ...   ...     ...   ...</span>
<span class="go">182       43.35   3.50    Male    Yes   Sun  Dinner     3</span>
<span class="go">156       46.17   5.00    Male     No   Sun  Dinner     6</span>
<span class="go">59        46.27   6.73    Male     No   Sat  Dinner     4</span>
<span class="go">212       46.33   9.00    Male     No   Sat  Dinner     4</span>
<span class="go">170       48.81  10.00    Male    Yes   Sat  Dinner     3</span>

<span class="go">[244 rows x 7 columns]</span>
</pre></div>
</div>
</section>
</section>
<section id="string-processing">
<h2>String processing<a class="headerlink" href="#string-processing" title="Permalink to this headline">#</a></h2>
<section id="finding-length-of-string">
<h3>Finding length of string<a class="headerlink" href="#finding-length-of-string" title="Permalink to this headline">#</a></h3>
<p>Stata determines the length of a character string with the <code class="xref py py-func docutils literal notranslate"><span class="pre">strlen()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">ustrlen()</span></code> functions for ASCII and Unicode strings, respectively.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> strlen_time = <span class="nf">strlen</span>(time)<span class="k"></span>
<span class="k">generate</span> ustrlen_time = <span class="nf">ustrlen</span>(time)
</pre></div>
</div>
<p>You can find the length of a character string with <a class="reference internal" href="pandas.Series.str.len.html#pandas.Series.str.len" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.len.html#pandas.Series.str.len" title="pandas.Series.str.len"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.len()</span></code></a>.
In Python 3, all strings are Unicode strings. <code class="docutils literal notranslate"><span class="pre">len</span></code> includes trailing blanks.
Use <code class="docutils literal notranslate"><span class="pre">len</span></code> and <code class="docutils literal notranslate"><span class="pre">rstrip</span></code> to exclude trailing blanks.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [32]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="gh">Out[32]: </span><span class="go"></span>
<span class="go">67     6</span>
<span class="go">92     6</span>
<span class="go">111    6</span>
<span class="go">145    5</span>
<span class="go">135    5</span>
<span class="go">      ..</span>
<span class="go">182    6</span>
<span class="go">156    6</span>
<span class="go">59     6</span>
<span class="go">212    6</span>
<span class="go">170    6</span>
<span class="go">Name: time, Length: 244, dtype: int64</span>

<span class="gp">In [33]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="gh">Out[33]: </span><span class="go"></span>
<span class="go">67     6</span>
<span class="go">92     6</span>
<span class="go">111    6</span>
<span class="go">145    5</span>
<span class="go">135    5</span>
<span class="go">      ..</span>
<span class="go">182    6</span>
<span class="go">156    6</span>
<span class="go">59     6</span>
<span class="go">212    6</span>
<span class="go">170    6</span>
<span class="go">Name: time, Length: 244, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="finding-position-of-substring">
<h3>Finding position of substring<a class="headerlink" href="#finding-position-of-substring" title="Permalink to this headline">#</a></h3>
<p>Stata determines the position of a character in a string with the <code class="xref py py-func docutils literal notranslate"><span class="pre">strpos()</span></code> function.
This takes the string defined by the first argument and searches for the
first position of the substring you supply as the second argument.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> str_position = <span class="nf">strpos</span>(sex, <span class="s">&quot;ale&quot;</span>)
</pre></div>
</div>
<p>You can find the position of a character in a column of strings with the <a class="reference internal" href="pandas.Series.str.find.html#pandas.Series.str.find" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.find.html#pandas.Series.str.find" title="pandas.Series.str.find"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.find()</span></code></a>
method. <code class="docutils literal notranslate"><span class="pre">find</span></code> searches for the first position of the substring. If the substring is found, the
method returns its position. If not found, it returns <code class="docutils literal notranslate"><span class="pre">-1</span></code>. Keep in mind that Python indexes are
zero-based.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;sex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;ale&quot;</span><span class="p">)</span>
<span class="gh">Out[34]: </span><span class="go"></span>
<span class="go">67     3</span>
<span class="go">92     3</span>
<span class="go">111    3</span>
<span class="go">145    3</span>
<span class="go">135    3</span>
<span class="go">      ..</span>
<span class="go">182    1</span>
<span class="go">156    1</span>
<span class="go">59     1</span>
<span class="go">212    1</span>
<span class="go">170    1</span>
<span class="go">Name: sex, Length: 244, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="extracting-substring-by-position">
<h3>Extracting substring by position<a class="headerlink" href="#extracting-substring-by-position" title="Permalink to this headline">#</a></h3>
<p>Stata extracts a substring from a string based on its position with the <code class="xref py py-func docutils literal notranslate"><span class="pre">substr()</span></code> function.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> short_sex = <span class="nf">substr</span>(sex, <span class="m">1</span>, <span class="m">1</span>)
</pre></div>
</div>
<p>With pandas you can use <code class="docutils literal notranslate"><span class="pre">[]</span></code> notation to extract a substring
from a string by position locations. Keep in mind that Python
indexes are zero-based.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;sex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[35]: </span><span class="go"></span>
<span class="go">67     F</span>
<span class="go">92     F</span>
<span class="go">111    F</span>
<span class="go">145    F</span>
<span class="go">135    F</span>
<span class="go">      ..</span>
<span class="go">182    M</span>
<span class="go">156    M</span>
<span class="go">59     M</span>
<span class="go">212    M</span>
<span class="go">170    M</span>
<span class="go">Name: sex, Length: 244, dtype: object</span>
</pre></div>
</div>
</section>
<section id="extracting-nth-word">
<h3>Extracting nth word<a class="headerlink" href="#extracting-nth-word" title="Permalink to this headline">#</a></h3>
<p>The Stata <code class="xref py py-func docutils literal notranslate"><span class="pre">word()</span></code> function returns the nth word from a string.
The first argument is the string you want to parse and the
second argument specifies which word you want to extract.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">clear</span>
<span class="k">input</span> str20 string
<span class="s">&quot;John Smith&quot;</span>
<span class="s">&quot;Jane Cook&quot;</span><span class="k"></span>
<span class="k">end</span>

<span class="k">generate</span> first_name = <span class="nf">word</span>(name, <span class="m">1</span>)<span class="k"></span>
<span class="k">generate</span> last_name = <span class="nf">word</span>(name, <span class="o">-</span><span class="m">1</span>)
</pre></div>
</div>
<p>The simplest way to extract words in pandas is to split the strings by spaces, then reference the
word by index. Note there are more powerful approaches should you need them.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [36]: </span><span class="n">firstlast</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;String&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;John Smith&quot;</span><span class="p">,</span> <span class="s2">&quot;Jane Cook&quot;</span><span class="p">]})</span>

<span class="gp">In [37]: </span><span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;First_Name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;String&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">In [38]: </span><span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;Last_Name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;String&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

<span class="gp">In [39]: </span><span class="n">firstlast</span>
<span class="gh">Out[39]: </span><span class="go"></span>
<span class="go">       String First_Name Last_Name</span>
<span class="go">0  John Smith       John     Smith</span>
<span class="go">1   Jane Cook       Jane      Cook</span>
</pre></div>
</div>
</section>
<section id="changing-case">
<h3>Changing case<a class="headerlink" href="#changing-case" title="Permalink to this headline">#</a></h3>
<p>The Stata <code class="xref py py-func docutils literal notranslate"><span class="pre">strupper()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">strlower()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">strproper()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">ustrupper()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">ustrlower()</span></code>, and <code class="xref py py-func docutils literal notranslate"><span class="pre">ustrtitle()</span></code> functions
change the case of ASCII and Unicode strings, respectively.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">clear</span>
<span class="k">input</span> str20 string
<span class="s">&quot;John Smith&quot;</span>
<span class="s">&quot;Jane Cook&quot;</span><span class="k"></span>
<span class="k">end</span>

<span class="k">generate</span> upper = <span class="nf">strupper</span>(string)<span class="k"></span>
<span class="k">generate</span> lower = <span class="nf">strlower</span>(string)<span class="k"></span>
<span class="k">generate</span> title = <span class="nf">strproper</span>(string)<span class="k"></span>
<span class="k">list</span>
</pre></div>
</div>
<p>The equivalent pandas methods are <a class="reference internal" href="pandas.Series.str.upper.html#pandas.Series.str.upper" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.upper.html#pandas.Series.str.upper" title="pandas.Series.str.upper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.upper()</span></code></a>, <a class="reference internal" href="pandas.Series.str.lower.html#pandas.Series.str.lower" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.lower.html#pandas.Series.str.lower" title="pandas.Series.str.lower"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.lower()</span></code></a>, and
<a class="reference internal" href="pandas.Series.str.title.html#pandas.Series.str.title" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.title.html#pandas.Series.str.title" title="pandas.Series.str.title"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.title()</span></code></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">firstlast</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;John Smith&quot;</span><span class="p">,</span> <span class="s2">&quot;Jane Cook&quot;</span><span class="p">]})</span>

<span class="gp">In [41]: </span><span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;upper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

<span class="gp">In [42]: </span><span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

<span class="gp">In [43]: </span><span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstlast</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>

<span class="gp">In [44]: </span><span class="n">firstlast</span>
<span class="gh">Out[44]: </span><span class="go"></span>
<span class="go">       string       upper       lower       title</span>
<span class="go">0  John Smith  JOHN SMITH  john smith  John Smith</span>
<span class="go">1   Jane Cook   JANE COOK   jane cook   Jane Cook</span>
</pre></div>
</div>
</section>
</section>
<section id="merging">
<h2>Merging<a class="headerlink" href="#merging" title="Permalink to this headline">#</a></h2>
<p>The following tables will be used in the merge examples:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">)})</span>

<span class="gp">In [46]: </span><span class="n">df1</span>
<span class="gh">Out[46]: </span><span class="go"></span>
<span class="go">  key     value</span>
<span class="go">0   A  0.469112</span>
<span class="go">1   B -0.282863</span>
<span class="go">2   C -1.509059</span>
<span class="go">3   D -1.135632</span>

<span class="gp">In [47]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">)})</span>

<span class="gp">In [48]: </span><span class="n">df2</span>
<span class="gh">Out[48]: </span><span class="go"></span>
<span class="go">  key     value</span>
<span class="go">0   B  1.212112</span>
<span class="go">1   D -0.173215</span>
<span class="go">2   D  0.119209</span>
<span class="go">3   E -1.044236</span>
</pre></div>
</div>
<p>In Stata, to perform a merge, one data set must be in memory
and the other must be referenced as a file name on disk. In
contrast, Python must have both <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code> already in memory.</p>
<p>By default, Stata performs an outer join, where all observations
from both data sets are left in memory after the merge. One can
keep only observations from the initial data set, the merged data set,
or the intersection of the two by using the values created in the
<code class="docutils literal notranslate"><span class="pre">_merge</span></code> variable.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="c1">* First create df2 and save to disk</span><span class="k"></span>
<span class="k">clear</span>
<span class="k">input</span> str1 key
B
D
D
E<span class="k"></span>
<span class="k">end</span>
<span class="k">generate</span> value = <span class="nf">rnormal</span>()<span class="k"></span>
<span class="k">save</span> df2<span class="m">.</span>dta

<span class="c1">* Now create df1 in memory</span><span class="k"></span>
<span class="k">clear</span>
<span class="k">input</span> str1 key
A
B
C
D<span class="k"></span>
<span class="k">end</span>
<span class="k">generate</span> value = <span class="nf">rnormal</span>()

<span class="k">preserve</span>

<span class="c1">* Left join</span><span class="k"></span>
<span class="k">merge</span> <span class="m">1</span>:n key using df2<span class="m">.</span>dta<span class="k"></span>
<span class="k">keep if</span> _merge <span class="o">==</span> <span class="m">1</span>

<span class="c1">* Right join</span><span class="k"></span>
<span class="k">restore</span>,<span class="k"> preserve</span>
<span class="k">merge</span> <span class="m">1</span>:n key using df2<span class="m">.</span>dta<span class="k"></span>
<span class="k">keep if</span> _merge <span class="o">==</span> <span class="m">2</span>

<span class="c1">* Inner join</span><span class="k"></span>
<span class="k">restore</span>,<span class="k"> preserve</span>
<span class="k">merge</span> <span class="m">1</span>:n key using df2<span class="m">.</span>dta<span class="k"></span>
<span class="k">keep if</span> _merge <span class="o">==</span> <span class="m">3</span>

<span class="c1">* Outer join</span><span class="k"></span>
<span class="k">restore</span>
<span class="k">merge</span> <span class="m">1</span>:n key using df2<span class="m">.</span>dta
</pre></div>
</div>
<p>pandas DataFrames have a <a class="reference internal" href="pandas.DataFrame.merge.html#pandas.DataFrame.merge" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge()</span></code></a> method, which provides similar functionality. The
data does not have to be sorted ahead of time, and different join types are accomplished via the
<code class="docutils literal notranslate"><span class="pre">how</span></code> keyword.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="n">inner_join</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="gp">In [50]: </span><span class="n">inner_join</span>
<span class="gh">Out[50]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   B -0.282863  1.212112</span>
<span class="go">1   D -1.135632 -0.173215</span>
<span class="go">2   D -1.135632  0.119209</span>

<span class="gp">In [51]: </span><span class="n">left_join</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

<span class="gp">In [52]: </span><span class="n">left_join</span>
<span class="gh">Out[52]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   A  0.469112       NaN</span>
<span class="go">1   B -0.282863  1.212112</span>
<span class="go">2   C -1.509059       NaN</span>
<span class="go">3   D -1.135632 -0.173215</span>
<span class="go">4   D -1.135632  0.119209</span>

<span class="gp">In [53]: </span><span class="n">right_join</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>

<span class="gp">In [54]: </span><span class="n">right_join</span>
<span class="gh">Out[54]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   B -0.282863  1.212112</span>
<span class="go">1   D -1.135632 -0.173215</span>
<span class="go">2   D -1.135632  0.119209</span>
<span class="go">3   E       NaN -1.044236</span>

<span class="gp">In [55]: </span><span class="n">outer_join</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">)</span>

<span class="gp">In [56]: </span><span class="n">outer_join</span>
<span class="gh">Out[56]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   A  0.469112       NaN</span>
<span class="go">1   B -0.282863  1.212112</span>
<span class="go">2   C -1.509059       NaN</span>
<span class="go">3   D -1.135632 -0.173215</span>
<span class="go">4   D -1.135632  0.119209</span>
<span class="go">5   E       NaN -1.044236</span>
</pre></div>
</div>
</section>
<section id="missing-data">
<h2>Missing data<a class="headerlink" href="#missing-data" title="Permalink to this headline">#</a></h2>
<p>Both pandas and Stata have a representation for missing data.</p>
<p>pandas represents missing data with the special float value <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (not a number). Many of the
semantics are the same; for example missing data propagates through numeric operations, and is
ignored by default for aggregations.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">outer_join</span>
<span class="gh">Out[57]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   A  0.469112       NaN</span>
<span class="go">1   B -0.282863  1.212112</span>
<span class="go">2   C -1.509059       NaN</span>
<span class="go">3   D -1.135632 -0.173215</span>
<span class="go">4   D -1.135632  0.119209</span>
<span class="go">5   E       NaN -1.044236</span>

<span class="gp">In [58]: </span><span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_x&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_y&quot;</span><span class="p">]</span>
<span class="gh">Out[58]: </span><span class="go"></span>
<span class="go">0         NaN</span>
<span class="go">1    0.929249</span>
<span class="go">2         NaN</span>
<span class="go">3   -1.308847</span>
<span class="go">4   -1.016424</span>
<span class="go">5         NaN</span>
<span class="go">dtype: float64</span>

<span class="gp">In [59]: </span><span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[59]: </span><span class="go">-3.5940742896293765</span>
</pre></div>
</div>
<p>One difference is that missing data cannot be compared to its sentinel value.
For example, in Stata you could do this to filter missing values.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="c1">* Keep missing values</span><span class="k"></span>
<span class="k">list if</span> value_x <span class="o">==</span> .
<span class="c1">* Keep non-missing values</span><span class="k"></span>
<span class="k">list if</span> value_x <span class="o">!=</span> .
</pre></div>
</div>
<p>In pandas, <a class="reference internal" href="pandas.Series.isna.html#pandas.Series.isna" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.isna.html#pandas.Series.isna" title="pandas.Series.isna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.isna()</span></code></a> and <a class="reference internal" href="pandas.Series.notna.html#pandas.Series.notna" tppabs="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.notna.html#pandas.Series.notna" title="pandas.Series.notna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.notna()</span></code></a> can be used to filter the rows.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">outer_join</span><span class="p">[</span><span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span>
<span class="gh">Out[60]: </span><span class="go"></span>
<span class="go">  key  value_x   value_y</span>
<span class="go">5   E      NaN -1.044236</span>

<span class="gp">In [61]: </span><span class="n">outer_join</span><span class="p">[</span><span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
<span class="gh">Out[61]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   A  0.469112       NaN</span>
<span class="go">1   B -0.282863  1.212112</span>
<span class="go">2   C -1.509059       NaN</span>
<span class="go">3   D -1.135632 -0.173215</span>
<span class="go">4   D -1.135632  0.119209</span>
</pre></div>
</div>
<p>pandas provides <a class="reference internal" href="missing_data.html#missing-data" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/missing_data.html#missing-data"><span class="std std-ref">a variety of methods to work with missing data</span></a>. Here are some examples:</p>
<section id="drop-rows-with-missing-values">
<h3>Drop rows with missing values<a class="headerlink" href="#drop-rows-with-missing-values" title="Permalink to this headline">#</a></h3>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [62]: </span><span class="n">outer_join</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gh">Out[62]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">1   B -0.282863  1.212112</span>
<span class="go">3   D -1.135632 -0.173215</span>
<span class="go">4   D -1.135632  0.119209</span>
</pre></div>
</div>
</section>
<section id="forward-fill-from-previous-rows">
<h3>Forward fill from previous rows<a class="headerlink" href="#forward-fill-from-previous-rows" title="Permalink to this headline">#</a></h3>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [63]: </span><span class="n">outer_join</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;ffill&quot;</span><span class="p">)</span>
<span class="gh">Out[63]: </span><span class="go"></span>
<span class="go">  key   value_x   value_y</span>
<span class="go">0   A  0.469112       NaN</span>
<span class="go">1   B -0.282863  1.212112</span>
<span class="go">2   C -1.509059  1.212112</span>
<span class="go">3   D -1.135632 -0.173215</span>
<span class="go">4   D -1.135632  0.119209</span>
<span class="go">5   E -1.135632 -1.044236</span>
</pre></div>
</div>
</section>
<section id="replace-missing-values-with-a-specified-value">
<h3>Replace missing values with a specified value<a class="headerlink" href="#replace-missing-values-with-a-specified-value" title="Permalink to this headline">#</a></h3>
<p>Using the mean:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [64]: </span><span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">outer_join</span><span class="p">[</span><span class="s2">&quot;value_x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="gh">Out[64]: </span><span class="go"></span>
<span class="go">0    0.469112</span>
<span class="go">1   -0.282863</span>
<span class="go">2   -1.509059</span>
<span class="go">3   -1.135632</span>
<span class="go">4   -1.135632</span>
<span class="go">5   -0.718815</span>
<span class="go">Name: value_x, dtype: float64</span>
</pre></div>
</div>
</section>
</section>
<section id="groupby">
<h2>GroupBy<a class="headerlink" href="#groupby" title="Permalink to this headline">#</a></h2>
<section id="aggregation">
<h3>Aggregation<a class="headerlink" href="#aggregation" title="Permalink to this headline">#</a></h3>
<p>Stata‚Äôs <code class="docutils literal notranslate"><span class="pre">collapse</span></code> can be used to group by one or
more key variables and compute aggregations on
numeric columns.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">collapse</span> (sum) total_bill tip,<span class="k"> by</span>(sex smoker)
</pre></div>
</div>
<p>pandas provides a flexible <code class="docutils literal notranslate"><span class="pre">groupby</span></code> mechanism that allows similar aggregations. See the
<a class="reference internal" href="groupby.html#groupby" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html#groupby"><span class="std std-ref">groupby documentation</span></a> for more details and examples.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [65]: </span><span class="n">tips_summed</span> <span class="o">=</span> <span class="n">tips</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;smoker&quot;</span><span class="p">])[[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">,</span> <span class="s2">&quot;tip&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="gp">In [66]: </span><span class="n">tips_summed</span>
<span class="gh">Out[66]: </span><span class="go"></span>
<span class="go">               total_bill     tip</span>
<span class="go">sex    smoker                    </span>
<span class="go">Female No          869.68  149.77</span>
<span class="go">       Yes         527.27   96.74</span>
<span class="go">Male   No         1725.75  302.00</span>
<span class="go">       Yes        1217.07  183.07</span>
</pre></div>
</div>
</section>
<section id="transformation">
<h3>Transformation<a class="headerlink" href="#transformation" title="Permalink to this headline">#</a></h3>
<p>In Stata, if the group aggregations need to be used with the
original data set, one would usually use <code class="docutils literal notranslate"><span class="pre">bysort</span></code> with <code class="xref py py-func docutils literal notranslate"><span class="pre">egen()</span></code>.
For example, to subtract the mean for each observation by smoker group.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">bysort</span> sex smoker:<span class="k"> egen</span> group_bill =<span class="k"> mean</span>(total_bill)<span class="k"></span>
<span class="k">generate</span> adj_total_bill = total_bill <span class="o">-</span> group_bill
</pre></div>
</div>
<p>pandas provides a <a class="reference internal" href="groupby.html#groupby-transform" tppabs="https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html#groupby-transform"><span class="std std-ref">Transformation</span></a> mechanism that allows these type of operations to be
succinctly expressed in one operation.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [67]: </span><span class="n">gb</span> <span class="o">=</span> <span class="n">tips</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;smoker&quot;</span><span class="p">)[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span>

<span class="gp">In [68]: </span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;adj_total_bill&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">gb</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">)</span>

<span class="gp">In [69]: </span><span class="n">tips</span>
<span class="gh">Out[69]: </span><span class="go"></span>
<span class="go">     total_bill    tip     sex smoker   day    time  size  adj_total_bill</span>
<span class="go">67         1.07   1.00  Female    Yes   Sat  Dinner     1      -17.686344</span>
<span class="go">92         3.75   1.00  Female    Yes   Fri  Dinner     2      -15.006344</span>
<span class="go">111        5.25   1.00  Female     No   Sat  Dinner     1      -11.938278</span>
<span class="go">145        6.35   1.50  Female     No  Thur   Lunch     2      -10.838278</span>
<span class="go">135        6.51   1.25  Female     No  Thur   Lunch     2      -10.678278</span>
<span class="go">..          ...    ...     ...    ...   ...     ...   ...             ...</span>
<span class="go">182       43.35   3.50    Male    Yes   Sun  Dinner     3       24.593656</span>
<span class="go">156       46.17   5.00    Male     No   Sun  Dinner     6       28.981722</span>
<span class="go">59        46.27   6.73    Male     No   Sat  Dinner     4       29.081722</span>
<span class="go">212       46.33   9.00    Male     No   Sat  Dinner     4       29.141722</span>
<span class="go">170       48.81  10.00    Male    Yes   Sat  Dinner     3       30.053656</span>

<span class="go">[244 rows x 8 columns]</span>
</pre></div>
</div>
</section>
<section id="by-group-processing">
<h3>By group processing<a class="headerlink" href="#by-group-processing" title="Permalink to this headline">#</a></h3>
<p>In addition to aggregation, pandas <code class="docutils literal notranslate"><span class="pre">groupby</span></code> can be used to
replicate most other <code class="docutils literal notranslate"><span class="pre">bysort</span></code> processing from Stata. For example,
the following example lists the first observation in the current
sort order by sex/smoker group.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">bysort</span> sex smoker:<span class="k"> list if</span> _n <span class="o">==</span> <span class="m">1</span>
</pre></div>
</div>
<p>In pandas this would be written as:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [70]: </span><span class="n">tips</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;smoker&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="gh">Out[70]: </span><span class="go"></span>
<span class="go">               total_bill   tip   day    time  size  adj_total_bill</span>
<span class="go">sex    smoker                                                      </span>
<span class="go">Female No            5.25  1.00   Sat  Dinner     1      -11.938278</span>
<span class="go">       Yes           1.07  1.00   Sat  Dinner     1      -17.686344</span>
<span class="go">Male   No            5.51  2.00  Thur   Lunch     2      -11.678278</span>
<span class="go">       Yes           5.25  5.15   Sun  Dinner     2      -13.506344</span>
</pre></div>
</div>
</section>
</section>
<section id="other-considerations">
<h2>Other considerations<a class="headerlink" href="#other-considerations" title="Permalink to this headline">#</a></h2>
<section id="disk-vs-memory">
<h3>Disk vs memory<a class="headerlink" href="#disk-vs-memory" title="Permalink to this headline">#</a></h3>
<p>pandas and Stata both operate exclusively in memory. This means that the size of
data able to be loaded in pandas is limited by your machine‚Äôs memory.
If out of core processing is needed, one possibility is the
<a class="reference external" href="javascript:if(confirm('https://docs.dask.org/en/latest/dataframe.html  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://docs.dask.org/en/latest/dataframe.html'" tppabs="https://docs.dask.org/en/latest/dataframe.html">dask.dataframe</a>
library, which provides a subset of pandas functionality for an
on-disk <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
</section>
</section>
</section>
</article>
<footer class="bd-footer-article">

<div class='prev-next-area'>
<a class='left-prev' id="prev-link" href="comparison_with_sas.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_sas.html" title="previous page">
<i class="fas fa-angle-left"></i>
<div class="prev-next-info">
<p class="prev-next-subtitle">previous</p>
<p class="prev-next-title">Comparison with SAS</p>
</div>
</a>
<a class='right-next' id="next-link" href="tutorials.html" tppabs="https://pandas.pydata.org/pandas-docs/stable/getting_started/tutorials.html" title="next page">
<div class="prev-next-info">
<p class="prev-next-subtitle">next</p>
<p class="prev-next-title">Community tutorials</p>
</div>
<i class="fas fa-angle-right"></i>
</a>
</div>
</footer>
</div>
<div class="bd-sidebar-secondary bd-toc">

<div class="toc-item">
<div class="tocsection onthispage">
<i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#data-structures">
Data structures
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#general-terminology-translation">
General terminology translation
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#dataframe">
<code class="docutils literal notranslate">
<span class="pre">
DataFrame
</span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#series">
<code class="docutils literal notranslate">
<span class="pre">
Series
</span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#index">
<code class="docutils literal notranslate">
<span class="pre">
Index
</span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#copies-vs-in-place-operations">
Copies vs. in place operations
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#data-input-output">
Data input / output
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#constructing-a-dataframe-from-values">
Constructing a DataFrame from values
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#reading-external-data">
Reading external data
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#limiting-output">
Limiting output
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#exporting-data">
Exporting data
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#data-operations">
Data operations
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#operations-on-columns">
Operations on columns
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#filtering">
Filtering
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#if-then-logic">
If/then logic
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#date-functionality">
Date functionality
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#selection-of-columns">
Selection of columns
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#keep-certain-columns">
Keep certain columns
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#drop-a-column">
Drop a column
</a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#rename-a-column">
Rename a column
</a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#sorting-by-values">
Sorting by values
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#string-processing">
String processing
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#finding-length-of-string">
Finding length of string
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#finding-position-of-substring">
Finding position of substring
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#extracting-substring-by-position">
Extracting substring by position
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#extracting-nth-word">
Extracting nth word
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#changing-case">
Changing case
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#merging">
Merging
</a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#missing-data">
Missing data
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#drop-rows-with-missing-values">
Drop rows with missing values
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#forward-fill-from-previous-rows">
Forward fill from previous rows
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#replace-missing-values-with-a-specified-value">
Replace missing values with a specified value
</a>
</li>
</ul>
 </li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#groupby">
GroupBy
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#aggregation">
Aggregation
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#transformation">
Transformation
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#by-group-processing">
By group processing
</a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#other-considerations">
Other considerations
</a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#disk-vs-memory">
Disk vs memory
</a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
<div class="toc-item">
</div>
<div class="toc-item">
<div class="tocsection sourcelink">
<a href="comparison_with_stata.rst.txt.htm" tppabs="https://pandas.pydata.org/pandas-docs/stable/_sources/getting_started/comparison/comparison_with_stata.rst.txt">
<i class="fas fa-file-alt"></i> Show Source
</a>
</div>
</div>
</div>
</div>
<footer class="bd-footer-content">
<div class="bd-footer-content__inner">
</div>
</footer>
</main>
</div>
</div>

<script src="pydata-sphinx-theme.js-digest=9b1a4fa89bdd0e95b23b" tppabs="https://pandas.pydata.org/pandas-docs/stable/_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>
<footer class="bd-footer"><div class="bd-footer__inner container">
<div class="footer-item">
<p class="copyright">
&copy 2022 pandas via <a href="javascript:if(confirm('https://numfocus.org/  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://numfocus.org/'" tppabs="https://numfocus.org/">NumFOCUS, Inc.</a> Hosted by <a href="javascript:if(confirm('https://www.ovhcloud.com/  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='https://www.ovhcloud.com/'" tppabs="https://www.ovhcloud.com/">OVHcloud</a>.
</p>
</div>
<div class="footer-item">
<p class="sphinx-version">
Created using <a href="javascript:if(confirm('http://sphinx-doc.org/  \n\n∏√Œƒº˛Œﬁ∑®”√ Teleport Ultra œ¬‘ÿ, “ÚŒ™ À¸ «“ª∏ˆ”ÚªÚ¬∑æ∂Õ‚≤ø±ª…Ë÷√Œ™À¸µƒ∆Ù ºµÿ÷∑µƒµÿ÷∑°£  \n\nƒ„œÎ‘⁄∑˛ŒÒ∆˜…œ¥Úø™À¸?'))window.location='http://sphinx-doc.org/'" tppabs="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
</div>
</div>
</footer>
</body>
</html>